<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>DealershipAI â€” Halo Dashboard Preview</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- React UMD -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      html, body, #root { height: 100%; }
      body {
        margin: 0;
        background: #0f172a;
        color: #e5e7eb;
        font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      }

      /* Tailwind-like utilities */
      .bg-slate-900 { background-color: #0f172a; }
      .bg-slate-800 { background-color: #1e293b; }
      .bg-slate-700 { background-color: #334155; }
      .bg-slate-600 { background-color: #475569; }
      .text-slate-100 { color: #f1f5f9; }
      .text-slate-200 { color: #e2e8f0; }
      .text-slate-300 { color: #cbd5e1; }
      .text-slate-400 { color: #94a3b8; }
      .text-slate-500 { color: #64748b; }
      .border-slate-700 { border-color: #334155; }
      .border-slate-600 { border-color: #475569; }

      .text-gray-300 { color: #d1d5db; }
      .text-gray-400 { color: #9ca3af; }
      .text-gray-500 { color: #6b7280; }
      .bg-gray-800 { background-color: #1f2937; }
      .border-gray-700 { border-color: #374151; }

      .text-blue-400 { color: #60a5fa; }
      .text-blue-300 { color: #93c5fd; }
      .bg-blue-600 { background-color: #2563eb; }
      .bg-blue-700 { background-color: #1d4ed8; }
      .hover\:bg-blue-700:hover { background-color: #1d4ed8; }

      .text-green-400 { color: #4ade80; }
      .text-green-200 { color: #bbf7d0; }
      .text-green-100 { color: #dcfce7; }
      .bg-green-800 { background-color: #166534; }
      .bg-green-500 { background-color: #22c55e; }

      .text-red-400 { color: #f87171; }
      .text-red-200 { color: #fecaca; }
      .bg-red-900 { background-color: #7f1d1d; }
      .border-red-700 { border-color: #b91c1c; }

      .text-yellow-400 { color: #facc15; }

      /* Layout utilities */
      .min-h-screen { min-height: 100vh; }
      .h-full { height: 100%; }
      .max-h-\[600px\] { max-height: 600px; }
      .h-16 { height: 4rem; }
      .h-8 { height: 2rem; }
      .w-8 { width: 2rem; }
      .w-10 { width: 2.5rem; }
      .h-10 { height: 2.5rem; }
      .w-4 { width: 1rem; }
      .h-4 { height: 1rem; }
      .w-5 { width: 1.25rem; }
      .h-5 { height: 1.25rem; }
      .w-6 { width: 1.5rem; }
      .h-6 { height: 1.5rem; }

      .p-2 { padding: 0.5rem; }
      .p-3 { padding: 0.75rem; }
      .p-4 { padding: 1rem; }
      .p-6 { padding: 1.5rem; }
      .p-8 { padding: 2rem; }
      .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
      .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
      .px-4 { padding-left: 1rem; padding-right: 1rem; }
      .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
      .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
      .py-4 { padding-top: 1rem; padding-bottom: 1rem; }

      .m-0 { margin: 0; }
      .mb-2 { margin-bottom: 0.5rem; }
      .mb-4 { margin-bottom: 1rem; }
      .mb-6 { margin-bottom: 1.5rem; }
      .mt-1 { margin-top: 0.25rem; }
      .mt-2 { margin-top: 0.5rem; }
      .mt-4 { margin-top: 1rem; }
      .mt-6 { margin-top: 1.5rem; }
      .ml-2 { margin-left: 0.5rem; }
      .mr-4 { margin-right: 1rem; }
      .mx-auto { margin-left: auto; margin-right: auto; }

      .border { border-width: 1px; }
      .border-b { border-bottom-width: 1px; }
      .border-t { border-top-width: 1px; }
      .border-b-2 { border-bottom-width: 2px; }
      .border-blue-500 { border-color: #3b82f6; }
      .rounded { border-radius: 0.25rem; }
      .rounded-lg { border-radius: 0.5rem; }
      .rounded-full { border-radius: 9999px; }

      .flex { display: flex; }
      .inline-flex { display: inline-flex; }
      .grid { display: grid; }
      .hidden { display: none; }
      .items-center { align-items: center; }
      .items-start { align-items: flex-start; }
      .justify-between { justify-content: space-between; }
      .justify-center { justify-content: center; }
      .justify-end { justify-content: flex-end; }
      .flex-1 { flex: 1 1 0%; }
      .flex-col { flex-direction: column; }
      .flex-wrap { flex-wrap: wrap; }
      .gap-1 { gap: 0.25rem; }
      .gap-2 { gap: 0.5rem; }
      .gap-3 { gap: 0.75rem; }
      .gap-4 { gap: 1rem; }
      .gap-6 { gap: 1.5rem; }

      .text-xs { font-size: 0.75rem; line-height: 1rem; }
      .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
      .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
      .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
      .text-2xl { font-size: 1.5rem; line-height: 2rem; }
      .font-medium { font-weight: 500; }
      .font-semibold { font-weight: 600; }
      .font-bold { font-weight: 700; }

      .overflow-y-auto { overflow-y: auto; }
      .overflow-x-auto { overflow-x: auto; }
      .whitespace-pre-wrap { white-space: pre-wrap; }
      .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
      .max-w-\[80\%\] { max-width: 80%; }
      .max-w-\[220px\] { max-width: 220px; }
      .max-w-7xl { max-width: 80rem; }
      .w-64 { width: 16rem; }
      .w-full { width: 100%; }

      .sticky { position: sticky; }
      .relative { position: relative; }
      .absolute { position: absolute; }
      .top-0 { top: 0px; }
      .z-40 { z-index: 40; }

      .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
      .transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }

      .cursor-pointer { cursor: pointer; }
      .cursor-not-allowed { cursor: not-allowed; }
      .select-none { user-select: none; }

      .opacity-50 { opacity: 0.5; }
      .disabled\:opacity-50:disabled { opacity: 0.5; }
      .disabled\:cursor-not-allowed:disabled { cursor: not-allowed; }

      .hover\:bg-slate-700:hover { background-color: #334155; }
      .hover\:bg-slate-600:hover { background-color: #475569; }
      .hover\:text-slate-100:hover { color: #f1f5f9; }
      .hover\:text-slate-200:hover { color: #e2e8f0; }
      .hover\:text-slate-300:hover { color: #cbd5e1; }
      .hover\:text-blue-300:hover { color: #93c5fd; }

      .animate-bounce { animation: bounce 1s infinite; }
      .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
      .animate-spin { animation: spin 1s linear infinite; }

      @keyframes bounce {
        0%, 100% { transform: translateY(-25%); animation-timing-function: cubic-bezier(0.8,0,1,1); }
        50% { transform: none; animation-timing-function: cubic-bezier(0,0,0.2,1); }
      }

      @keyframes pulse {
        50% { opacity: .5; }
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      .space-y-4 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem; }
      .space-y-6 > :not([hidden]) ~ :not([hidden]) { margin-top: 1.5rem; }
      .space-y-8 > :not([hidden]) ~ :not([hidden]) { margin-top: 2rem; }

      .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
      .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }

      @media (min-width: 768px) {
        .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .md\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .md\:flex { display: flex; }
      }

      @media (min-width: 1024px) {
        .lg\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        .lg\:px-8 { padding-left: 2rem; padding-right: 2rem; }
      }

      @media (min-width: 640px) {
        .sm\:px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
      }

      button:focus { outline: 2px solid transparent; outline-offset: 2px; }
      input:focus { outline: 2px solid #3b82f6; outline-offset: 2px; }

      .bg-gradient-to-br { background-image: linear-gradient(to bottom right, var(--tw-gradient-stops)); }
      .from-blue-500 { --tw-gradient-from: #3b82f6; --tw-gradient-to: rgb(59 130 246 / 0); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
      .to-purple-600 { --tw-gradient-to: #9333ea; }
      .place-items-center { place-items: center; }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel" data-presets="react">
      const {
        AlertTriangle, TrendingUp, Eye, Search, Shield, Brain, Target,
        BarChart3, RefreshCw, ChevronDown, ChevronUp, ExternalLink, Lock,
        MessageSquare, Bot, Send, Mic, MicOff, Volume2, AlertCircle,
        Zap, ArrowUp
      } = LucideReact;

      // Mock localStorage for browser compatibility
      const safeLocalStorage = {
        getItem: (key) => {
          try {
            return window.localStorage?.getItem(key) || null;
          } catch {
            return null;
          }
        },
        setItem: (key, value) => {
          try {
            window.localStorage?.setItem(key, value);
          } catch {}
        }
      };

      // Card Component
      const Card = ({ className = "", children }) => (
        React.createElement('div', {
          className: `bg-slate-800 rounded-lg border border-slate-700 ${className}`
        }, children)
      );

      // Pill Component
      const Pill = ({ children }) => (
        React.createElement('span', {
          className: "px-2 py-0.5 text-xs rounded-full bg-gray-800 text-gray-300 border border-gray-700"
        }, children)
      );

      // HAL Assistant Component
      const HalAssistant = ({ dealerId = "demo-dealer", userTier = 1, businessInfo = {}, onUpgrade }) => {
        const [messages, setMessages] = React.useState([
          {
            id: 1,
            type: 'assistant',
            content: "ðŸ‘‹ Hi! I'm Hal, your dealership AI assistant. I can help you with customer inquiries, inventory questions, and dealership operations. What can I help you with today?",
            timestamp: new Date()
          }
        ]);

        const [inputMessage, setInputMessage] = React.useState('');
        const [isLoading, setIsLoading] = React.useState(false);
        const [isListening, setIsListening] = React.useState(false);
        const [usage, setUsage] = React.useState({ remaining: 50, resetTime: null });

        const messagesEndRef = React.useRef(null);

        // Tier configuration
        const DEALER_TIERS = {
          1: { name: "Starter", limits: { features: { voiceMinutes: 30 } } },
          2: { name: "Professional", limits: { features: { voiceMinutes: 120 } } },
          3: { name: "Enterprise", limits: { features: { voiceMinutes: 500 } } },
          4: { name: "Enterprise Plus", limits: { features: { voiceMinutes: 2000 } } }
        };

        const tierInfo = DEALER_TIERS[userTier];
        const hasVoice = tierInfo?.limits?.features?.voiceMinutes > 0;
        const upgradeInfo = userTier < 4 ? { nextTier: DEALER_TIERS[userTier + 1] } : null;

        // Auto-scroll to bottom
        React.useEffect(() => {
          messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
        }, [messages]);

        const quickActions = [
          {
            label: "Check Inventory",
            prompt: "Show me our current inventory status and best sellers",
            tier: 1
          },
          {
            label: "Customer Scripts",
            prompt: "Give me a sales script for first-time buyers",
            tier: 1
          },
          {
            label: "Competitive Analysis",
            prompt: "How do we compare to competitors in our area?",
            tier: 2
          },
          {
            label: "Marketing Ideas",
            prompt: "Suggest marketing campaigns for this month",
            tier: 2
          },
          {
            label: "Financial Analysis",
            prompt: "Analyze our profit margins by vehicle category",
            tier: 3
          },
          {
            label: "Custom Reports",
            prompt: "Generate a custom performance report",
            tier: 3
          }
        ];

        const handleSendMessage = async (messageText = inputMessage.trim()) => {
          if (!messageText || isLoading) return;

          const newMessage = {
            id: Date.now(),
            type: 'user',
            content: messageText,
            timestamp: new Date()
          };

          setMessages(prev => [...prev, newMessage]);
          setInputMessage('');
          setIsLoading(true);

          try {
            // Simulate API call with mock response
            await new Promise(resolve => setTimeout(resolve, 1500));

            const responses = [
              "I'd be happy to help you with that! Based on your dealership's current setup, I can provide detailed insights about inventory management, customer engagement strategies, and sales optimization.",
              "Great question! For your dealership in " + (businessInfo.location || "Naples, FL") + ", I recommend focusing on local SEO optimization and customer retention programs.",
              "Let me analyze that for you. Your dealership appears to be performing well in key metrics. I can provide specific recommendations for improvement in areas like conversion rates and customer satisfaction.",
              "That's an excellent strategic question. Based on current market trends in the automotive industry, I suggest implementing data-driven approaches to customer acquisition and retention."
            ];

            const assistantMessage = {
              id: Date.now() + 1,
              type: 'assistant',
              content: responses[Math.floor(Math.random() * responses.length)],
              timestamp: new Date()
            };

            setMessages(prev => [...prev, assistantMessage]);
            setUsage(prev => ({ ...prev, remaining: Math.max(0, prev.remaining - 1) }));

          } catch (error) {
            console.error('Hal message error:', error);
            const errorMessage = {
              id: Date.now() + 1,
              type: 'error',
              content: "I'm experiencing some technical difficulties. Please try again in a moment.",
              timestamp: new Date()
            };
            setMessages(prev => [...prev, errorMessage]);
          } finally {
            setIsLoading(false);
          }
        };

        const handleQuickAction = (action) => {
          if (userTier < action.tier) {
            setMessages(prev => [...prev, {
              id: Date.now(),
              type: 'error',
              content: `"${action.label}" requires ${DEALER_TIERS[action.tier].name} tier or higher. ${upgradeInfo ? 'Upgrade to unlock this feature!' : ''}`,
              timestamp: new Date()
            }]);
            return;
          }
          handleSendMessage(action.prompt);
        };

        const speakMessage = (text) => {
          if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 0.9;
            utterance.pitch = 1;
            window.speechSynthesis.speak(utterance);
          }
        };

        return React.createElement('div', { className: "flex flex-col h-full max-h-[600px]" },
          // Header
          React.createElement('div', { className: "flex items-center justify-between p-4 border-b border-slate-700" },
            React.createElement('div', { className: "flex items-center gap-3" },
              React.createElement('div', { className: "w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full grid place-items-center" }, "ðŸ¤–"),
              React.createElement('div', null,
                React.createElement('h3', { className: "font-semibold text-slate-100 flex items-center gap-2" },
                  "Hal Assistant",
                  React.createElement(Pill, null, tierInfo.name)
                ),
                React.createElement('div', { className: "text-xs text-slate-400" }, `${usage.remaining || '?'} messages left`)
              )
            ),
            React.createElement('div', { className: "flex items-center gap-2" },
              userTier < 4 && upgradeInfo && React.createElement('button', {
                onClick: onUpgrade,
                className: "flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700"
              },
                React.createElement(ArrowUp, { className: "w-3 h-3" }),
                "Upgrade"
              )
            )
          ),

          // Quick Actions
          React.createElement('div', { className: "p-4 border-b border-slate-700" },
            React.createElement('div', { className: "flex flex-wrap gap-2" },
              quickActions.map((action, index) =>
                React.createElement('button', {
                  key: index,
                  onClick: () => handleQuickAction(action),
                  disabled: isLoading,
                  className: `px-3 py-1.5 text-xs rounded-lg border transition-colors ${
                    userTier >= action.tier
                      ? 'border-slate-600 bg-slate-700 text-slate-200 hover:bg-slate-600'
                      : 'border-slate-600 bg-slate-800 text-slate-500 cursor-not-allowed'
                  }`
                },
                  action.label,
                  userTier < action.tier && React.createElement(Lock, { className: "w-3 h-3 ml-1 inline" })
                )
              )
            )
          ),

          // Messages
          React.createElement('div', { className: "flex-1 overflow-y-auto p-4 space-y-4" },
            messages.map((message) =>
              React.createElement('div', {
                key: message.id,
                className: `flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`
              },
                React.createElement('div', {
                  className: `max-w-[80%] rounded-lg p-3 ${
                    message.type === 'user'
                      ? 'bg-blue-600 text-white'
                      : message.type === 'error'
                      ? 'bg-red-900 text-red-200 border border-red-700'
                      : 'bg-slate-700 text-slate-100'
                  }`
                },
                  React.createElement('div', { className: "whitespace-pre-wrap" }, message.content),
                  message.type === 'assistant' && React.createElement('div', { className: "flex items-center justify-between mt-2 pt-2 border-t border-slate-600" },
                    React.createElement('div', { className: "flex items-center gap-2" },
                      React.createElement('span', { className: "text-xs text-slate-400" }, message.timestamp.toLocaleTimeString()),
                      message.tokens && React.createElement(Pill, null, `${message.tokens} tokens`),
                      message.cost && React.createElement(Pill, null, `$${message.cost.toFixed(3)}`)
                    ),
                    React.createElement('button', {
                      onClick: () => speakMessage(message.content),
                      className: "p-1 text-slate-400 hover:text-slate-200 transition-colors",
                      title: "Read aloud"
                    },
                      React.createElement(Volume2, { className: "w-3 h-3" })
                    )
                  )
                )
              )
            ),

            isLoading && React.createElement('div', { className: "flex justify-start" },
              React.createElement('div', { className: "bg-slate-700 rounded-lg p-3 max-w-[80%]" },
                React.createElement('div', { className: "flex items-center gap-2" },
                  React.createElement('div', { className: "w-2 h-2 bg-slate-400 rounded-full animate-bounce" }),
                  React.createElement('div', { className: "w-2 h-2 bg-slate-400 rounded-full animate-bounce", style: { animationDelay: '100ms' } }),
                  React.createElement('div', { className: "w-2 h-2 bg-slate-400 rounded-full animate-bounce", style: { animationDelay: '200ms' } }),
                  React.createElement('span', { className: "text-slate-400 text-sm ml-2" }, "Hal is thinking...")
                )
              )
            ),

            React.createElement('div', { ref: messagesEndRef })
          ),

          // Input
          React.createElement('div', { className: "p-4 border-t border-slate-700" },
            React.createElement('div', { className: "flex items-center gap-2" },
              React.createElement('div', { className: "flex-1 relative" },
                React.createElement('input', {
                  type: "text",
                  value: inputMessage,
                  onChange: (e) => setInputMessage(e.target.value),
                  onKeyPress: (e) => e.key === 'Enter' && handleSendMessage(),
                  placeholder: "Ask Hal anything...",
                  disabled: isLoading,
                  className: "w-full px-4 py-2 pr-12 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed"
                })
              ),
              React.createElement('button', {
                onClick: () => handleSendMessage(),
                disabled: !inputMessage.trim() || isLoading,
                className: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
              },
                React.createElement(Send, { className: "w-4 h-4" })
              )
            ),
            usage && React.createElement('div', { className: "mt-2 text-xs text-slate-500" },
              `${usage.remaining > 0 ? `${usage.remaining} messages remaining this hour` : 'Rate limit reached'}`
            )
          )
        );
      };

      // Main Dashboard Component
      window.PremiumDealershipDashboard = () => {
        const [userTier, setUserTier] = React.useState(safeLocalStorage.getItem("tier") || "Level 1");
        const [selectedDealership, setSelectedDealership] = React.useState(safeLocalStorage.getItem("dealer") || "Toyota of Naples");
        const [selectedLocation, setSelectedLocation] = React.useState(safeLocalStorage.getItem("location") || "Naples, FL");
        const [dealershipUrl, setDealershipUrl] = React.useState(safeLocalStorage.getItem("url") || "https://toyotaofnaples.com");
        const [activeTab, setActiveTab] = React.useState(safeLocalStorage.getItem("tab") || "hal-assistant");
        const [loading, setLoading] = React.useState(false);
        const [lastRefresh, setLastRefresh] = React.useState(new Date());

        // Persist state changes
        React.useEffect(() => {
          safeLocalStorage.setItem("tier", userTier);
          safeLocalStorage.setItem("dealer", selectedDealership);
          safeLocalStorage.setItem("location", selectedLocation);
          safeLocalStorage.setItem("tab", activeTab);
        }, [userTier, selectedDealership, selectedLocation, activeTab]);

        const refresh = () => {
          setLoading(true);
          setTimeout(() => {
            setLastRefresh(new Date());
            setLoading(false);
          }, 900);
        };

        const baseTabs = [
          { id: "risk-assessment", label: "Risk Assessment", icon: AlertTriangle },
          { id: "ai-analysis", label: "AI Intelligence", icon: Brain },
          { id: "hal-assistant", label: "Hal Assistant", icon: MessageSquare },
          { id: "agentic-seo", label: "Agentic SEO", icon: Bot }
        ];

        const tabs = userTier === "Level 1"
          ? [...baseTabs, { id: "upgrades", label: "Upgrades", icon: Lock }]
          : baseTabs;

        return React.createElement('div', { className: "min-h-screen bg-slate-900 text-slate-100" },
          // Header
          React.createElement('header', { className: "bg-slate-900 border-b border-slate-700 shadow-lg sticky top-0 z-40" },
            React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" },
              React.createElement('div', { className: "flex justify-between items-center h-16" },
                React.createElement('div', { className: "flex items-center gap-4" },
                  React.createElement('div', { className: "w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg grid place-items-center font-bold" }, "dAI"),
                  React.createElement('div', null,
                    React.createElement('h1', { className: "text-xl font-bold" }, "dealershipAI"),
                    React.createElement('div', { className: "text-xs text-slate-400" }, "Algorithmic Trust Dashboard")
                  )
                ),
                React.createElement('div', { className: "flex items-center gap-3" },
                  React.createElement('select', {
                    value: userTier,
                    onChange: (e) => setUserTier(e.target.value),
                    className: "text-sm border border-slate-600 bg-slate-800 text-slate-200 rounded-lg px-3 py-2"
                  },
                    React.createElement('option', { value: "Level 1" }, "Level 1 (Free)"),
                    React.createElement('option', { value: "Level 2" }, "Level 2 ($599/mo)"),
                    React.createElement('option', { value: "Level 3" }, "Level 3 ($999/mo)")
                  ),
                  React.createElement('button', {
                    onClick: refresh,
                    disabled: loading,
                    className: "flex items-center gap-2 px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
                  },
                    React.createElement(RefreshCw, { className: `w-4 h-4 ${loading ? "animate-spin" : ""}` }),
                    React.createElement('span', null, "Refresh")
                  )
                )
              )
            )
          ),

          // Navigation
          React.createElement('nav', { className: "bg-slate-800 border-b border-slate-700" },
            React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 overflow-x-auto" },
              React.createElement('div', { className: "flex gap-1" },
                tabs.map((t) => {
                  const Icon = t.icon;
                  const isActive = activeTab === t.id;
                  return React.createElement('button', {
                    key: t.id,
                    onClick: () => setActiveTab(t.id),
                    className: `flex items-center gap-2 py-4 px-4 font-medium text-sm transition-colors rounded-t ${
                      isActive ? "border-b-2 border-blue-500 text-blue-400 bg-slate-700" : "text-slate-300 hover:text-slate-100 hover:bg-slate-700"
                    }`
                  },
                    React.createElement(Icon, { className: "w-4 h-4" }),
                    React.createElement('span', null, t.label)
                  );
                })
              )
            )
          ),

          // Main Content
          React.createElement('main', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 bg-slate-900" },
            React.createElement(Card, { className: "p-4 mb-6" },
              React.createElement('div', { className: "flex items-center justify-between flex-wrap gap-4" },
                React.createElement('div', { className: "flex items-center gap-4" },
                  React.createElement('div', null,
                    React.createElement('div', { className: "font-semibold" }, selectedDealership),
                    React.createElement('div', { className: "text-sm text-slate-400" }, selectedLocation)
                  )
                )
              )
            ),

            // HAL Assistant Tab
            activeTab === "hal-assistant" && React.createElement('div', { className: "space-y-8" },
              React.createElement(Card, { className: "h-[600px]" },
                React.createElement(HalAssistant, {
                  dealerId: "demo-dealer",
                  userTier: userTier === "Level 1" ? 1 : userTier === "Level 2" ? 2 : userTier === "Level 3" ? 3 : 1,
                  businessInfo: {
                    name: selectedDealership,
                    location: selectedLocation,
                    url: dealershipUrl,
                    specialties: "New and used vehicle sales, service, parts, and financing"
                  },
                  onUpgrade: () => setActiveTab("upgrades")
                })
              )
            ),

            // Other tabs placeholder
            activeTab !== "hal-assistant" && React.createElement(Card, { className: "p-8 text-center" },
              React.createElement('h3', { className: "text-lg font-semibold text-slate-200 mb-2" }, `${tabs.find(t => t.id === activeTab)?.label || 'Tab'} Content`),
              React.createElement('p', { className: "text-slate-400" }, "This tab content is coming soon in the full dashboard.")
            )
          )
        );
      };
    </script>

    <script>
      (function () {
        if (!window.PremiumDealershipDashboard) {
          console.error("PremiumDealershipDashboard is not defined on window.");
          return;
        }
        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(React.createElement(window.PremiumDealershipDashboard));
      })();
    </script>
  </body>
</html>