(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{42798:function(e,s,t){Promise.resolve().then(t.bind(t,3786))},3786:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return eM}});var a=t(20549),r=t(70743),l=t(63080),i=t(31976),n=t(36595),c=t(4452),o=t(56085),d=t(36590),x=t(68539),m=t(68119),h=t(56770);let u={radius:{md:"12px",lg:"16px"}};function g(e){let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"border ".concat(t),style:{borderColor:"#1f2937",background:"#0f172a",borderRadius:u.radius.lg,padding:16},children:s})}function p(e){let{title:s,value:t,sub:r,progress:l}=e;return(0,a.jsxs)(g,{children:[(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:s}),(0,a.jsx)("div",{className:"text-2xl font-semibold",children:t}),"number"==typeof l&&(0,a.jsx)("div",{className:"mt-2 h-2 bg-gray-800 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-[#0EA5E9] to-[#38BDF8]",style:{width:"".concat(Math.max(0,Math.min(100,l)),"%")}})}),r&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:r})]})}function b(e){let{children:s,className:t=""}=e;return(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-800 text-gray-300 border border-gray-700 ".concat(t),children:s})}var j=t(53673),f=t(5163),v=t(44643),y=t(36228),N=t(45920),w=t(15906),k=t(95749);let S={1:{name:"Starter",limits:{features:{voiceMinutes:30}}},2:{name:"Professional",limits:{features:{voiceMinutes:120}}},3:{name:"Enterprise",limits:{features:{voiceMinutes:500}}},4:{name:"Enterprise Plus",limits:{features:{voiceMinutes:2e3}}}};function C(e){let{dealerId:s="demo-dealer",userTier:t=1,businessInfo:l={},onUpgrade:i}=e,[n,c]=(0,r.useState)([{id:1,type:"assistant",content:"\uD83D\uDC4B Hi! I'm your AI Assistant. I can help you with customer inquiries, inventory questions, and dealership operations. What can I help you with today?",timestamp:new Date}]),[o,d]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)(!1),[g,p]=(0,r.useState)(null),[C,E]=(0,r.useState)({remaining:null,resetTime:null}),O=(0,r.useRef)(null),F=(0,r.useRef)(null),T=S[t]||S[1],P=t<4;(0,r.useEffect)(()=>{M()},[t]),(0,r.useEffect)(()=>{var e;null===(e=O.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[n]);let M=async()=>{try{let e=await fetch("/api/rate-limit/check?dealerId=".concat(s,"&tier=").concat(t));if(e.ok){let s=await e.json();E(s.usage),p(s.status)}}catch(e){console.error("Rate limit check failed:",e)}},R=async e=>{let a=e||o.trim();if(!a||x)return;if("exceeded"===g){c(e=>[...e,{id:Date.now(),type:"error",content:"Rate limit exceeded. Please wait before sending another message.",timestamp:new Date}]);return}let r={id:Date.now(),type:"user",content:a,timestamp:new Date};c(e=>[...e,r]),d(""),m(!0);try{let e=await fetch("/api/ai-assistant/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a,dealerId:s,userTier:t,businessInfo:l,conversationHistory:n.slice(-10)})});if(e.ok){let s=await e.json(),t={id:Date.now()+1,type:"assistant",content:s.message,timestamp:new Date,tokens:s.tokens,cost:s.cost,functions:s.functions};c(e=>[...e,t]),E(s.usage)}else throw Error("Failed to send message")}catch(e){c(e=>[...e,{id:Date.now()+1,type:"error",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date}])}finally{m(!1)}},Z=e=>{if("speechSynthesis"in window){let s=new SpeechSynthesisUtterance(e);s.rate=.9,s.pitch=1,window.speechSynthesis.speak(s)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full max-h-[600px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full grid place-items-center",children:"\uD83E\uDD16"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold text-slate-100 flex items-center gap-2",children:["AI Assistant",(0,a.jsx)(b,{children:T.name})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-400",children:[(null==C?void 0:C.remaining)||"?"," messages left"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["exceeded"===g&&(0,a.jsx)(j.Z,{className:"w-5 h-5 text-red-400"}),t<4&&P&&i&&(0,a.jsxs)("button",{onClick:i,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:[(0,a.jsx)(f.Z,{className:"w-3 h-3"}),"Upgrade"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg max-w-[80%] ".concat("user"===e.type?"bg-blue-600 text-white ml-auto":"error"===e.type?"bg-red-900/50 text-red-200 border border-red-700":"bg-slate-700 text-slate-100"),children:[(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),e.functions&&e.functions.length>0&&(0,a.jsx)("div",{className:"mt-2 pt-2 border-t border-slate-600",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3 text-slate-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-400",children:"Functions:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.functions.map((e,s)=>(0,a.jsx)(b,{children:e},s))})]})}),"assistant"===e.type&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-slate-400",children:e.timestamp.toLocaleTimeString()}),e.tokens&&(0,a.jsxs)(b,{children:[e.tokens," tokens"]}),e.cost&&(0,a.jsxs)(b,{children:["$",e.cost.toFixed(3)]})]}),(0,a.jsx)("button",{onClick:()=>Z(e.content),className:"p-1 text-slate-400 hover:text-slate-200 transition-colors",title:"Read aloud",children:(0,a.jsx)(y.Z,{className:"w-3 h-3"})})]})]},e.id)),x&&(0,a.jsx)("div",{className:"bg-slate-700 text-slate-100 p-3 rounded-lg max-w-[80%]",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full"}),"AI Assistant is thinking..."]})}),(0,a.jsx)("div",{ref:O})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-slate-700",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&R(),placeholder:"exceeded"===g?"Rate limit exceeded...":"Ask me anything...",disabled:x||"exceeded"===g,className:"w-full px-3 py-2 pr-10 bg-slate-700 text-slate-100 border border-slate-600 rounded-lg focus:outline-none focus:border-blue-500 disabled:opacity-50"}),h&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})})]}),(0,a.jsx)("button",{onClick:h?()=>{F.current&&F.current.stop()}:()=>{if("webkitSpeechRecognition"in window){let e=new window.webkitSpeechRecognition;e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onstart=()=>u(!0),e.onresult=e=>{d(e.results[0][0].transcript),u(!1)},e.onerror=()=>u(!1),e.onend=()=>u(!1),e.start(),F.current=e}},disabled:x||"exceeded"===g,className:"p-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg hover:bg-slate-600 disabled:opacity-50 transition-colors",title:h?"Stop listening":"Start voice input",children:h?(0,a.jsx)(N.Z,{className:"w-5 h-5"}):(0,a.jsx)(w.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>R(),disabled:!o.trim()||x||"exceeded"===g,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",title:"Send message",children:(0,a.jsx)(k.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-500 flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["Tier ",t,": ",T.name]}),C.resetTime&&(0,a.jsxs)("span",{children:["Resets: ",C.resetTime.toLocaleTimeString()]})]})]})]})}var E=t(66056),O=t(8832),F=t(2107),T=t(65588),P=t(16842),M=t(62867),R=t(69661),Z=t(92865),I=t(34137),L=t(31053),A=t(3794),D=t(80884),B=t(3357),_=t(91330);function W(e){let{dealerId:s}=e,[t,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[d,x]=(0,r.useState)(null),m=async()=>{try{o(!0);let e=await fetch("/api/dashboard/enhanced?dealerId=".concat(s,"&location=Naples, FL"));if(e.ok){let s=await e.json();l(s),x(new Date)}}catch(e){console.error("Failed to fetch enhanced dashboard data:",e)}finally{o(!1)}};if((0,r.useEffect)(()=>{m()},[s]),c&&!t)return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-2 bg-gray-700 rounded w-full"})]})},e))})});if(!t)return(0,a.jsx)("div",{children:"No data available"});let h=[{period:"Month 1",SEO:t.charts.scoreProgression.seo[0],AEO:t.charts.scoreProgression.aeo[0],GEO:t.charts.scoreProgression.geo[0]},{period:"Month 2",SEO:t.charts.scoreProgression.seo[1],AEO:t.charts.scoreProgression.aeo[1],GEO:t.charts.scoreProgression.geo[1]},{period:"Month 3",SEO:t.charts.scoreProgression.seo[2],AEO:t.charts.scoreProgression.aeo[2],GEO:t.charts.scoreProgression.geo[2]},{period:"Current",SEO:t.charts.scoreProgression.seo[3],AEO:t.charts.scoreProgression.aeo[3],GEO:t.charts.scoreProgression.geo[3]}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-100",children:"Enhanced Dashboard"}),(0,a.jsx)(b,{className:"bg-purple-800 text-purple-200 border-purple-700",children:t.metadata.algorithm}),d&&(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["Updated: ",d.toLocaleTimeString()]})]}),(0,a.jsxs)("button",{onClick:m,disabled:c,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[(0,a.jsx)(B.Z,{className:"w-4 h-4 ".concat(c?"animate-spin":"")}),"Refresh"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,a.jsx)(p,{title:"Revenue at Risk",value:t.metrics.revenueAtRisk,sub:"".concat(t.insights.estimatedImpact.annual.toLocaleString(),"/year potential"),progress:100-t.scores.aeo.overall}),(0,a.jsx)(p,{title:"AI Visibility",value:t.metrics.aiVisibility,sub:"Answer Engine Optimization",progress:t.scores.aeo.overall}),(0,a.jsx)(p,{title:"Website Health",value:t.metrics.websiteHealth,sub:"Technical SEO Foundation",progress:t.scores.seo.overall}),(0,a.jsx)(p,{title:"Authority Score",value:t.metrics.authorityScore,sub:"Market position: ".concat(t.competitive.marketPosition),progress:t.metrics.authorityScore})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-100",children:"Risk Assessment"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"HIGH":return(0,a.jsx)(L.Z,{className:"w-4 h-4 text-red-400"});case"MEDIUM":return(0,a.jsx)(A.Z,{className:"w-4 h-4 text-yellow-400"});case"LOW":return(0,a.jsx)(D.Z,{className:"w-4 h-4 text-green-400"});default:return null}})(t.insights.riskLevel),(0,a.jsxs)("span",{className:"text-lg font-medium ".concat((e=>{switch(e){case"HIGH":return"text-red-400";case"MEDIUM":return"text-yellow-400";case"LOW":return"text-green-400";default:return"text-gray-400"}})(t.insights.riskLevel)),children:[t.insights.riskLevel," RISK"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Top Strength:"}),(0,a.jsx)("span",{className:"ml-2 text-green-400",children:t.insights.topStrength})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Primary Weakness:"}),(0,a.jsx)("span",{className:"ml-2 text-red-400",children:t.insights.primaryWeakness})]})]})]})}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-100",children:"Quick Wins"}),(0,a.jsx)("div",{className:"space-y-2",children:t.insights.quickWins.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-gray-300",children:e})]},s))})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-100",children:"SEO Score"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-blue-400",children:t.scores.seo.overall})]}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(t.scores.seo.breakdown).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400 capitalize",children:s}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-20 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-blue-400 transition-all duration-300",style:{width:"".concat(t,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-medium w-8",children:t})]})]},s)})})]})}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-purple-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-100",children:"AEO Score"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-purple-400",children:t.scores.aeo.overall})]}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(t.scores.aeo.breakdown).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400 capitalize",children:"faqSchema"===s?"FAQ Schema":s}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-20 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-purple-400 transition-all duration-300",style:{width:"".concat(t,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-medium w-8",children:t})]})]},s)})})]})}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"w-5 h-5 text-green-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-100",children:"GEO Score"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-green-400",children:t.scores.geo.overall})]}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(t.scores.geo.breakdown).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400 capitalize",children:"schemaMatch"===s?"Schema Match":s}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-20 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-green-400 transition-all duration-300",style:{width:"".concat(t,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-medium w-8",children:t})]})]},s)})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(g,{children:[(0,a.jsx)("div",{className:"text-sm text-gray-300 mb-3",children:"Score Progression (SEO/AEO/GEO)"}),(0,a.jsx)(E.h,{width:"100%",height:220,children:(0,a.jsxs)(O.w,{data:h,margin:{top:8,right:8,left:0,bottom:0},children:[(0,a.jsx)(F.q,{strokeDasharray:"3 3"}),(0,a.jsx)(T.K,{dataKey:"period"}),(0,a.jsx)(P.B,{}),(0,a.jsx)(M.u,{}),(0,a.jsx)(R.x,{type:"monotone",dataKey:"SEO",stroke:"#3B82F6",strokeWidth:2,dot:!1}),(0,a.jsx)(R.x,{type:"monotone",dataKey:"AEO",stroke:"#A855F7",strokeWidth:2,dot:!1}),(0,a.jsx)(R.x,{type:"monotone",dataKey:"GEO",stroke:"#10B981",strokeWidth:2,dot:!1})]})})]}),(0,a.jsxs)(g,{children:[(0,a.jsx)("div",{className:"text-sm text-gray-300 mb-3",children:"Weekly Revenue Trend"}),(0,a.jsx)(E.h,{width:"100%",height:220,children:(0,a.jsxs)(Z.v,{data:t.charts.weeklyRevenue,margin:{top:8,right:8,left:0,bottom:0},children:[(0,a.jsx)(F.q,{strokeDasharray:"3 3"}),(0,a.jsx)(T.K,{dataKey:"w"}),(0,a.jsx)(P.B,{}),(0,a.jsx)(M.u,{formatter:e=>["$".concat(e.toLocaleString()),"Revenue"]}),(0,a.jsx)(I.$,{dataKey:"rev",fill:"#0EA5E9"})]})})]})]}),(0,a.jsxs)(g,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-100 mb-4",children:"Priority Recommendations"}),(0,a.jsx)("div",{className:"space-y-3",children:t.recommendations.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-700/50 rounded-lg",children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs rounded font-medium ".concat("HIGH"===e.priority?"bg-red-800 text-red-200":"MEDIUM"===e.priority?"bg-yellow-800 text-yellow-200":"bg-green-800 text-green-200"),children:e.priority}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-100",children:e.action}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,a.jsxs)("span",{className:"mr-4",children:["Impact: ",e.impact]}),(0,a.jsxs)("span",{children:["Effort: ",e.effort]})]})]})]},s))})]}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{children:["Confidence: ",t.metadata.confidence,"%"]}),(0,a.jsxs)("span",{children:["Sources: ",t.metadata.sources.length," integrated"]})]}),(0,a.jsxs)("span",{children:["Last Analysis: ",new Date(t.metadata.lastUpdated).toLocaleString()]})]})})]})}function G(e){let{dealerId:s}=e;return(0,a.jsx)(W,{dealerId:s})}function q(e){let{dealerId:s}=e;return(0,a.jsxs)(g,{children:[(0,a.jsxs)("div",{className:"text-sm font-semibold mb-3",children:["AI Platform Rankings — ",s]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left border-b",children:[(0,a.jsx)("th",{className:"py-2 pr-4",children:"Platform"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Visible"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Visibility"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Latency"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Trend"})]})}),(0,a.jsx)("tbody",{children:[{platform:"ChatGPT",visible:!0,visibility:91,latencyMs:620,trend:"+2%"},{platform:"Claude",visible:!0,visibility:88,latencyMs:540,trend:"+1%"},{platform:"Perplexity",visible:!1,visibility:48,latencyMs:700,trend:"–"}].map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0",children:[(0,a.jsx)("td",{className:"py-2 pr-4",children:e.platform}),(0,a.jsx)("td",{className:"py-2 pr-4",children:e.visible?"yes":"no"}),(0,a.jsxs)("td",{className:"py-2 pr-4",children:[e.visibility,"%"]}),(0,a.jsxs)("td",{className:"py-2 pr-4",children:[e.latencyMs," ms"]}),(0,a.jsx)("td",{className:"py-2 pr-4",children:e.trend})]},e.platform))})]})})]})}function z(e){let{dealerId:s}=e,t=[{intent:"oil change naples fl",included:!0,lastSeen:new Date().toISOString()},{intent:"toyota service naples",included:!1,lastSeen:new Date().toISOString()}],r=t.filter(e=>e.included).length;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-6 text-sm",children:[(0,a.jsxs)("div",{children:["Dealer: ",(0,a.jsx)("b",{children:s})]}),(0,a.jsxs)("div",{children:["Inclusion Rate: ",(0,a.jsxs)("b",{children:[Math.round(r/t.length*100),"%"]})," (",r,"/",t.length,")"]}),(0,a.jsxs)("div",{children:["Sampled: ",new Date().toLocaleString()]})]})}),(0,a.jsxs)(g,{children:[(0,a.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Intents"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left border-b",children:[(0,a.jsx)("th",{className:"py-2 pr-4",children:"Intent"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Included"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Last Seen"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0",children:[(0,a.jsx)("td",{className:"py-2 pr-4",children:e.intent}),(0,a.jsx)("td",{className:"py-2 pr-4",children:e.included?"yes":"no"}),(0,a.jsx)("td",{className:"py-2 pr-4",children:new Date(e.lastSeen).toLocaleString()})]},e.intent))})]})})]})]})}function U(e){let{dealerId:s}=e,t={total:1243,last7d:92},r={pos:68,neu:22,neg:10};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsx)(p,{title:"Total Mentions",value:t.total}),(0,a.jsx)(p,{title:"Mentions (7d)",value:t.last7d}),(0,a.jsx)(p,{title:"Pos/Neu/Neg",value:"".concat(r.pos,"/").concat(r.neu,"/").concat(r.neg)})]}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"text-sm",children:["Live UGC feed stub for ",(0,a.jsx)("b",{children:s}),". Wire platforms later."]})})]})}function J(e){let{dealerId:s}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,a.jsx)(p,{title:"Schema Coverage",value:"".concat(73,"%"),progress:73}),(0,a.jsx)(p,{title:"Critical Errors",value:7}),(0,a.jsx)(p,{title:"Validation Score",value:"".concat(8.2,"/10"),progress:Math.round(82)}),(0,a.jsx)(p,{title:"Rich Results",value:"".concat(94,"%"),progress:94})]}),(0,a.jsx)(g,{children:(0,a.jsx)("div",{className:"text-sm",children:"Generate JSON-LD Fix → wire to auto-fix task queue later."})})]})}var K=t(95109),V=t(43155),H=t(15334),Q=t(39520),$=t(46263),X=t(27362),Y=t(92070),ee=t(79703),es=t(76302),et=t(86445),ea=t(40294),er=t(82233),el=t(79986),ei=t(64823),en=t(49340),ec=t(57989),eo=t(35053),ed=t(7316),ex=t(21735),em=t(75033),eh=t(3254),eu=t(27139),eg=t(58935),ep=t(64490),eb=t(10325),ej=t(56043);function ef(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[s,t]=(0,r.useState)({prompts:[],stats:null,loading:!1,error:null,validationErrors:[]}),a=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(e=>({...e,loading:!0,error:null}));try{let s=new URLSearchParams;e.category&&s.append("category",e.category),e.intent&&s.append("intent",e.intent),e.language&&s.append("language",e.language),e.tags&&s.append("tags",e.tags),e.validate&&s.append("validate","true");let a=await fetch("/api/prompts?".concat(s.toString()));if(!a.ok)throw Error("Failed to fetch prompts: ".concat(a.statusText));let r=await a.json();t(e=>({...e,prompts:r.prompts||[],stats:r.stats||null,validationErrors:r.validation_errors||[],loading:!1}))}catch(e){t(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch prompts",loading:!1}))}},[]);(0,r.useEffect)(()=>{a(e)},[a,e.category,e.intent,e.language,e.tags,e.validate]);let l=(0,r.useCallback)(s=>a(s||e),[a,e]);return{...s,refetch:l}}function ev(){let[e,s]=(0,r.useState)([]),t=(0,r.useCallback)(e=>{var t;let r=Math.random().toString(36).substr(2,9),l={...e,id:r,timestamp:Date.now(),duration:null!==(t=e.duration)&&void 0!==t?t:5e3};return s(e=>[...e,l]),!e.persistent&&l.duration>0&&setTimeout(()=>{a(r)},l.duration),r},[]),a=(0,r.useCallback)(e=>{s(s=>s.filter(s=>s.id!==e))},[]),l=(0,r.useCallback)(()=>{s([])},[]),i=(0,r.useCallback)((e,s,a)=>t({...a,title:e,message:s,type:"success"}),[t]),n=(0,r.useCallback)((e,s,a)=>t({...a,title:e,message:s,type:"error",duration:0,persistent:!0}),[t]),c=(0,r.useCallback)((e,s,a)=>t({...a,title:e,message:s,type:"warning"}),[t]),o=(0,r.useCallback)((e,s,a)=>t({...a,title:e,message:s,type:"info"}),[t]);return{toasts:e,addToast:t,removeToast:a,clearAll:l,success:i,error:n,warning:c,info:o}}function ey(e){let{onToggle:s,className:t=""}=e,[l,i]=(0,r.useState)(!1),[n,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("dealershipai-admin-mode");if(e){let t=JSON.parse(e);i(t),null==s||s(t)}},[s]);let o=async()=>{c(!0);try{let e=!l;localStorage.setItem("dealershipai-admin-mode",JSON.stringify(e)),i(e),null==s||s(e)}catch(e){console.error("Failed to toggle admin mode:",e),i(!l)}finally{c(!1)}};return(0,a.jsxs)("div",{className:"flex items-center space-x-3 ".concat(t),children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat(l?"text-red-700":"text-gray-700"),children:l?"Admin Mode":"User Mode"}),(0,a.jsx)("button",{type:"button",onClick:o,disabled:n,className:"".concat(l?"bg-red-600":"bg-gray-200"," ").concat(n?"opacity-50 cursor-not-allowed":"cursor-pointer"," relative inline-flex h-6 w-11 flex-shrink-0 rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"),role:"switch","aria-checked":l,"aria-label":"Toggle admin mode",children:(0,a.jsx)("span",{"aria-hidden":"true",className:"".concat(l?"translate-x-5":"translate-x-0"," pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})}),l&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"text-xs text-red-600 font-medium",children:"DEBUG"})]})]})}function eN(e){let{toast:s,onRemove:t}=e;return(0,r.useEffect)(()=>{if(!s.persistent&&s.duration>0){let e=setTimeout(()=>t(s.id),s.duration);return()=>clearTimeout(e)}},[s.id,s.duration,s.persistent,t]),(0,a.jsx)("div",{className:"p-4 border rounded-lg shadow-sm ".concat((()=>{switch(s.type){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}})()," transition-all duration-300 ease-in-out"),children:(0,a.jsxs)("div",{className:"flex",children:[(()=>{switch(s.type){case"success":return(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})});case"error":return(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-red-100 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})});case"warning":return(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})});case"info":return(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})})}})(),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:s.title}),s.message&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-700",children:s.message}),s.action&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("button",{className:"text-sm font-medium text-blue-600 hover:text-blue-500",onClick:s.action.onClick,children:s.action.label})})]}),(0,a.jsx)("div",{className:"ml-4 flex-shrink-0 flex",children:(0,a.jsx)("button",{className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600",onClick:()=>t(s.id),children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})}function ew(){let{toasts:e,removeToast:s}=ev();return 0===e.length?null:(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 w-96",children:e.map(e=>(0,a.jsx)(eN,{toast:e,onRemove:s},e.id))})}function ek(e){let{queueName:s="default"}=e,[t,l]=(0,r.useState)(!1),{metrics:i,loading:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,[t,a]=(0,r.useState)({metrics:null,loading:!0,error:null}),l=(0,r.useCallback)(async()=>{try{let s=await fetch("/api/queue/metrics?queue=".concat(e));if(!s.ok)throw Error("Failed to fetch metrics: ".concat(s.statusText));let t=await s.json();a(e=>({...e,metrics:t.metrics,loading:!1,error:null}))}catch(e){a(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch metrics",loading:!1}))}},[e]);return(0,r.useEffect)(()=>{if(l(),s>0){let e=setInterval(l,s);return()=>clearInterval(e)}},[l,s]),{...t,refetch:l}}(s,5e3),{jobs:c,loading:o,retryJob:d,removeJob:x}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[t,a]=(0,r.useState)({jobs:[],totalCount:0,loading:!0,error:null}),l=(0,r.useCallback)(async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(e=>({...e,loading:!0,error:null}));try{var t,r;let l=new URLSearchParams({queue:e,...s,limit:(null===(t=s.limit)||void 0===t?void 0:t.toString())||"50",offset:(null===(r=s.offset)||void 0===r?void 0:r.toString())||"0"});s.state&&l.append("state",s.state),s.search&&l.append("search",s.search);let i=await fetch("/api/queue/jobs?".concat(l.toString()));if(!i.ok)throw Error("Failed to fetch jobs: ".concat(i.statusText));let n=await i.json();a(e=>({...e,jobs:n.jobs||[],totalCount:n.total_count||0,loading:!1}))}catch(e){a(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch jobs",loading:!1}))}},[e]);(0,r.useEffect)(()=>{l(s)},[l,JSON.stringify(s)]);let i=(0,r.useCallback)(async e=>{try{let s=await fetch("/api/queue/job/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"retry"})});if(!s.ok)throw Error("Failed to retry job: ".concat(s.statusText));return await l(),!0}catch(e){return console.error("Failed to retry job:",e),!1}},[l]),n=(0,r.useCallback)(async e=>{try{let s=await fetch("/api/queue/job/".concat(e),{method:"DELETE"});if(!s.ok)throw Error("Failed to remove job: ".concat(s.statusText));return await l(),!0}catch(e){return console.error("Failed to remove job:",e),!1}},[l]);return{...t,refetch:l,retryJob:i,removeJob:n}}(s,{limit:10}),{control:m,pauseQueue:h,resumeQueue:u,drainQueue:g,actionLoading:p}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",[s,t]=(0,r.useState)({control:null,loading:!0,error:null,actionLoading:!1}),a=(0,r.useCallback)(async()=>{try{let s=await fetch("/api/queue/control?queue=".concat(e));if(!s.ok)throw Error("Failed to fetch control status: ".concat(s.statusText));let a=await s.json();t(e=>({...e,control:a,loading:!1,error:null}))}catch(e){t(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch control status",loading:!1}))}},[e]);(0,r.useEffect)(()=>{a()},[a]);let l=(0,r.useCallback)(async s=>{t(e=>({...e,actionLoading:!0,error:null}));try{let r=await fetch("/api/queue/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queue:e,action:s})});if(!r.ok)throw Error("Failed to execute ".concat(s,": ").concat(r.statusText));return await a(),t(e=>({...e,actionLoading:!1})),!0}catch(e){return t(t=>({...t,error:e instanceof Error?e.message:"Failed to execute ".concat(s),actionLoading:!1})),!1}},[e,a]),i=(0,r.useCallback)(async(s,a)=>{t(e=>({...e,actionLoading:!0,error:null}));try{let r=await fetch("/api/queue/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queue:e,action:s,job_ids:a})});if(!r.ok)throw Error("Failed to execute bulk ".concat(s,": ").concat(r.statusText));return t(e=>({...e,actionLoading:!1})),!0}catch(e){return t(t=>({...t,error:e instanceof Error?e.message:"Failed to execute bulk ".concat(s),actionLoading:!1})),!1}},[e]);return{...s,refetch:a,pauseQueue:()=>l("pause"),resumeQueue:()=>l("resume"),drainQueue:()=>l("drain"),obliterateQueue:()=>l("obliterate"),bulkRetry:e=>i("retry",e),bulkRemove:e=>i("remove",e)}}(s),b=e=>{switch(e){case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"waiting":default:return"bg-gray-100 text-gray-800";case"delayed":return"bg-yellow-100 text-yellow-800"}};return n?(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})}):(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>l(!t),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-400 animate-pulse"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Queue: ",s]}),i&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[i.active," active, ",i.waiting," waiting, ",i.failed," failed"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[m&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"draining":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(m.status)),children:m.status}),(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 ".concat(t?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),t&&(0,a.jsxs)("div",{className:"border-t border-gray-200",children:[(0,a.jsx)("div",{className:"p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==m?void 0:m.can_pause)&&"paused"!==m.status&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),h()},disabled:p,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Pause"}),(null==m?void 0:m.can_resume)&&"paused"===m.status&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),u()},disabled:p,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Resume"}),(null==m?void 0:m.can_drain)&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),g()},disabled:p,className:"inline-flex items-center px-2.5 py-1.5 border border-orange-300 shadow-sm text-xs font-medium rounded text-orange-700 bg-orange-50 hover:bg-orange-100 disabled:opacity-50",children:"Drain"})]})}),i&&(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:i.total}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Total Jobs"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:i.throughput.per_minute}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Per Minute"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-green-600",children:[Math.round(i.performance.success_rate),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Success Rate"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Recent Jobs"}),o?(0,a.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"animate-pulse h-8 bg-gray-200 rounded"},s))}):c.length>0?(0,a.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:c.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(b(e.state)),children:e.state}),(0,a.jsx)("span",{className:"truncate",children:e.name})]}),"failed"===e.state&&(0,a.jsxs)("div",{className:"flex space-x-1 ml-2",children:[(0,a.jsx)("button",{onClick:()=>d(e.id),className:"text-blue-600 hover:text-blue-800",title:"Retry",children:"↻"}),(0,a.jsx)("button",{onClick:()=>x(e.id),className:"text-red-600 hover:text-red-800",title:"Remove",children:"✕"})]})]},e.id))}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No jobs found"})]})]})]})]})}function eS(e){var s;let{isOpen:t,onClose:l,promptId:i}=e,[n,c]=(0,r.useState)(i||""),[o,d]=(0,r.useState)({}),[x,m]=(0,r.useState)("preview"),{prompts:h,loading:u}=ef(),{preview:g,previewPrompt:p,loading:b}=function(){let[e,s]=(0,r.useState)({loading:!1,error:null,preview:null}),t=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(e=>({...e,loading:!0,error:null}));try{let a=await fetch("/api/prompts/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_id:e,variables:t})});if(!a.ok)throw Error("Failed to preview prompt: ".concat(a.statusText));let r=await a.json();return s(e=>({...e,preview:r,loading:!1})),r}catch(t){let e=t instanceof Error?t.message:"Failed to preview prompt";throw s(s=>({...s,error:e,loading:!1})),t}},[]);return{...e,previewPrompt:t}}(),{expanded:j,expandPrompt:f,loading:v}=function(){let[e,s]=(0,r.useState)({loading:!1,error:null,expanded:null}),t=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(e=>({...e,loading:!0,error:null}));try{let a=await fetch("/api/prompts/expand",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_id:e,variables:t})});if(!a.ok)throw Error("Failed to expand prompt: ".concat(a.statusText));let r=await a.json();return s(e=>({...e,expanded:r,loading:!1})),r}catch(t){let e=t instanceof Error?t.message:"Failed to expand prompt";throw s(s=>({...s,error:e,loading:!1})),t}},[]);return{...e,expandPrompt:t}}(),{result:y,runPrompt:N,loading:w}=function(){let[e,s]=(0,r.useState)({loading:!1,error:null,result:null}),t=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s(e=>({...e,loading:!0,error:null}));try{let r=await fetch("/api/prompts/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_id:e,variables:t,...a})});if(!r.ok)throw Error("Failed to run prompt: ".concat(r.statusText));let l=await r.json();return s(e=>({...e,result:l,loading:!1})),l}catch(t){let e=t instanceof Error?t.message:"Failed to run prompt";throw s(s=>({...s,error:e,loading:!1})),t}},[]);return{...e,runPrompt:t}}(),k=h.find(e=>e.id===n);(0,r.useEffect)(()=>{i&&c(i)},[i]),(0,r.useEffect)(()=>{if(k){let e={};k.variables.forEach(s=>{void 0!==s.default&&(e[s.name]=s.default)}),d(e)}},[k]);let S=(e,s)=>{d(t=>({...t,[e]:s}))};return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-hidden","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:l}),(0,a.jsx)("div",{className:"fixed inset-y-0 right-0 pl-10 max-w-full flex",children:(0,a.jsx)("div",{className:"w-screen max-w-2xl",children:(0,a.jsxs)("div",{className:"h-full flex flex-col bg-white shadow-xl overflow-y-scroll",children:[(0,a.jsx)("div",{className:"px-4 py-6 bg-gray-50 sm:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",id:"slide-over-title",children:"Prompt Preview"}),(0,a.jsx)("div",{className:"ml-3 h-7 flex items-center",children:(0,a.jsxs)("button",{type:"button",className:"bg-gray-50 rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500",onClick:l,children:[(0,a.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,a.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 px-4 py-6 sm:px-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"prompt-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Prompt"}),(0,a.jsxs)("select",{id:"prompt-select",value:n,onChange:e=>c(e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[(0,a.jsx)("option",{value:"",children:"Select a prompt..."}),h.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.title," (",e.category,")"]},e.id))]})]}),k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:k.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:k.category}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:k.intent}),k.tags.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e},e))]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Language: ",k.language," | Variables: ",k.variables.length]})]}),k.variables.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Variables"}),(0,a.jsx)("div",{className:"space-y-4",children:k.variables.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.name,e.required&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:e.description}),"boolean"===e.type?(0,a.jsxs)("select",{value:o[e.name]||"",onChange:s=>S(e.name,"true"===s.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[(0,a.jsx)("option",{value:"false",children:"False"}),(0,a.jsx)("option",{value:"true",children:"True"})]}):"number"===e.type?(0,a.jsx)("input",{type:"number",value:o[e.name]||"",onChange:s=>S(e.name,parseFloat(s.target.value)||0),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"}):(0,a.jsx)("textarea",{value:o[e.name]||"",onChange:s=>S(e.name,s.target.value),rows:2,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]},e.name))})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:["preview","expand","run"].map(e=>(0,a.jsx)("button",{onClick:()=>m(e),className:"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ".concat(x===e?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,a.jsxs)("div",{children:["preview"===x&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Preview"}),(0,a.jsx)("button",{onClick:()=>{n&&p(n,o)},disabled:b,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:b?"Loading...":"Preview"})]}),g&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:g.rendered_prompt||"No preview available"})})]}),"expand"===x&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Expand"}),(0,a.jsx)("button",{onClick:()=>{n&&f(n,o)},disabled:v,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:v?"Loading...":"Expand"})]}),j&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:j.expanded_prompt||"No expanded content available"}),j.metadata&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"Metadata"}),(0,a.jsx)("pre",{className:"text-xs text-gray-600",children:JSON.stringify(j.metadata,null,2)})]})]})]}),"run"===x&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Run"}),(0,a.jsx)("button",{onClick:()=>{n&&N(n,o)},disabled:w,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:w?"Running...":"Run Prompt"})]}),y&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Response"}),(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:y.response||"No response available"})]}),y.metadata&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-blue-900 mb-2",children:"Metadata"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Engine:"})," ",y.metadata.engine]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Model:"})," ",y.metadata.model]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Tokens:"})," ",y.metadata.tokens_used]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Cost:"})," $",null===(s=y.metadata.cost)||void 0===s?void 0:s.toFixed(4)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Latency:"})," ",y.metadata.latency_ms,"ms"]})]})]})]})]})]})]})]})]})})})]})}):null}let eC=e=>{let{title:s,value:t,change:r,trend:l="up",icon:i,color:n="blue"}=e;return(0,a.jsx)("div",{className:"rounded-xl border ".concat({blue:"border-blue-500 bg-blue-500/10",green:"border-green-500 bg-green-500/10",purple:"border-purple-500 bg-purple-500/10",orange:"border-orange-500 bg-orange-500/10",red:"border-red-500 bg-red-500/10"}[n]," p-6 backdrop-blur-sm"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-400",children:s}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:t}),void 0!==r&&(0,a.jsxs)("div",{className:"flex items-center mt-2 ".concat("up"===l?"text-green-400":"text-red-400"),children:["up"===l?(0,a.jsx)(el.Z,{className:"w-4 h-4"}):(0,a.jsx)(ei.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[Math.abs(r),"%"]})]})]}),(0,a.jsx)(i,{className:"w-8 h-8 ".concat("blue"===n?"text-blue-400":"green"===n?"text-green-400":"purple"===n?"text-purple-400":"orange"===n?"text-orange-400":"text-red-400")})]})})},eE=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-800 text-gray-300 border border-gray-700 ".concat(t),children:s})};function eO(){let[e,s]=(0,r.useState)("overview"),[t,l]=(0,r.useState)({seo:0,aeo:0,geo:0}),[i,n]=(0,r.useState)(!0),[c]=(0,r.useState)("DEMO_DEALER_001"),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(),{isAdmin:h}=function(){let[e,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=localStorage.getItem("dealershipai-admin-mode");e&&s(JSON.parse(e));let t=e=>{"dealershipai-admin-mode"===e.key&&e.newValue&&s(JSON.parse(e.newValue))};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),{isAdmin:e,toggleAdmin:t=>{let a=void 0!==t?t:!e;localStorage.setItem("dealershipai-admin-mode",JSON.stringify(a)),s(a)}}}(),u=ev(),{prompts:g,loading:p,stats:b}=ef({validate:!0}),{data:j}=function(e){let[s,t]=(0,r.useState)({data:null,loading:!0,error:null}),a=(0,r.useCallback)(async()=>{t(e=>({...e,loading:!0,error:null}));try{let s=new URLSearchParams;e&&s.append("dealer_id",e);let a=await fetch("/api/visibility?".concat(s.toString()));if(!a.ok)throw Error("Failed to fetch visibility data: ".concat(a.statusText));let r=await a.json();t(e=>({...e,data:r,loading:!1}))}catch(e){t(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch visibility data",loading:!1}))}},[e]);return(0,r.useEffect)(()=>{a()},[a]),{...s,refetch:a}}(c),{history:f}=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,[t,a]=(0,r.useState)({history:[],loading:!0,error:null}),l=(0,r.useCallback)(async()=>{a(e=>({...e,loading:!0,error:null}));try{let t=new URLSearchParams({days:s.toString()});e&&t.append("dealer_id",e);let r=await fetch("/api/visibility/history?".concat(t.toString()));if(!r.ok)throw Error("Failed to fetch visibility history: ".concat(r.statusText));let l=await r.json();a(e=>({...e,history:l.history||[],loading:!1}))}catch(e){a(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch visibility history",loading:!1}))}},[e,s]);return(0,r.useEffect)(()=>{l()},[l]),{...t,refetch:l}}(c,30),{validateURLs:y}=function(){let[e,s]=(0,r.useState)({results:[],summary:null,loading:!1,error:null}),t=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(e=>({...e,loading:!0,error:null}));try{let a=await fetch("/api/schema/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:e,...t})});if(!a.ok)throw Error("Failed to validate schemas: ".concat(a.statusText));let r=await a.json();return s(e=>({...e,results:r.validation_results||[],summary:r.summary||null,loading:!1})),r}catch(t){let e=t instanceof Error?t.message:"Failed to validate schemas";throw s(s=>({...s,error:e,loading:!1})),t}},[]),a=(0,r.useCallback)(()=>{s({results:[],summary:null,loading:!1,error:null})},[]);return{...e,validateURLs:t,clearResults:a}}(),{tests:N,summary:w}=function(){let[e,s]=(0,r.useState)({tests:[],summary:null,loading:!0,error:null}),t=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(e=>({...e,loading:!0,error:null}));try{let t=new URLSearchParams;e.status&&t.append("status",e.status),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());let a=await fetch("/api/batch/tests?".concat(t.toString()));if(!a.ok)throw Error("Failed to fetch batch tests: ".concat(a.statusText));let r=await a.json();s(e=>({...e,tests:r.tests||[],summary:r.summary||null,loading:!1}))}catch(e){s(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch batch tests",loading:!1}))}},[]),a=(0,r.useCallback)(async e=>{try{let s=await fetch("/api/batch/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("Failed to create batch test: ".concat(s.statusText));let a=await s.json();return await t(),a}catch(e){throw console.error("Failed to create batch test:",e),e}},[t]),l=(0,r.useCallback)(async e=>{try{let s=await fetch("/api/batch/run/".concat(e),{method:"POST"});if(!s.ok)throw Error("Failed to run batch test: ".concat(s.statusText));let a=await s.json();return await t(),a}catch(e){throw console.error("Failed to run batch test:",e),e}},[t]),i=(0,r.useCallback)(async e=>{try{let s=await fetch("/api/batch/cancel/".concat(e),{method:"POST"});if(!s.ok)throw Error("Failed to cancel batch test: ".concat(s.statusText));return await t(),!0}catch(e){return console.error("Failed to cancel batch test:",e),!1}},[t]),n=(0,r.useCallback)(async e=>{try{let s=await fetch("/api/batch/tests/".concat(e),{method:"DELETE"});if(!s.ok)throw Error("Failed to delete batch test: ".concat(s.statusText));return await t(),!0}catch(e){return console.error("Failed to delete batch test:",e),!1}},[t]);return{...e,refetch:t,createTest:a,runTest:l,cancelTest:i,deleteTest:n}}(),k=(0,r.useMemo)(()=>[{name:"Jan",sales:45e3,leads:320,visits:1240},{name:"Feb",sales:52e3,leads:380,visits:1350},{name:"Mar",sales:48e3,leads:340,visits:1180},{name:"Apr",sales:61e3,leads:420,visits:1580},{name:"May",sales:55e3,leads:390,visits:1420},{name:"Jun",sales:67e3,leads:450,visits:1680}],[]),S=(0,r.useMemo)(()=>[{name:"New",value:45,color:"#3B82F6"},{name:"Used",value:120,color:"#10B981"},{name:"Certified",value:35,color:"#8B5CF6"},{name:"Trade-ins",value:28,color:"#F59E0B"}],[]),C=(0,r.useMemo)(()=>[{name:"Mon",seo:85,aeo:72,geo:68,traffic:145},{name:"Tue",seo:87,aeo:75,geo:71,traffic:152},{name:"Wed",seo:82,aeo:70,geo:65,traffic:138},{name:"Thu",seo:90,aeo:78,geo:74,traffic:168},{name:"Fri",seo:88,aeo:76,geo:72,traffic:155},{name:"Sat",seo:85,aeo:73,geo:69,traffic:142},{name:"Sun",seo:83,aeo:71,geo:67,traffic:135}],[]),E=e=>{m(e),d(!0)},O=async()=>{try{await y(["https://example-dealership.com","https://example-dealership.com/inventory","https://example-dealership.com/services"],{dealer_id:c}),u.success("Schema validation completed","Check the Schema tab for results")}catch(e){u.error("Schema validation failed",e instanceof Error?e.message:"Unknown error")}};(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/advanced-kpis");if(e.ok){let s=await e.json();s.success&&s.data.scores&&l(s.data.scores)}}catch(e){console.error("Failed to fetch KPI data:",e)}finally{n(!1)}};e();let s=setInterval(e,3e4);return()=>clearInterval(s)},[]);let F=[{id:"overview",label:"Overview",icon:en.Z},{id:"prompts",label:"Prompts",icon:v.Z},{id:"schema",label:"Schema",icon:ec.Z},{id:"batch",label:"Batch Tests",icon:eo.Z},{id:"sales",label:"Sales Analytics",icon:ed.Z},{id:"inventory",label:"Inventory",icon:ex.Z},{id:"advanced-kpi",label:"Advanced KPIs",icon:em.Z},{id:"leads",label:"Lead Management",icon:eh.Z},{id:"performance",label:"Performance",icon:eu.Z}];return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:[(0,a.jsx)("div",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur-sm sticky top-0 z-10",children:(0,a.jsx)("div",{className:"px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(ex.Z,{className:"w-5 h-5 text-white"})}),"Premium Auto Naples",(0,a.jsx)(eE,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"Live"})]}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Enterprise Dealership Analytics Dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Real-time data"})]}),h&&(0,a.jsx)(ek,{}),(0,a.jsx)(ey,{}),(0,a.jsx)(eE,{children:new Date().toLocaleDateString()})]})]})})}),(0,a.jsx)("div",{className:"border-b border-gray-800",children:(0,a.jsx)("div",{className:"px-8",children:(0,a.jsx)("nav",{className:"flex space-x-8",children:F.map(t=>{let r=t.icon;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"flex items-center gap-2 px-3 py-4 border-b-2 text-sm font-medium transition-all ".concat(e===t.id?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-600"),children:[(0,a.jsx)(r,{className:"w-4 h-4"}),t.label]},t.id)})})})}),(0,a.jsx)("div",{className:"p-8",children:(()=>{switch(e){case"overview":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(eC,{title:"Monthly Sales",value:"$67,000",change:12.5,trend:"up",icon:ed.Z,color:"green"}),(0,a.jsx)(eC,{title:"Active Leads",value:"89",change:8.2,trend:"up",icon:eh.Z,color:"blue"}),(0,a.jsx)(eC,{title:"Inventory",value:"228",change:-2.1,trend:"down",icon:ex.Z,color:"purple"}),(0,a.jsx)(eC,{title:"Conversion Rate",value:"18.4%",change:3.7,trend:"up",icon:eo.Z,color:"orange"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(eg.Z,{className:"w-5 h-5"}),"Sales Trend"]}),(0,a.jsx)(K.h,{width:"100%",height:300,children:(0,a.jsxs)(V.w,{data:k,children:[(0,a.jsx)(H.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(Q.K,{dataKey:"name",stroke:"#9CA3AF"}),(0,a.jsx)($.B,{stroke:"#9CA3AF"}),(0,a.jsx)(X.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),(0,a.jsx)(Y.x,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:2,r:4}})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(ex.Z,{className:"w-5 h-5"}),"Inventory Distribution"]}),(0,a.jsx)(K.h,{width:"100%",height:300,children:(0,a.jsxs)(ee.u,{children:[(0,a.jsx)(es.b,{data:S,cx:"50%",cy:"50%",outerRadius:100,dataKey:"value",label:e=>{let{name:s,value:t}=e;return"".concat(s,": ").concat(t)},children:S.map((e,s)=>(0,a.jsx)(et.b,{fill:e.color},"cell-".concat(s)))}),(0,a.jsx)(X.u,{})]})})]})]})]});case"prompts":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Prompt Management"}),(0,a.jsx)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Test Prompt"})]}),b&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(eC,{title:"Total Prompts",value:b.total,icon:v.Z,color:"blue"}),(0,a.jsx)(eC,{title:"Categories",value:Object.keys(b.by_category).length,icon:eo.Z,color:"green"}),(0,a.jsx)(eC,{title:"Intents",value:Object.keys(b.by_intent).length,icon:eu.Z,color:"purple"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-800",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Available Prompts"})}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:p?(0,a.jsx)("div",{className:"p-6 text-gray-400",children:"Loading prompts..."}):(0,a.jsx)("div",{className:"divide-y divide-gray-800",children:g.map(e=>(0,a.jsx)("div",{className:"p-4 hover:bg-gray-800/50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-white",children:e.title}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsx)(eE,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:e.category}),(0,a.jsx)(eE,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:e.intent}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[e.variables.length," variables"]})]})]}),(0,a.jsx)("button",{onClick:()=>E(e.id),className:"px-3 py-2 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors text-sm",children:"Test"})]})},e.id))})})]})]});case"schema":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Schema Validation"}),(0,a.jsx)("button",{onClick:O,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Run Schema Check"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(eC,{title:"Schema Coverage",value:"73%",change:5.2,trend:"up",icon:ec.Z,color:"blue"}),(0,a.jsx)(eC,{title:"Valid Schemas",value:"12/16",icon:ep.Z,color:"green"}),(0,a.jsx)(eC,{title:"Issues Found",value:"4",icon:eb.Z,color:"red"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Schema Status"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Schema validation results will appear here after running a check."})]})]});case"batch":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Batch Testing"}),w&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(eC,{title:"Total Tests",value:w.total_tests,icon:eu.Z,color:"blue"}),(0,a.jsx)(eC,{title:"Completed",value:w.completed_tests,icon:ep.Z,color:"green"}),(0,a.jsx)(eC,{title:"Running",value:w.running_tests,icon:v.Z,color:"orange"}),(0,a.jsx)(eC,{title:"Failed",value:w.failed_tests,icon:eb.Z,color:"red"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Batch Test Management"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Batch test results and management interface will be displayed here."})]})]});case"advanced-kpi":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(eC,{title:"SEO Score",value:i?"...":"".concat(Math.round(t.seo),"%"),change:i?void 0:5.2,trend:"up",icon:ec.Z,color:"blue"}),(0,a.jsx)(eC,{title:"AEO Score",value:i?"...":"".concat(Math.round(t.aeo),"%"),change:i?void 0:3.1,trend:"up",icon:v.Z,color:"purple"}),(0,a.jsx)(eC,{title:"GEO Score",value:i?"...":"".concat(Math.round(t.geo),"%"),change:i?void 0:7.8,trend:"up",icon:em.Z,color:"green"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(eu.Z,{className:"w-5 h-5"}),"SEO/AEO/GEO Performance Trends",(0,a.jsx)(eE,{children:"Weekly View"})]}),(0,a.jsx)(K.h,{width:"100%",height:400,children:(0,a.jsxs)(ea.T,{data:C,children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"seoGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"aeoGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#8B5CF6",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#8B5CF6",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"geoGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})]}),(0,a.jsx)(H.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(Q.K,{dataKey:"name",stroke:"#9CA3AF"}),(0,a.jsx)($.B,{stroke:"#9CA3AF"}),(0,a.jsx)(X.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),(0,a.jsx)(er.uN,{type:"monotone",dataKey:"seo",stroke:"#3B82F6",strokeWidth:2,fillOpacity:1,fill:"url(#seoGradient)"}),(0,a.jsx)(er.uN,{type:"monotone",dataKey:"aeo",stroke:"#8B5CF6",strokeWidth:2,fillOpacity:1,fill:"url(#aeoGradient)"}),(0,a.jsx)(er.uN,{type:"monotone",dataKey:"geo",stroke:"#10B981",strokeWidth:2,fillOpacity:1,fill:"url(#geoGradient)"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[(0,a.jsx)(ec.Z,{className:"w-4 h-4 text-blue-400"}),"SEO Metrics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Core Web Vitals"}),(0,a.jsx)(eE,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"85%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Local SERP"}),(0,a.jsx)(eE,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"92%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Schema Coverage"}),(0,a.jsx)(eE,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:"78%"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-purple-400"}),"AEO Metrics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Mention Frequency"}),(0,a.jsx)(eE,{className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:"15.2%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Position Score"}),(0,a.jsx)(eE,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"3.2 avg"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Accuracy Rate"}),(0,a.jsx)(eE,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"94.1%"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[(0,a.jsx)(em.Z,{className:"w-4 h-4 text-green-400"}),"GEO Metrics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"AI Visibility"}),(0,a.jsx)(eE,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"68.9%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Market Share"}),(0,a.jsx)(eE,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"12.4%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Engagement Rate"}),(0,a.jsx)(eE,{className:"bg-orange-500/20 text-orange-400 border-orange-500/30",children:"45.7%"})]})]})]})]})]});case"sales":return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(eC,{title:"Total Revenue",value:"$324,500",change:15.3,trend:"up",icon:ed.Z,color:"green"}),(0,a.jsx)(eC,{title:"Units Sold",value:"47",change:8.7,trend:"up",icon:ex.Z,color:"blue"}),(0,a.jsx)(eC,{title:"Avg Sale Price",value:"$6,906",change:2.1,trend:"up",icon:eg.Z,color:"purple"}),(0,a.jsx)(eC,{title:"Profit Margin",value:"22.4%",change:1.8,trend:"up",icon:eo.Z,color:"orange"})]})});default:return(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"text-gray-400",children:[(0,a.jsx)(ej.Z,{className:"w-16 h-16 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Coming Soon"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"This feature is under development."})]})})}})()}),(0,a.jsx)(eS,{isOpen:o,onClose:()=>d(!1),promptId:x}),(0,a.jsx)(ew,{})]})}function eF(e){let{dealerId:s}=e;return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(eO,{})})}let eT=[{id:"overview",label:"Overview",icon:l.Z},{id:"ai-health",label:"AI Health",icon:i.Z},{id:"zero-click",label:"Zero-Click",icon:n.Z},{id:"ugc",label:"UGC",icon:c.Z},{id:"schema",label:"Schema",icon:o.Z},{id:"premium",label:"Premium Dashboard",icon:d.Z},{id:"website",label:"Website",icon:x.Z}];function eP(){let[e,s]=(0,r.useState)("toyota-naples"),[t,l]=(0,r.useState)("overview"),[i,n]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("dai.tab");e&&eT.find(s=>s.id===e)&&l(e)},[]),(0,r.useEffect)(()=>void localStorage.setItem("dai.tab",t),[t]);let c=(0,r.useMemo)(()=>(0,a.jsxs)("header",{style:{borderBottom:"1px solid #1f2937",position:"sticky",top:0,backdropFilter:"blur(6px)",background:"rgba(11,11,11,.8)",zIndex:10},children:[(0,a.jsxs)("div",{style:{maxWidth:1120,margin:"0 auto",padding:"12px 16px",display:"flex",gap:12,alignItems:"center"},children:[(0,a.jsx)("div",{style:{fontWeight:700},children:"DealershipAI"}),(0,a.jsx)("div",{className:"ml-auto"}),(0,a.jsxs)("button",{onClick:()=>n(!i),className:"flex items-center gap-2 px-3 py-2 rounded text-sm transition-colors ".concat(i?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"AI Assistant"]}),(0,a.jsx)("label",{className:"text-sm",children:"Dealer ID"}),(0,a.jsx)("input",{value:e,onChange:e=>s(e.target.value),className:"border rounded px-2 py-1 h-8",placeholder:"toyota-naples"})]}),(0,a.jsx)("nav",{style:{maxWidth:1120,margin:"0 auto",padding:"4px 8px",display:"flex",gap:8,overflowX:"auto"},children:eT.map(e=>(0,a.jsxs)("button",{onClick:()=>l(e.id),className:"px-3 py-2 rounded text-sm flex items-center gap-2 ".concat(t===e.id?"bg-white text-black":"bg-black text-white border"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4"})," ",e.label]},e.id))})]}),[t,e,i]);return(0,a.jsxs)("div",{children:[c,(0,a.jsxs)("main",{style:{maxWidth:1120,margin:"0 auto",padding:16},children:["overview"===t&&(0,a.jsx)(G,{dealerId:e}),"ai-health"===t&&(0,a.jsx)(q,{dealerId:e}),"zero-click"===t&&(0,a.jsx)(z,{dealerId:e}),"ugc"===t&&(0,a.jsx)(U,{dealerId:e}),"schema"===t&&(0,a.jsx)(J,{dealerId:e}),"premium"===t&&(0,a.jsx)(eF,{dealerId:e}),"website"===t&&(0,a.jsx)(g,{children:(0,a.jsx)("div",{className:"text-sm",children:"Website panel stub. Wire PageSpeed + Lighthouse later."})})]}),i&&(0,a.jsxs)("div",{className:"fixed bottom-4 right-4 w-96 h-[600px] bg-slate-800 border border-slate-700 rounded-lg shadow-2xl z-50 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("span",{className:"font-medium text-slate-100",children:"AI Assistant"})]}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded transition-colors",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(0,a.jsx)(C,{dealerId:e,userTier:2,businessInfo:{},onUpgrade:()=>alert("Upgrade to higher tier!")})})]})]})}function eM(){return(0,a.jsx)(eP,{})}}},function(e){e.O(0,[323,796,709,402,744],function(){return e(e.s=42798)}),_N_E=e.O()}]);