(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{98589:function(e,s,t){Promise.resolve().then(t.bind(t,7065))},7065:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return B}});var a=t(20549),r=t(20646),l=t(98213),n=t(70743),i=t(42203),d=t(12844),o=t(8832),c=t(2107),x=t(65588),m=t(16842),h=t(62867),u=t(80619),g=t(69661),j=t(47122),v=t(38223),p=t(92865),f=t(34137),b=t(27352),N=t(44186),y=t(30766),k=t(66056);let w=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];var L=e=>{let{data:s=[],type:t="line",title:r,height:l=300,dataKey:i="value",xAxisKey:d="name",color:L="#8884d8",colors:M=w,showGrid:S=!0,showLegend:C=!0,"real-time":W=!1,refreshInterval:B=3e4,apiEndpoint:A,animated:z=!0}=e,[D,R]=(0,n.useState)(s),[F,I]=(0,n.useState)(!1),[V,H]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(W&&A){let e=async()=>{I(!0);try{let e=await fetch(A),s=await e.json();R(s),H(new Date)}catch(e){console.error("Failed to fetch chart data:",e)}finally{I(!1)}};e();let s=setInterval(e,B);return()=>clearInterval(s)}},[W,A,B]),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[r&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:r}),W&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(F?"bg-yellow-400 animate-pulse":"bg-green-400")}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:V?"Updated: ".concat(V.toLocaleTimeString()):"Real-time"})]})]}),F&&0===D.length?(0,a.jsx)("div",{className:"flex items-center justify-center",style:{height:l},children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsx)(k.h,{width:"100%",height:l,children:(()=>{let e={width:"100%",height:l,data:D,margin:{top:5,right:30,left:20,bottom:5}},s={axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6b7280"}};switch(t){case"line":return(0,a.jsxs)(o.w,{...e,children:[S&&(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f3f4f6"}),(0,a.jsx)(x.K,{dataKey:d,...s}),(0,a.jsx)(m.B,{...s}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),C&&(0,a.jsx)(u.D,{}),(0,a.jsx)(g.x,{type:"monotone",dataKey:i,stroke:L,strokeWidth:2,dot:{fill:L,strokeWidth:2,r:4},activeDot:{r:6,stroke:L,strokeWidth:2,fill:"#fff"},animationDuration:z?1e3:0})]});case"area":return(0,a.jsxs)(j.T,{...e,children:[S&&(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f3f4f6"}),(0,a.jsx)(x.K,{dataKey:d,...s}),(0,a.jsx)(m.B,{...s}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),C&&(0,a.jsx)(u.D,{}),(0,a.jsx)(v.u,{type:"monotone",dataKey:i,stroke:L,fill:"".concat(L,"20"),strokeWidth:2,animationDuration:z?1e3:0})]});case"bar":return(0,a.jsxs)(p.v,{...e,children:[S&&(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#f3f4f6"}),(0,a.jsx)(x.K,{dataKey:d,...s}),(0,a.jsx)(m.B,{...s}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),C&&(0,a.jsx)(u.D,{}),(0,a.jsx)(f.$,{dataKey:i,fill:L,radius:[4,4,0,0],animationDuration:z?1e3:0})]});case"pie":return(0,a.jsxs)(b.u,{width:"100%",height:l,children:[(0,a.jsx)(N.b,{data:D,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percent:t}=e;return"".concat(s," ").concat((100*t).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:i,animationDuration:z?1e3:0,children:D.map((e,s)=>(0,a.jsx)(y.b,{fill:M[s%M.length]},"cell-".concat(s)))}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),C&&(0,a.jsx)(u.D,{})]});default:return null}})()})]})};function M(){let[e,s]=(0,n.useState)(null),[t,r]=(0,n.useState)(!0),[l,i]=(0,n.useState)({});if((0,n.useEffect)(()=>{(async()=>{try{let e=new URLSearchParams;l.dealerId&&e.append("dealerId",l.dealerId),l.timeRange&&e.append("timeRange",l.timeRange),l.metricType&&e.append("metricType",l.metricType),l.brand&&e.append("brand",l.brand),l.tier&&e.append("tier",l.tier.toString());let t=await fetch("/api/dashboard/enhanced?".concat(e)),a=await t.json();s(a)}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{r(!1)}})()},[l]),t)return(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-24"},s))}),(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-64"})]});let d=(null==e?void 0:e.systemMetrics)||{totalUsers:1247,activeDealers:89,queueJobs:2341,monthlyRevenue:452e3};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Filters (Placeholder)"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Filter functionality temporarily disabled during deployment"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"System Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.totalUsers.toLocaleString()})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Dealers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.activeDealers})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Queue Jobs"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.queueJobs.toLocaleString()})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(d.monthlyRevenue/1e3).toFixed(1),"K"]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(L,{title:"System Performance Trends",type:"line",data:(null==e?void 0:e.performanceTrends)||[{name:"Week 1",value:95},{name:"Week 2",value:98},{name:"Week 3",value:94},{name:"Week 4",value:99}],color:"#10B981","real-time":!0,refreshInterval:6e4}),(0,a.jsx)(L,{title:"Revenue Distribution",type:"pie",data:(null==e?void 0:e.revenueDistribution)||[{name:"Vehicle Sales",value:65},{name:"Service",value:20},{name:"Parts",value:10},{name:"Finance",value:5}],colors:["#3B82F6","#10B981","#F59E0B","#EF4444"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Health & Enterprise Monitoring"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-red-800",children:"Queue Management"}),(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"Monitor probe job queues and DLQ status"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-800",children:"Enterprise Hub"}),(0,a.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Multi-location franchises and revenue attribution"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-green-800",children:"Toyota Pilot"}),(0,a.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Real dealership integration with 8.4x ROI"})]})]})]})]})}function S(){let{dealerId:e}=(0,d.dc)(),[s,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{(async()=>{try{let s=new URLSearchParams;e&&s.append("dealerId",e);let a=await fetch("/api/dashboard/enhanced?".concat(s)),r=await a.json();t(r)}catch(e){console.error("Failed to fetch dealer data:",e)}finally{l(!1)}})()},[e]),r)return(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-16"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-24"},s))})]});let i=(null==s?void 0:s.dealerSpecific)||{aiVisibility:87,revenueAtRisk:13e3,authorityScore:94,monthlyRevenue:967e3};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsxs)("p",{className:"text-sm font-medium text-blue-800",children:["Dealer Dashboard • Location: ",e||"Not assigned"]})]}),(null==s?void 0:s.lastUpdated)&&(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:["Last updated: ",new Date(s.lastUpdated).toLocaleTimeString()]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"AI Visibility"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[i.aiVisibility,"%"]}),(0,a.jsx)("p",{className:"text-xs text-green-600",children:"↑ 23% this month"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Revenue at Risk"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(i.revenueAtRisk/1e3).toFixed(0),"K"]}),(0,a.jsx)("p",{className:"text-xs text-orange-600",children:"↓ 38% from last month"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Authority Score"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i.authorityScore}),(0,a.jsx)("p",{className:"text-xs text-blue-600",children:"Top 5% nationally"})]})]})})]}),(null==s?void 0:s.pilotResults)&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Toyota Naples Pilot Success"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"8.4x"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"ROI Multiplier"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"$117K"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Monthly Increase"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"3.2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Payback Months"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:"4.7/5"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Satisfaction"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(L,{title:"AI Visibility Trends",type:"area",data:(null==s?void 0:s.visibilityTrends)||[{name:"Jan",value:64},{name:"Feb",value:71},{name:"Mar",value:78},{name:"Apr",value:84},{name:"May",value:87}],color:"#10B981","real-time":!0,apiEndpoint:"/api/dashboard/enhanced?dealerId=".concat(e,"&metric=visibility")}),(0,a.jsx)(L,{title:"Revenue Impact",type:"bar",data:(null==s?void 0:s.revenueImpact)||[{name:"Voice Search",value:47e3},{name:"Competitive Intel",value:34e3},{name:"Lot Optimization",value:32e3},{name:"Radio Campaigns",value:28e3}],color:"#3B82F6"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{className:"p-4 bg-blue-50 rounded-lg text-left hover:bg-blue-100 transition-colors",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900",children:"View Analytics"}),(0,a.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Check your SEO, AEO, and GEO performance"})]}),(0,a.jsxs)("button",{className:"p-4 bg-green-50 rounded-lg text-left hover:bg-green-100 transition-colors",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900",children:"AI Assistant"}),(0,a.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Get personalized recommendations"})]})]})]})]})}function C(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"User Dashboard • Limited Access"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"AI Assistant"}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900",children:"Available"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Account Status"}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900",children:"Active"})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Available Features"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"AI Assistant Access"]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Basic Dashboard View"]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Settings Management"]})]})]})]})}function W(){var e,s;let{data:t,status:l}=(0,r.useSession)(),{role:n,isAdmin:i,isDealer:o,dealerId:c}=(0,d.dc)();return"loading"===l?(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-24"},s))}),(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-64"})]}):"unauthenticated"===l?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m0 0v2m0-2h2m-2 0H10m4-5a4 4 0 11-8 0 4 4 0 018 0zm0 0v2"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Authentication Required"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Please sign in to access your dashboard."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome, ",(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.name)||(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.email)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Role: ",(0,a.jsx)("span",{className:"font-medium capitalize",children:n}),c&&(0,a.jsxs)("span",{children:[" • Dealer: ",c]})]})]}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(i?"bg-red-100 text-red-800":o?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:n.toUpperCase()})]})}),(0,a.jsx)(d.me,{children:(0,a.jsx)(M,{})}),(0,a.jsx)(d.ee,{children:!i&&(0,a.jsx)(S,{})}),!i&&!o&&(0,a.jsx)(d.V2,{children:(0,a.jsx)(C,{})})]})}function B(){let{data:e,status:s}=(0,r.useSession)(),t=(0,l.useRouter)(),{isAdmin:o,isDealer:c,dealerId:x,role:m}=(0,d.dc)();if((0,n.useEffect)(()=>{"unauthenticated"===s&&t.push("/auth/signin")},[s,t]),"loading"===s)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white",children:"Loading..."})});if(!e)return null;let{user:h}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{}),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsx)(W,{})})})]})}},12844:function(e,s,t){"use strict";t.d(s,{V2:function(){return o},dc:function(){return n},ee:function(){return d},me:function(){return i}});var a=t(20549),r=t(20646);function l(e){let{children:s,roles:t=[],dealerId:l,fallback:n=null,requireDealer:i=!1,requireActivated:d=!0}=e,{data:o,status:c}=(0,r.useSession)();if("loading"===c)return(0,a.jsx)("div",{className:"animate-pulse bg-gray-200 rounded h-8 w-48"});if("unauthenticated"===c||!o)return(0,a.jsx)(a.Fragment,{children:n});let x=o.user,m=(null==x?void 0:x.role)||"user",h=null==x?void 0:x.dealerId,u=(null==x?void 0:x.isActive)!==!1;if(d&&!u||t.length>0&&!t.includes(m)||i&&!h)return(0,a.jsx)(a.Fragment,{children:n});if(l){if("admin"===m)return(0,a.jsx)(a.Fragment,{children:s});if(h!==l)return(0,a.jsx)(a.Fragment,{children:n})}return(0,a.jsx)(a.Fragment,{children:s})}function n(){let{data:e}=(0,r.useSession)(),s=null==e?void 0:e.user,t=(null==s?void 0:s.role)||"user",a=null==s?void 0:s.dealerId;return{isAdmin:"admin"===t,isDealer:"dealer"===t,isUser:"user"===t,hasRole:e=>t===e,hasAnyRole:e=>e.includes(t),canAccessDealer:e=>"admin"===t||a===e,dealerId:a,role:t,isActive:(null==s?void 0:s.isActive)!==!1,isAuthenticated:!!e}}function i(e){let{children:s,fallback:t=null}=e;return(0,a.jsx)(l,{roles:["admin"],fallback:t,children:s})}function d(e){let{children:s,fallback:t=null}=e;return(0,a.jsx)(l,{roles:["admin","dealer"],fallback:t,children:s})}function o(e){let{children:s,fallback:t=(0,a.jsx)("div",{className:"text-gray-500",children:"Please sign in to view this content."})}=e;return(0,a.jsx)(l,{roles:["admin","dealer","user"],fallback:t,children:s})}},42203:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var a=t(20549),r=t(20646),l=t(34678),n=t.n(l),i=t(98213);let d=[{href:"/dashboard",label:"Dashboard",roles:["admin","dealer","user"],icon:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v6a2 2 0 01-2 2H10a2 2 0 01-2-2V5z"})]})},{href:"/ai-chat",label:"AI Assistant",roles:["admin","dealer","user"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})},{href:"/analytics",label:"Analytics",roles:["admin","dealer"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{href:"/dealers",label:"Dealers",roles:["admin"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{href:"/users",label:"User Management",roles:["admin","dealer"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})},{href:"/enterprise",label:"Enterprise",roles:["admin"],badge:"Pro",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{href:"/monitoring",label:"System Monitor",roles:["admin"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})},{href:"/reports",label:"Reports",roles:["admin","dealer"],badge:"New",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{href:"/settings",label:"Settings",roles:["admin","dealer","user"],icon:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];function o(){var e,s,t,l;let{data:o,status:c}=(0,r.useSession)(),x=(0,i.usePathname)();if("loading"===c)return(0,a.jsx)("div",{className:"animate-pulse bg-gray-800 h-16 w-full"});if("unauthenticated"===c)return null;let m=(null==o?void 0:null===(e=o.user)||void 0===e?void 0:e.role)||"user",h=null===(s=null==o?void 0:o.user)||void 0===s?void 0:s.dealer,u=d.filter(e=>e.roles.includes(m));return(0,a.jsxs)("nav",{className:"bg-gray-800 border-b border-gray-700",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[(0,a.jsx)(n(),{href:"/dashboard",className:"text-xl font-bold text-white",children:"DealershipAI"}),h&&(0,a.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-blue-600 text-white rounded",children:h.name})]}),(0,a.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:u.map(e=>{let s=x===e.href||x.startsWith(e.href+"/");return(0,a.jsxs)(n(),{href:e.href,className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ".concat(s?"border-blue-500 text-white":"border-transparent text-gray-300 hover:border-gray-300 hover:text-white"),children:[e.icon&&(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label,e.badge&&(0,a.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-green-500 text-white rounded-full",children:e.badge})]},e.href)})})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-300 mr-4",children:["Welcome, ",(null==o?void 0:null===(t=o.user)||void 0===t?void 0:t.name)||(null==o?void 0:null===(l=o.user)||void 0===l?void 0:l.email)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("admin"===m?"bg-red-600 text-white":"dealer"===m?"bg-blue-600 text-white":"bg-green-600 text-white"),children:m.toUpperCase()}),(0,a.jsx)("button",{onClick:()=>(0,r.signOut)(),className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"Sign out"})]})]})})})]})}),(0,a.jsx)("div",{className:"sm:hidden",children:(0,a.jsx)("div",{className:"pt-2 pb-3 space-y-1",children:u.map(e=>{let s=x===e.href;return(0,a.jsx)(n(),{href:e.href,className:"block pl-3 pr-4 py-2 border-l-4 text-sm font-medium ".concat(s?"bg-blue-50 border-blue-500 text-blue-700":"border-transparent text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.icon&&(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label,e.badge&&(0,a.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-green-500 text-white rounded-full",children:e.badge})]})},e.href)})})})]})}}},function(e){e.O(0,[646,678,323,121,709,402,744],function(){return e(e.s=98589)}),_N_E=e.O()}]);