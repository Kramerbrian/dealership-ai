"use strict";(()=>{var e={};e.id=3654,e.ids=[3654],e.modules={53524:e=>{e.exports=require("@prisma/client")},67096:e=>{e.exports=require("bcrypt")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55479:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>b,patchFetch:()=>j,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>w,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>x});var s={};t.r(s),t.d(s,{POST:()=>m});var a=t(95815),i=t(51150),o=t(10007),n=t(30596),u=t(67096),l=t.n(u),c=t(53524);let d=(0,t(2381).hu)("signup"),h=new c.PrismaClient;async function m(e){try{let{email:r,password:t,name:s}=await e.json();if(!r||!t||!s)return n.Z.json({error:"Missing required fields"},{status:400});if(t.length<6)return n.Z.json({error:"Password must be at least 6 characters"},{status:400});if(await h.user.findUnique({where:{email:r.toLowerCase()}}))return n.Z.json({error:"User with this email already exists"},{status:409});let a=await l().hash(t,12),i=await h.user.create({data:{email:r.toLowerCase(),name:s.trim(),passwordHash:a,role:"user",isActive:!0,emailVerified:new Date},select:{id:!0,email:!0,name:!0,role:!0,isActive:!0,createdAt:!0}});return d.info({userId:i.id,email:i.email,name:i.name},"New user account created"),n.Z.json({success:!0,user:{id:i.id,email:i.email,name:i.name,role:i.role}})}catch(e){return d.error({error:e},"User signup failed"),n.Z.json({error:"Internal server error"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/Users/briankramer/Documents/GitHub/dealership-ai/apps/web/app/api/auth/signup/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:w,headerHooks:v,staticGenerationBailout:x}=p,b="/api/auth/signup/route";function j(){return(0,o.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:f})}},2381:(e,r,t)=>{t.d(r,{hu:()=>i,kg:()=>a});class s{constructor(){this.level=process.env.LOG_LEVEL||"info",this.format=process.env.LOG_FORMAT||"json"}shouldLog(e){let r=["debug","info","warn","error"];return r.indexOf(e)>=r.indexOf(this.level)}formatLog(e){if("json"===this.format)return JSON.stringify({...e,error:e.error?{name:e.error.name,message:e.error.message,stack:e.error.stack}:void 0});let r=`[${e.timestamp}] ${e.level.toUpperCase()}`,t=e.context?` ${JSON.stringify(e.context)}`:"",s=e.error?`
${e.error.stack}`:"";return`${r}: ${e.message}${t}${s}`}log(e,r,t,s){if(!this.shouldLog(e))return;let a={level:e,message:r,timestamp:new Date().toISOString(),context:t,error:s},i=this.formatLog(a);"error"===e?console.error(i):"warn"===e?console.warn(i):console.log(i)}debug(e,r){this.log("debug",e,r)}info(e,r){this.log("info",e,r)}warn(e,r){this.log("warn",e,r)}error(e,r,t){this.log("error",e,t,r)}apiRequest(e,r,t,s){this.info("API Request",{method:e,path:r,status:t,duration_ms:s})}queueJob(e,r,t,s){let a={jobId:e,type:r,...s&&{duration_ms:s}};"failed"===t?this.error(`Queue job ${t}`,void 0,a):this.info(`Queue job ${t}`,a)}costAlert(e,r,t){this.warn("Cost threshold exceeded",{amount:e,threshold:r,period:t,excess:e-r})}}let a=new s;function i(e){let r=new s,t=r.log;return r.log=function(r,s,a,i){let o=`[${e}] ${s}`;return t.call(this,r,o,a,i)},r}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1262,722],()=>t(55479));module.exports=s})();