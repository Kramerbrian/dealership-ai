"use strict";(()=>{var e={};e.id=8416,e.ids=[8416],e.modules={53524:e=>{e.exports=require("@prisma/client")},67096:e=>{e.exports=require("bcrypt")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},32576:(e,t,n)=>{let i;n.r(t),n.d(t,{headerHooks:()=>eO,originalPathname:()=>ew,patchFetch:()=>eR,requestAsyncStorage:()=>eE,routeModule:()=>ex,serverHooks:()=>eA,staticGenerationAsyncStorage:()=>eI,staticGenerationBailout:()=>ek});var s={};n.r(s),n.d(s,{GET:()=>eb,HEAD:()=>eT});var r=n(95815),a=n(51150),o=n(10007),l=n(30596),c=n(68486),u=n(59001),d=n(10408);let p=require("@sentry/nextjs");var h=n(66911);n(62948),n(97678);var _=n(7773),g=(n(36994),n(55668)),m=(n(28759),n(30062)),f=n(44795);(0,f.R)();let y="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var S=n(56105);let v=f.GLOBAL_OBJ;var b=n(85177);let T=(e,t,n)=>{let i,s;return r=>{t.value>=0&&(r||n)&&((s=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=s,e(t))}},x=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,E=()=>{let e=v.performance.timing,t=v.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(let t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n},I=()=>v.__WEB_VITALS_POLYFILL__?v.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||E()):v.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],A=()=>{let e=I();return e&&e.activationStart||0},O=(e,t)=>{let n=I(),i="navigate";return n&&(i=v.document&&v.document.prerendering||A()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:x(),navigationType:i}},k=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let i=new PerformanceObserver(e=>{t(e.getEntries())});return i.observe({type:e,buffered:!0,...n}),i}}catch(e){}},w=(e,t)=>{let n=i=>{("pagehide"===i.type||"hidden"===v.document.visibilityState)&&(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};v.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},R=-1,C=()=>{v.document&&v.document.visibilityState&&(R="hidden"!==v.document.visibilityState||v.document.prerendering?1/0:0)},D=()=>{w(({timeStamp:e})=>{R=e},!0)},N=()=>(R<0&&(C(),D()),{get firstHiddenTime(){return R}}),$=0,L=1/0,j=0,M=e=>{e.forEach(e=>{e.interactionId&&(L=Math.min(L,e.interactionId),$=(j=Math.max(j,e.interactionId))?(j-L)/7+1:0)})},P=()=>i?$:performance.interactionCount||0,q=()=>{"interactionCount"in performance||i||(i=k("event",M,{type:"event",buffered:!0,durationThreshold:0}))},U=()=>P(),G=[],B={},J=e=>{let t=G[G.length-1],n=B[e.interactionId];if(n||G.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{let t={id:e.interactionId,latency:e.duration,entries:[e]};B[t.id]=t,G.push(t)}G.sort((e,t)=>t.latency-e.latency),G.splice(10).forEach(e=>{delete B[e.id]})}},X=()=>{let e=Math.min(G.length-1,Math.floor(U()/50));return G[e]},Y={},H=e=>{v.document&&(v.document.prerendering?addEventListener("prerenderingchange",()=>H(e),!0):"complete"!==v.document.readyState?addEventListener("load",()=>H(e),!0):setTimeout(e,0))},F={};n(70620),n(88900),n(95511);var Z=n(33220);function z(e){return e.split(/[\?#]/,1)[0]}function V(e){return e.split(/\\?\//).filter(e=>e.length>0&&","!==e).length}n(41177);var K=n(69835),W=n(94918),Q=(n(3148),n(7425));n(24389),(0,f.R)();n(28738);f.GLOBAL_OBJ,n(17558);let ee=["localhost",/^\/(?!\/)/];function et(e){let t;let n=e[0],i=1;for(;i<e.length;){let s=e[i],r=e[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=r(n)):("call"===s||"optionalCall"===s)&&(n=r((...e)=>n.call(t,...e)),t=void 0)}return n}(0,f.R)(),f.GLOBAL_OBJ,{...h.AT};var en=n(63720),ei=n(54711);function es(e){let t=et([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(et([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class er{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=er.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||(0,en.$y)("@nestjs/graphql"):this._module=this._module||(0,en.$y)("apollo-server-core"),this._module}setupOnce(e,t){if(es(t)){y&&g.kg.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){let e=this.loadDependency();if(!e){y&&g.kg.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}(0,Q.hl)(e.GraphQLFactory.prototype,"mergeWithSchema",function(e){return function(...n){return(0,Q.hl)(this.resolversExplorerService,"explore",function(e){return function(){return ea((0,ei.lE)(e.call(this)),t)}}),e.call(this,...n)}})}else{let e=this.loadDependency();if(!e){y&&g.kg.error("Apollo Integration was unable to require apollo-server-core package.");return}(0,Q.hl)(e.ApolloServerBase.prototype,"constructSchema",function(e){return function(){if(!this.config.resolvers)return y&&(this.config.schema?(g.kg.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),g.kg.warn()):this.config.modules&&g.kg.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),g.kg.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);let n=(0,ei.lE)(this.config.resolvers);return this.config.resolvers=ea(n,t),e.call(this)}})}}}function ea(e,t){return e.map(e=>(Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(i=>{if("function"==typeof e[n][i])(0,Q.hl)(e[n],i,function(e){return function(...s){let r=et([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:`${n}.${i}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),a=e.call(this,...s);return(0,m.J8)(a)?a.then(e=>(et([r,"optionalAccess",e=>e.end,"call",e=>e()]),e)):(et([r,"optionalAccess",e=>e.end,"call",e=>e()]),a)}})})}),e))}er.__initStatic();class eo{static __initStatic(){this.id="Express"}constructor(e={}){this.name=eo.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){if(!this._router){y&&g.kg.error("ExpressIntegration is missing an Express instance");return}if(es(t)){y&&g.kg.log("Express Integration is skipped because of instrumenter configuration.");return}(function(e,t=[]){t.forEach(t=>(function(e,t){let n=e[t];return e[t]=function(...e){return n.call(this,...e.map(e=>"function"==typeof e?el(e,t):Array.isArray(e)?e.map(e=>"function"==typeof e?el(e,t):e):e))},e})(e,t))})(this._router,this._methods),function(e){let t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();let n=t?e._router:e;if(!n){y&&g.kg.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),y&&g.kg.debug("Routing instrumentation is currently only supported in Express 4.");return}let i=Object.getPrototypeOf(n),s=i.process_params;i.process_params=function(e,t,n,i,r){n._reconstructedRoute||(n._reconstructedRoute="");let{layerRoutePath:a,isRegex:o,isArray:l,numExtraSegments:c}=function(e){var t;let n=et([e,"access",e=>e.route,"optionalAccess",e=>e.path]),i=(0,m.Kj)(n),s=Array.isArray(n);if(!n){let[t]=f.GLOBAL_OBJ.process.versions.node.split(".").map(Number);t>=16&&(n=ec(e.path,e.regexp,e.keys))}if(!n)return{isRegex:i,isArray:s,numExtraSegments:0};let r=s?Math.max(n.reduce((e,t)=>e+V(t.toString()),0)-V(e.path||""),0):0;return{layerRoutePath:(t=n,s?t.map(e=>e.toString()).join(","):t&&t.toString()),isRegex:i,isArray:s,numExtraSegments:r}}(e);(a||o||l)&&(n._hasParameters=!0);let u=(a||function(e,t,n){let i=et([z(e||""),"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e(e=>!!e)]),s=0,r=et([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e(e=>!!e),"access",e=>e.length])||0;return et([n,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e(e=>et([i,"optionalAccess",e=>e[r+s]])===e&&(s+=1,!0)),"access",e=>e.join,"call",e=>e("/")])}(n.originalUrl,n._reconstructedRoute,e.path)||"").split("/").filter(e=>e.length>0&&(o||l||!e.includes("*"))).join("/");if(u&&u.length>0&&(n._reconstructedRoute+=`/${u}${o?"/":""}`),V(z(n.originalUrl||""))+c===V(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute===n.originalUrl||(n._reconstructedRoute=n.originalUrl?z(n.originalUrl):n.originalUrl);let e=i.__sentry_transaction,t=e&&(0,S.XU)(e).data||{};if(e&&"custom"!==t[_.Zj]){let t=n._reconstructedRoute||"/",[i,s]=function(e,t={}){let n=e.method&&e.method.toUpperCase(),i="",s="url";t.customRoute||e.route?(i=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,s="route"):(e.originalUrl||e.url)&&(i=z(e.originalUrl||e.url||""));let r="";return t.method&&n&&(r+=n),t.method&&t.path&&(r+=" "),t.path&&i&&(r+=i),[r,s]}(n,{path:!0,method:!0,customRoute:t});e.updateName(i),e.setAttribute(_.Zj,s)}}return s.call(this,e,t,n,i,r)}}(this._router)}}function el(e,t){let n=e.length;switch(n){case 2:return function(n,i){let s=i.__sentry_transaction;if(s){let n=s.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});i.once("finish",()=>{n.end()})}return e.call(this,n,i)};case 3:return function(n,i,s){let r=et([i.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,i,function(...e){et([r,"optionalAccess",e=>e.end,"call",e=>e()]),s.call(this,...e)})};case 4:return function(n,i,s,r){let a=et([s.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,i,s,function(...e){et([a,"optionalAccess",e=>e.end,"call",e=>e()]),r.call(this,...e)})};default:throw Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}eo.__initStatic();let ec=(e,t,n)=>{if(!e||!t||!n||0===Object.keys(n).length||void 0===et([n,"access",e=>e[0],"optionalAccess",e=>e.offset])||null===et([n,"access",e=>e[0],"optionalAccess",e=>e.offset]))return;let i=n.sort((e,t)=>e.offset-t.offset),s=RegExp(t,`${t.flags}d`).exec(e);if(!s||!s.indices)return;let[,...r]=s.indices;if(r.length!==i.length)return;let a=e,o=0;return r.forEach((e,t)=>{if(e){let[n,s]=e,r=a.substring(0,n-o),l=`:${i[t].name}`;a=r+l+a.substring(s-o),o+=s-n-l.length}}),a};class eu{static __initStatic(){this.id="GraphQL"}constructor(){this.name=eu.id}loadDependency(){return this._module=this._module||(0,en.$y)("graphql/execution/execute.js")}setupOnce(e,t){if(es(t)){y&&g.kg.log("GraphQL Integration is skipped because of instrumenter configuration.");return}let n=this.loadDependency();if(!n){y&&g.kg.error("GraphQL Integration was unable to require graphql/execution package.");return}(0,Q.hl)(n,"execute",function(e){return function(...n){let i=t().getScope(),s=i.getSpan(),r=et([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);et([i,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]);let a=e.call(this,...n);return(0,m.J8)(a)?a.then(e=>(et([r,"optionalAccess",e=>e.end,"call",e=>e()]),et([i,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]),e)):(et([r,"optionalAccess",e=>e.end,"call",e=>e()]),et([i,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]),a)}})}}eu.__initStatic();let ed=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],ep={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class eh{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=eh.id,this._operations=Array.isArray(e.operations)?e.operations:ed,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){let e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||(0,en.$y)(e)}setupOnce(e,t){if(es(t)){y&&g.kg.log("Mongo Integration is skipped because of instrumenter configuration.");return}let n=this.loadDependency();if(!n){let e=this._useMongoose?"mongoose":"mongodb";y&&g.kg.error(`Mongo Integration was unable to require \`${e}\` package.`);return}this._instrumentOperations(n.Collection,this._operations,t)}_instrumentOperations(e,t,n){t.forEach(t=>this._patchOperation(e,t,n))}_patchOperation(e,t,n){if(!(t in e.prototype))return;let i=this._getSpanContextFromOperationArguments.bind(this);(0,Q.hl)(e.prototype,t,function(e){return function(...s){let r=s[s.length-1],a=n(),o=a.getScope(),l=a.getClient(),c=o.getSpan(),u=et([l,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!=typeof r||"mapReduce"===t&&2===s.length){let n=et([c,"optionalAccess",e=>e.startChild,"call",e=>e(i(this,t,s,u))]),r=e.call(this,...s);if((0,m.J8)(r))return r.then(e=>(et([n,"optionalAccess",e=>e.end,"call",e=>e()]),e));if(!r||"object"!=typeof r||!r.once||"function"!=typeof r.once)return et([n,"optionalAccess",e=>e.end,"call",e=>e()]),r;try{r.once("close",()=>{et([n,"optionalAccess",e=>e.end,"call",e=>e()])})}catch(e){et([n,"optionalAccess",e=>e.end,"call",e=>e()])}return r}let d=et([c,"optionalAccess",e=>e.startChild,"call",e=>e(i(this,t,s.slice(0,-1)))]);return e.call(this,...s.slice(0,-1),function(e,t){et([d,"optionalAccess",e=>e.end,"call",e=>e()]),r(e,t)})}})}_getSpanContextFromOperationArguments(e,t,n,i=!1){let s={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},r={op:"db",origin:"auto.db.mongo",description:t,data:s},a=ep[t],o=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!a||!o||!i)return r;try{if("mapReduce"===t){let[e,t]=n;s[a[0]]="string"==typeof e?e:e.name||"<anonymous>",s[a[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<a.length;e++)s[`db.mongodb.${a[e]}`]=JSON.stringify(n[e])}catch(e){}return r}}eh.__initStatic();class e_{static __initStatic(){this.id="Mysql"}constructor(){this.name=e_.id}loadDependency(){return this._module=this._module||(0,en.$y)("mysql/lib/Connection.js")}setupOnce(e,t){let n;if(es(t)){y&&g.kg.log("Mysql Integration is skipped because of instrumenter configuration.");return}let i=this.loadDependency();if(!i){y&&g.kg.error("Mysql Integration was unable to require `mysql` package.");return}try{i.prototype.connect=new Proxy(i.prototype.connect,{apply:(e,t,i)=>(n||(n=t.config),e.apply(t,i))})}catch(e){y&&g.kg.error("Mysql Integration was unable to instrument `mysql` config.")}function s(e){if(!e)return;let t=n?{"server.address":n.host,"server.port":n.port,"db.user":n.user}:{};Object.keys(t).forEach(n=>{e.setAttribute(n,t[n])}),e.end()}(0,Q.hl)(i,"createQuery",function(e){return function(n,i,r){let a=et([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"==typeof r)return e.call(this,n,i,function(e,t,n){s(a),r(e,t,n)});if("function"==typeof i)return e.call(this,n,function(e,t,n){s(a),i(e,t,n)});let o=e.call(this,n,i);return o.on("end",()=>{s(a)}),o}})}}e_.__initStatic();class eg{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=eg.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||(0,en.$y)("pg")}setupOnce(e,t){if(es(t)){y&&g.kg.log("Postgres Integration is skipped because of instrumenter configuration.");return}let n=this.loadDependency();if(!n){y&&g.kg.error("Postgres Integration was unable to require `pg` package.");return}let i=this._usePgNative?et([n,"access",e=>e.native,"optionalAccess",e=>e.Client]):n.Client;if(!i){y&&g.kg.error("Postgres Integration was unable to access 'pg-native' bindings.");return}(0,Q.hl)(i.prototype,"query",function(e){return function(n,i,s){let r=t().getScope().getSpan(),a={"db.system":"postgresql"};try{this.database&&(a["db.name"]=this.database),this.host&&(a["server.address"]=this.host),this.port&&(a["server.port"]=this.port),this.user&&(a["db.user"]=this.user)}catch(e){}let o=et([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",origin:"auto.db.postgres",data:a})]);if("function"==typeof s)return e.call(this,n,i,function(e,t){et([o,"optionalAccess",e=>e.end,"call",e=>e()]),s(e,t)});if("function"==typeof i)return e.call(this,n,function(e,t){et([o,"optionalAccess",e=>e.end,"call",e=>e()]),i(e,t)});let l=void 0!==i?e.call(this,n,i):e.call(this,n);return(0,m.J8)(l)?l.then(e=>(et([o,"optionalAccess",e=>e.end,"call",e=>e()]),e)):(et([o,"optionalAccess",e=>e.end,"call",e=>e()]),l)}})}}eg.__initStatic();class em{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=em.id,function(e){return!!e&&!!e.$use}(e.client)&&!e.client._sentryInstrumented){(0,Q.xp)(e.client,"_sentryInstrumented",!0);let t={};try{let n=e.client._engineConfig;if(n){let{activeProvider:e,clientVersion:i}=n;e&&(t["db.system"]=e),i&&(t["db.prisma.version"]=i)}}catch(e){}e.client.$use((e,n)=>{if(es(K.Gd))return n(e);let i=e.action,s=e.model;return(0,W.GK)({name:s?`${s} ${i}`:i,onlyIfParent:!0,op:"db.prisma",attributes:{[_.S3]:"auto.db.prisma"},data:{...t,"db.operation":i}},()=>n(e))})}else y&&g.kg.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client)}setupOnce(){}}em.__initStatic();var ef=n(77202);("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(0,ef.r)(),process.env.SENTRY_DSN,process.env.VERCEL_GIT_COMMIT_SHA;let ey={API_ERROR:"api_error",AUTH_ERROR:"auth_error",DATABASE_ERROR:"database_error",AI_ERROR:"ai_service_error",UI_ERROR:"ui_error",INTEGRATION_ERROR:"integration_error"},eS={getUserMetrics:async()=>[{name:"dealershipai_active_users_total",value:150,labels:{role:"dealer"},type:"gauge",help:"Total number of active dealer users"},{name:"dealershipai_active_users_total",value:25,labels:{role:"admin"},type:"gauge",help:"Total number of active admin users"},{name:"dealershipai_active_users_total",value:1200,labels:{role:"user"},type:"gauge",help:"Total number of active regular users"}],getAIMetrics:async()=>[{name:"dealershipai_ai_requests_total",value:2500,labels:{provider:"openai",status:"success"},type:"counter",help:"Total AI API requests"},{name:"dealershipai_ai_requests_total",value:15,labels:{provider:"openai",status:"error"},type:"counter",help:"Total AI API requests"},{name:"dealershipai_ai_response_time_seconds",value:1.2,labels:{provider:"openai"},type:"gauge",help:"Average AI API response time in seconds"}],getDatabaseMetrics:async()=>[{name:"dealershipai_db_connections_active",value:8,type:"gauge",help:"Number of active database connections"},{name:"dealershipai_db_query_duration_seconds",value:.045,type:"gauge",help:"Average database query duration"},{name:"dealershipai_db_queries_total",value:15e3,labels:{status:"success"},type:"counter",help:"Total database queries executed"}],getBusinessMetrics:async()=>[{name:"dealershipai_dealerships_total",value:45,labels:{status:"active"},type:"gauge",help:"Total number of active dealerships"},{name:"dealershipai_revenue_usd",value:12500.5,labels:{period:"monthly"},type:"gauge",help:"Monthly recurring revenue in USD"},{name:"dealershipai_chat_sessions_total",value:890,labels:{date:new Date().toISOString().split("T")[0]},type:"counter",help:"Total chat sessions today"}]};async function ev(){let e=Date.now();return[{name:"dealershipai_uptime_seconds",value:process.uptime(),type:"counter",help:"Application uptime in seconds"},{name:"dealershipai_memory_usage_bytes",value:process.memoryUsage().heapUsed,type:"gauge",help:"Memory usage in bytes"},{name:"dealershipai_response_time_seconds",value:(Date.now()-e)/1e3,type:"gauge",help:"API response time for metrics endpoint"}]}async function eb(e){let t=(0,d.headers)().get("user-agent")||"";try{let n=await (0,c.getServerSession)(u.Lz),i=t.includes("Prometheus")||t.includes("curl")||t.includes("wget")||e.headers.get("authorization")?.includes("Bearer");if(!n&&!i)return l.Z.json({error:"Authentication required for metrics access"},{status:401});let[s,r,a,o,d]=await Promise.all([eS.getUserMetrics(),eS.getAIMetrics(),eS.getDatabaseMetrics(),eS.getBusinessMetrics(),ev()]),p=[...s,...r,...a,...o,...d];if((e.headers.get("accept")||"").includes("application/json"))return l.Z.json({timestamp:new Date().toISOString(),metrics:p});let h=function(e){let t=new Map;e.forEach(e=>{t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)});let n="";return t.forEach((e,t)=>{n+=`# HELP ${t} ${e[0].help}
# TYPE ${t} ${e[0].type}
`,e.forEach(e=>{let t=e.labels?`{${Object.entries(e.labels).map(([e,t])=>`${e}="${t}"`).join(",")}}`:"";n+=`${e.name}${t} ${e.value}
`}),n+="\n"}),n}(p);return new Response(h,{status:200,headers:{"Content-Type":"text/plain; version=0.0.4; charset=utf-8","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})}catch(e){return console.error("Metrics endpoint error:",e),function(e,t={}){let{tag:n,level:i="error",extra:s,user:r}=t;p.withScope(t=>{t.setLevel(i),n&&t.setTag("error_category",ey[n]),s&&Object.entries(s).forEach(([e,n])=>{t.setExtra(e,n)}),r&&(p.setUser({id:r.id,email:r.email,role:r.role,dealershipId:r.dealershipId}),p.setTag("user.role",r.role),r.dealershipId&&p.setTag("dealership.id",r.dealershipId)),p.captureException(e)})}(e,{tag:"API_ERROR",extra:{endpoint:"/api/monitoring/metrics",userAgent:t,timestamp:new Date().toISOString()}}),l.Z.json({error:"Failed to collect metrics",timestamp:new Date().toISOString()},{status:500})}}async function eT(){return new Response(null,{status:200,headers:{"Cache-Control":"no-cache","Content-Type":"text/plain"}})}let ex=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/monitoring/metrics/route",pathname:"/api/monitoring/metrics",filename:"route",bundlePath:"app/api/monitoring/metrics/route"},resolvedPagePath:"/Users/briankramer/Documents/GitHub/dealership-ai/apps/web/app/api/monitoring/metrics/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:eE,staticGenerationAsyncStorage:eI,serverHooks:eA,headerHooks:eO,staticGenerationBailout:ek}=ex,ew="/api/monitoring/metrics/route";function eR(){return(0,o.patchFetch)({serverHooks:eA,staticGenerationAsyncStorage:eI})}},59001:(e,t,n)=>{n.d(t,{Lz:()=>p,QO:()=>g,rP:()=>_});var i=n(30596),s=n(81629),r=n(35163),a=n(16573),o=n(53524),l=n(67096),c=n.n(l);let u=(0,n(2381).hu)("auth"),d=new o.PrismaClient,p={adapter:(0,s.N)(d),providers:[(0,a.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET,allowDangerousEmailAccountLinking:!0}),(0,r.Z)({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return u.warn("Missing credentials in auth attempt"),null;try{let t=await d.user.findUnique({where:{email:e.email},include:{dealer:!0}});if(!t)return u.warn({email:e.email},"User not found"),null;if(!t.isActive)return u.warn({email:e.email},"Inactive user attempted login"),null;if(t.passwordHash&&!await c().compare(e.password,t.passwordHash))return u.warn({email:e.email},"Invalid password"),null;return u.info({userId:t.id,email:t.email,role:t.role,dealerId:t.dealerId},"User authenticated successfully"),{id:t.id,email:t.email,name:t.name,image:t.image,role:t.role,dealerId:t.dealerId,isActive:t.isActive}}catch(t){return u.error({error:t,email:e.email},"Authentication error"),null}}})],session:{strategy:"jwt",maxAge:2592e3},callbacks:{async signIn({user:e,account:t,profile:n}){if(t?.provider==="google")try{let t=await d.user.findUnique({where:{email:e.email}});if(t){if(!t.isActive)return u.warn({email:e.email},"Inactive user attempted Google login"),!1}else{let t=await d.user.create({data:{email:e.email,name:e.name||n?.name||null,image:e.image||n?.picture||null,role:"user",emailVerified:new Date,isActive:!0}});u.info({userId:t.id,email:t.email,provider:"google"},"New Google user created")}}catch(t){return u.error({error:t,email:e.email},"Google sign-in error"),!1}return!0},jwt:async({token:e,user:t,trigger:n,session:i})=>(t&&(e.id=t.id,e.role=t.role,e.dealerId=t.dealerId,e.isActive=t.isActive),"update"===n&&i&&(e.role=i.role||e.role,e.dealerId=i.dealerId||e.dealerId),e),session:async({session:e,token:t})=>(t&&(e.user.id=t.id,e.user.role=t.role,e.user.dealerId=t.dealerId,e.user.isActive=t.isActive),e)},pages:{signIn:"/auth/signin",signUp:"/auth/signup",error:"/auth/error"},events:{signIn:async({user:e,account:t,isNewUser:n})=>{u.info({userId:e.id,email:e.email,provider:t?.provider,isNewUser:n},"User signed in")},signOut:async({token:e})=>{u.info({userId:e?.id,email:e?.email},"User signed out")}},debug:!1,secret:process.env.NEXTAUTH_SECRET};function h(e,t){return e?.user?.role===t}function _(e,t){return!!h(e,"admin")||e?.user?.dealerId===t}function g(e,t={}){return async s=>{try{let{getServerSession:r}=await Promise.all([n.e(4955),n.e(8486)]).then(n.t.bind(n,68486,23)),a=await r(p);if(!a)return i.Z.json({error:"Unauthorized - Please sign in"},{status:401});if(!a.user.isActive)return i.Z.json({error:"Account inactive - Please contact support"},{status:403});if(t.requireRole&&!h(a,t.requireRole))return i.Z.json({error:`Insufficient permissions - ${t.requireRole} role required`},{status:403});if(t.requireDealer&&!a.user.dealerId)return i.Z.json({error:"Dealer access required - Please associate with a dealership"},{status:403});return e(s,a)}catch(e){return u.error({error:e,url:s.url,method:s.method},"Authentication middleware error"),i.Z.json({error:"Authentication service unavailable"},{status:503})}}}},2381:(e,t,n)=>{n.d(t,{hu:()=>r,kg:()=>s});class i{constructor(){this.level=process.env.LOG_LEVEL||"info",this.format=process.env.LOG_FORMAT||"json"}shouldLog(e){let t=["debug","info","warn","error"];return t.indexOf(e)>=t.indexOf(this.level)}formatLog(e){if("json"===this.format)return JSON.stringify({...e,error:e.error?{name:e.error.name,message:e.error.message,stack:e.error.stack}:void 0});let t=`[${e.timestamp}] ${e.level.toUpperCase()}`,n=e.context?` ${JSON.stringify(e.context)}`:"",i=e.error?`
${e.error.stack}`:"";return`${t}: ${e.message}${n}${i}`}log(e,t,n,i){if(!this.shouldLog(e))return;let s={level:e,message:t,timestamp:new Date().toISOString(),context:n,error:i},r=this.formatLog(s);"error"===e?console.error(r):"warn"===e?console.warn(r):console.log(r)}debug(e,t){this.log("debug",e,t)}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t,n){this.log("error",e,n,t)}apiRequest(e,t,n,i){this.info("API Request",{method:e,path:t,status:n,duration_ms:i})}queueJob(e,t,n,i){let s={jobId:e,type:t,...i&&{duration_ms:i}};"failed"===n?this.error(`Queue job ${n}`,void 0,s):this.info(`Queue job ${n}`,s)}costAlert(e,t,n){this.warn("Cost threshold exceeded",{amount:e,threshold:t,period:n,excess:e-t})}}let s=new i;function r(e){let t=new i,n=t.log;return t.log=function(t,i,s,r){let a=`[${e}] ${i}`;return n.call(this,t,a,s,r)},t}},66207:(e,t,n)=>{n.d(t,{J:()=>i});let i="production"},56703:(e,t,n)=>{n.d(t,{X:()=>i});let i="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},36994:(e,t,n)=>{n.d(t,{$e:()=>s,nZ:()=>a,s3:()=>r});var i=n(69835);function s(...e){let t=(0,i.Gd)();if(2===e.length){let[n,i]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,i(n))):t.withScope(i)}return t.withScope(e[0])}function r(){return(0,i.Gd)().getClient()}function a(){return(0,i.Gd)().getScope()}},69835:(e,t,n)=>{n.d(t,{Gd:()=>x,aF:()=>E,cu:()=>b,Ok:()=>I});var i,s=n(30062),r=n(54711),a=n(33220),o=n(55668),l=n(44795),c=n(66207),u=n(56703);!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(i||(i={}));class d{constructor(e){d.prototype.__init.call(this),d.prototype.__init2.call(this),d.prototype.__init3.call(this),d.prototype.__init4.call(this),this._state=i.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new d((n,i)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){i(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){i(e)}else i(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new d((t,n)=>{let i,s;return this.then(t=>{s=!1,i=t,e&&e()},t=>{s=!0,i=t,e&&e()}).then(()=>{if(s){n(i);return}t(i)})})}__init(){this._resolve=e=>{this._setResult(i.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(i.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{if(this._state===i.PENDING){if((0,s.J8)(t)){t.then(this._resolve,this._reject);return}this._state=e,this._value=t,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===i.PENDING)return;let e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(this._state===i.RESOLVED&&e[1](this._value),this._state===i.REJECTED&&e[2](this._value),e[0]=!0)})}}}var p=n(7425);function h(e,t={}){if(!t.user||(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,a.ph)(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:(0,r.DM)()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{let t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}var _=n(3148),g=n(86520),m=n(56105);class f{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=y()}static clone(e){return e?e.clone():new f}clone(){let e=new f;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&h(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;let t="function"==typeof e?e(this):e;if(t instanceof f){let e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else(0,s.PO)(t)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext));return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=y(),this}addBreadcrumb(e,t){let n="number"==typeof t?t:100;if(n<=0)return this;let i={timestamp:(0,a.yW)(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){let{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:i,_extra:s,_user:r,_level:a,_fingerprint:o,_eventProcessors:l,_propagationContext:c,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:i,extra:s,user:r,level:a,fingerprint:o||[],eventProcessors:l,propagationContext:c,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){return function(e,t){let{fingerprint:n,span:i,breadcrumbs:s,sdkProcessingMetadata:a}=t;(function(e,t){let{extra:n,tags:i,user:s,contexts:r,level:a,transactionName:o}=t,l=(0,p.Jr)(n);l&&Object.keys(l).length&&(e.extra={...l,...e.extra});let c=(0,p.Jr)(i);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});let u=(0,p.Jr)(s);u&&Object.keys(u).length&&(e.user={...u,...e.user});let d=(0,p.Jr)(r);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),a&&(e.level=a),o&&(e.transaction=o)})(e,t),i&&function(e,t){e.contexts={trace:(0,m.wy)(t),...e.contexts};let n=(0,g.G)(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:(0,_.j)(t),...e.sdkProcessingMetadata};let i=(0,m.XU)(n).description;i&&(e.tags={transaction:i,...e.tags})}}(e,i),e.fingerprint=e.fingerprint?(0,r.lE)(e.fingerprint):[],n&&(e.fingerprint=e.fingerprint.concat(n)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint,function(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,s),e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...a}}(e,this.getScopeData()),function e(t,n,i,r=0){return new d((a,l)=>{let c=t[r];if(null===n||"function"!=typeof c)a(n);else{let d=c({...n},i);u.X&&c.id&&null===d&&o.kg.log(`Event processor "${c.id}" dropped event`),(0,s.J8)(d)?d.then(n=>e(t,n,i,r+1).then(a)).then(null,l):e(t,d,i,r+1).then(a).then(null,l)}})}([...n,...(0,l.Y)("globalEventProcessors",()=>[]),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){let n=t&&t.event_id?t.event_id:(0,r.DM)();if(!this._client)return o.kg.warn("No client configured on scope - will not capture exception!"),n;let i=Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:n},this),n}captureMessage(e,t,n){let i=n&&n.event_id?n.event_id:(0,r.DM)();if(!this._client)return o.kg.warn("No client configured on scope - will not capture message!"),i;let s=Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:i},this),i}captureEvent(e,t){let n=t&&t.event_id?t.event_id:(0,r.DM)();return this._client?this._client.captureEvent(e,{...t,event_id:n},this):o.kg.warn("No client configured on scope - will not capture event!"),n}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function y(){return{traceId:(0,r.DM)(),spanId:(0,r.DM)().substring(16)}}let S=parseFloat("7.120.4");class v{constructor(e,t,n,i=S){let s,r;this._version=i,t?s=t:(s=new f).setClient(e),n?r=n:(r=new f).setClient(e),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=r}isOlderThan(e){return this._version<e}bindClient(e){let t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){let e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){let t;let n=this.pushScope();try{t=e(n)}catch(e){throw this.popScope(),e}return(0,s.J8)(t)?t.then(e=>(this.popScope(),e),e=>{throw this.popScope(),e}):(this.popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){let n=this._lastEventId=t&&t.event_id?t.event_id:(0,r.DM)(),i=Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:i,...t,event_id:n}),n}captureMessage(e,t,n){let i=this._lastEventId=n&&n.event_id?n.event_id:(0,r.DM)(),s=Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:i}),i}captureEvent(e,t){let n=t&&t.event_id?t.event_id:(0,r.DM)();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){let{scope:n,client:i}=this.getStackTop();if(!i)return;let{beforeBreadcrumb:s=null,maxBreadcrumbs:r=100}=i.getOptions&&i.getOptions()||{};if(r<=0)return;let l={timestamp:(0,a.yW)(),...e},c=s?(0,o.Cf)(()=>s(l,t)):l;null!==c&&(i.emit&&i.emit("beforeAddBreadcrumb",c,t),n.addBreadcrumb(c,r))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){let{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){let t=T(this);try{e(this)}finally{T(t)}}getIntegration(e){let t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return u.X&&o.kg.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){let n=this._callExtensionMethod("startTransaction",e,t);return u.X&&!n&&(this.getClient()?o.kg.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):o.kg.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){let e=this.getStackTop().scope,t=e.getSession();if(t){var n;let e;e={},n?e={status:n}:"ok"===t.status&&(e={status:"exited"}),h(t,e)}this._sendSessionUpdate(),e.setSession()}startSession(e){let{scope:t,client:n}=this.getStackTop(),{release:i,environment:s=c.J}=n&&n.getOptions()||{},{userAgent:o}=l.GLOBAL_OBJ.navigator||{},u=function(e){let t=(0,a.ph)(),n={sid:(0,r.DM)(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>(0,p.Jr)({sid:`${n.sid}`,init:n.init,started:new Date(1e3*n.started).toISOString(),timestamp:new Date(1e3*n.timestamp).toISOString(),status:n.status,errors:n.errors,did:"number"==typeof n.did||"string"==typeof n.did?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})};return e&&h(n,e),n}({release:i,environment:s,user:t.getUser(),...o&&{userAgent:o},...e}),d=t.getSession&&t.getSession();return d&&"ok"===d.status&&h(d,{status:"exited"}),this.endSession(),t.setSession(u),u}shouldSendDefaultPii(){let e=this.getClient(),t=e&&e.getOptions();return!!(t&&t.sendDefaultPii)}_sendSessionUpdate(){let{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){let n=b().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);u.X&&o.kg.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function b(){return l.GLOBAL_OBJ.__SENTRY__=l.GLOBAL_OBJ.__SENTRY__||{extensions:{},hub:void 0},l.GLOBAL_OBJ}function T(e){let t=b(),n=A(t);return O(t,e),n}function x(){let e=b();if(e.__SENTRY__&&e.__SENTRY__.acs){let t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=b()){var t;return(!((t=e)&&t.__SENTRY__&&t.__SENTRY__.hub)||A(e).isOlderThan(S))&&O(e,new v),A(e)}(e)}function E(){return x().getIsolationScope()}function I(e,t={}){let n=b();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function A(e){return(0,l.Y)("hub",()=>new v,e)}function O(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}},30914:(e,t,n)=>{let i;n.d(t,{y:()=>r});var s=n(7425);function r(e){let t=i?i.get(e):void 0;if(!t)return;let n={};for(let[,[e,i]]of t)n[e]||(n[e]=[]),n[e].push((0,s.Jr)(i));return n}},7773:(e,t,n)=>{n.d(t,{$J:()=>r,S3:()=>a,TE:()=>s,Zj:()=>i,p6:()=>o});let i="sentry.source",s="sentry.sample_rate",r="sentry.op",a="sentry.origin",o="profile_id"},3148:(e,t,n)=>{n.d(t,{_:()=>l,j:()=>c});var i=n(7425),s=n(66207),r=n(36994),a=n(86520),o=n(56105);function l(e,t,n){let r=t.getOptions(),{publicKey:a}=t.getDsn()||{},{segment:o}=n&&n.getUser()||{},l=(0,i.Jr)({environment:r.environment||s.J,release:r.release,user_segment:o,public_key:a,trace_id:e});return t.emit&&t.emit("createDsc",l),l}function c(e){let t=(0,r.s3)();if(!t)return{};let n=l((0,o.XU)(e).trace_id||"",t,(0,r.nZ)()),i=(0,a.G)(e);if(!i)return n;let s=i&&i._frozenDynamicSamplingContext;if(s)return s;let{sampleRate:c,source:u}=i.metadata;null!=c&&(n.sample_rate=`${c}`);let d=(0,o.XU)(i);return u&&"url"!==u&&(n.transaction=d.description),n.sampled=String((0,o.Tt)(i)),t.emit&&t.emit("createDsc",n),n}},62948:(e,t,n)=>{n.d(t,{T:()=>T,l:()=>b});var i=n(55668),s=n(56703),r=n(69835),a=n(56105),o=n(44795),l=n(28738);let c=null;function u(){c=o.GLOBAL_OBJ.onerror,o.GLOBAL_OBJ.onerror=function(e,t,n,i,s){return(0,l.rK)("error",{column:i,error:s,line:n,msg:e,url:t}),!!c&&!c.__SENTRY_LOADER__&&c.apply(this,arguments)},o.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}let d=null;function p(){d=o.GLOBAL_OBJ.onunhandledrejection,o.GLOBAL_OBJ.onunhandledrejection=function(e){return(0,l.rK)("unhandledrejection",e),!d||!!d.__SENTRY_LOADER__||d.apply(this,arguments)},o.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var h=n(97678);let _=!1;function g(){let e=(0,h.x1)();if(e){let t="internal_error";s.X&&i.kg.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}g.tag="sentry_tracingErrorCallback";var m=n(66911),f=n(95511),y=n(37547);function S(){let e=this.getScope().getSpan();return e?{"sentry-trace":(0,a.Hb)(e)}:{}}function v(e,t){let n=this.getClient(),r=n&&n.getOptions()||{},a=r.instrumenter||"sentry",o=e.instrumenter||"sentry";a!==o&&(s.X&&i.kg.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${a}\` instrumenter.
The transaction will not be sampled. Please use the ${a} instrumentation to start transactions.`),e.sampled=!1);let l=new y.Y(e,this);return(l=(0,f.f)(l,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t})).isRecording()&&l.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",l),l}function b(e,t,n,i,s,r,a,o=!1){let l=e.getClient(),c=l&&l.getOptions()||{},u=new m.io(t,e,n,i,a,s,o);return(u=(0,f.f)(u,c,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...r})).isRecording()&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),l&&l.emit&&l.emit("startTransaction",u),u}function T(){let e=(0,r.cu)();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=v),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=S),_||(_=!0,function(e){let t="error";(0,l.Hj)(t,e),(0,l.D2)(t,u)}(g),function(e){let t="unhandledrejection";(0,l.Hj)(t,e),(0,l.D2)(t,p)}(g)))}},66911:(e,t,n)=>{n.d(t,{AT:()=>c,io:()=>d});var i=n(55668),s=n(33220),r=n(56703),a=n(56105),o=n(70620),l=n(37547);let c={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3};class u extends o.g{constructor(e,t,n,i){super(i),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){let t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===(0,a.XU)(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class d extends l.Y{constructor(e,t,n=c.idleTimeout,s=c.finalTimeout,a=c.heartbeatInterval,o=!1,l=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=s,this._heartbeatInterval=a,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason="externalFinish",this._autoFinishAllowed=!l,o&&(r.X&&i.kg.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),l||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason="finalTimeout",this.end())},this._finalTimeout)}end(e){let t=(0,a.$k)(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){for(let e of(r.X&&i.kg.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op),this._beforeFinishCallbacks))e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;!(0,a.XU)(e).timestamp&&(e.setStatus("cancelled"),e.end(t),r.X&&i.kg.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));let{start_timestamp:n,timestamp:s}=(0,a.XU)(e),o=n&&n<t,l=(this._finalTimeout+this._idleTimeout)/1e3,c=s&&n&&s-n<l;if(r.X){let t=JSON.stringify(e,void 0,2);o?c||i.kg.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):i.kg.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&c}),r.X&&i.kg.log("[Tracing] flushing IdleTransaction")}else r.X&&i.kg.log("[Tracing] No active IdleTransaction");if(this._onScope){let e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){this.spanRecorder||(this.spanRecorder=new u(e=>{this._finished||this._pushActivity(e)},e=>{this._finished||this._popActivity(e)},this.spanContext().spanId,e),r.X&&i.kg.log("Starting heartbeat"),this._pingHeartbeat()),this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason="cancelled",this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(r.X&&i.kg.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason="idleTimeout",this.end(e))},this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),r.X&&i.kg.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,r.X&&i.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(r.X&&i.kg.log(`[Tracing] popActivity ${e}`),delete this.activities[e],r.X&&i.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){let e=(0,s.ph)();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason="cancelled",this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;let e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(r.X&&i.kg.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason="heartbeatFailed",this.end()):this._pingHeartbeat()}_pingHeartbeat(){r.X&&i.kg.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}},95511:(e,t,n)=>{n.d(t,{X:()=>u,f:()=>c});var i=n(55668),s=n(30062),r=n(56703),a=n(7773),o=n(88900),l=n(56105);function c(e,t,n){let s;return(0,o.z)(t)?void 0!==e.sampled?e.setAttribute(a.TE,Number(e.sampled)):("function"==typeof t.tracesSampler?(s=t.tracesSampler(n),e.setAttribute(a.TE,Number(s))):void 0!==n.parentSampled?s=n.parentSampled:void 0!==t.tracesSampleRate?(s=t.tracesSampleRate,e.setAttribute(a.TE,Number(s))):(s=1,e.setAttribute(a.TE,s)),u(s))?s?(e.sampled=Math.random()<s,e.sampled)?r.X&&i.kg.log(`[Tracing] starting ${e.op} transaction - ${(0,l.XU)(e).description}`):r.X&&i.kg.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`):(r.X&&i.kg.log(`[Tracing] Discarding transaction because ${"function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1):(r.X&&i.kg.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1):e.sampled=!1,e}function u(e){return(0,s.i2)(e)||!("number"==typeof e||"boolean"==typeof e)?(r.X&&i.kg.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0)&&!(e>1)||(r.X&&i.kg.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}},70620:(e,t,n)=>{n.d(t,{D:()=>_,g:()=>h});var i=n(54711),s=n(33220),r=n(55668),a=n(7425),o=n(56703),l=n(30914),c=n(7773),u=n(86520),d=n(56105),p=n(41177);class h{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class _{constructor(e={}){this._traceId=e.traceId||(0,i.DM)(),this._spanId=e.spanId||(0,i.DM)().substring(16),this._startTime=e.startTimestamp||(0,s.ph)(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[c.S3]:e.origin||"manual",[c.$J]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[c.$J]}set op(e){this.setAttribute(c.$J,e)}get origin(){return this._attributes[c.S3]}set origin(e){this.setAttribute(c.S3,e)}spanContext(){let{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?d.i0:d.ve}}startChild(e){let t=new _({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);let n=(0,u.G)(this);if(t.transaction=n,o.X&&n){let i=e&&e.op||"< unknown op >",s=(0,d.XU)(t).description||"< unknown name >",a=n.spanContext().spanId,o=`[Tracing] Starting '${i}' span on transaction '${s}' (${a}).`;r.kg.log(o),this._logMessage=o}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach(t=>this.setAttribute(t,e[t]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return(0,p.Q0)(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;let t=(0,u.G)(this);if(o.X&&t&&t.spanContext().spanId!==this._spanId){let e=this._logMessage;e&&r.kg.log(e.replace("Starting","Finishing"))}this._endTime=(0,d.$k)(e)}toTraceparent(){return(0,d.Hb)(this)}toContext(){return(0,a.Jr)({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return(0,d.wy)(this)}getSpanJSON(){return(0,a.Jr)({data:this._getData(),description:this._name,op:this._attributes[c.$J],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[c.S3],_metrics_summary:(0,l.y)(this),profile_id:this._attributes[c.p6],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){let{data:e,_attributes:t}=this,n=Object.keys(e).length>0,i=Object.keys(t).length>0;return n||i?n&&i?{...e,...t}:n?e:t:void 0}}},41177:(e,t,n)=>{var i;function s(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);let n=function(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(t);"unknown_error"!==n&&e.setStatus(n)}n.d(t,{Q0:()=>s}),function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss"}(i||(i={}))},94918:(e,t,n)=>{n.d(t,{I1:()=>m,qp:()=>d,GK:()=>u});var i=n(7425),s=n(69835),r=n(56105),a=n(3148),o=n(36994),l=n(30062),c=n(88900);function u(e,t){let n=h(e);return(0,s.Ok)(()=>(0,o.$e)(e.scope,i=>{let a=(0,s.Gd)(),o=i.getSpan(),c=e.onlyIfParent&&!o?void 0:p(a,{parentSpan:o,spanContext:n,forceTransaction:e.forceTransaction,scope:i});return function(e,t,n=()=>{}){var i;let s;try{s=e()}catch(e){throw t(e),n(),e}return i=s,(0,l.J8)(i)?i.then(e=>(n(),e),e=>{throw t(e),n(),e}):(n(),i)}(()=>t(c),()=>{if(c){let{status:e}=(0,r.XU)(c);e&&"ok"!==e||c.setStatus("internal_error")}},()=>c&&c.end())}))}function d(e){if(!(0,c.z)())return;let t=h(e),n=(0,s.Gd)(),i=e.scope?e.scope.getSpan():(0,o.nZ)().getSpan();if(e.onlyIfParent&&!i)return;let r=(e.scope||(0,o.nZ)()).clone();return p(n,{parentSpan:i,spanContext:t,forceTransaction:e.forceTransaction,scope:r})}function p(e,{parentSpan:t,spanContext:n,forceTransaction:o,scope:l}){var u;let d;if(!(0,c.z)())return;let p=(0,s.aF)();if(t&&!o)d=t.startChild(n);else if(t){let i=(0,a.j)(t),{traceId:s,spanId:o}=t.spanContext(),l=(0,r.Tt)(t);d=e.startTransaction({traceId:s,parentSpanId:o,parentSampled:l,...n,metadata:{dynamicSamplingContext:i,...n.metadata}})}else{let{traceId:t,dsc:i,parentSpanId:s,sampled:r}={...p.getPropagationContext(),...l.getPropagationContext()};d=e.startTransaction({traceId:t,parentSpanId:s,parentSampled:r,...n,metadata:{dynamicSamplingContext:i,...n.metadata}})}return l.setSpan(d),(u=d)&&((0,i.xp)(u,g,p),(0,i.xp)(u,_,l)),d}function h(e){if(e.startTime){let t={...e};return t.startTimestamp=(0,r.$k)(e.startTime),delete t.startTime,t}return e}let _="_sentryScope",g="_sentryIsolationScope";function m(e){return{scope:e[_],isolationScope:e[g]}}},37547:(e,t,n)=>{n.d(t,{Y:()=>h});var i=n(7425),s=n(55668),r=n(56703),a=n(69835),o=n(30914),l=n(7773),c=n(56105),u=n(3148),d=n(70620),p=n(94918);class h extends d.D{constructor(e,t){super(e),this._contexts={},this._hub=t||(0,a.Gd)(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;let n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[l.Zj]&&{source:this._attributes[l.Zj]},...this._attributes[l.TE]&&{sampleRate:this._attributes[l.TE]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(l.Zj,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new d.g(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){let t=(0,c.$k)(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){let e=super.toContext();return(0,i.Jr)({...e,name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return(0,u.j)(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(r.X&&s.kg.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);let t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled){r.X&&s.kg.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","transaction");return}let n=this.spanRecorder?this.spanRecorder.spans.filter(e=>e!==this&&(0,c.XU)(e).timestamp):[];if(this._trimEnd&&n.length>0){let e=n.map(e=>(0,c.XU)(e).timestamp).filter(Boolean);this._endTime=e.reduce((e,t)=>e>t?e:t)}let{scope:a,isolationScope:l}=(0,p.I1)(this),{metadata:d}=this,{source:h}=d,_={contexts:{...this._contexts,trace:(0,c.wy)(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...d,capturedSpanScope:a,capturedSpanIsolationScope:l,...(0,i.Jr)({dynamicSamplingContext:(0,u.j)(this)})},_metrics_summary:(0,o.y)(this),...h&&{transaction_info:{source:h}}};return Object.keys(this._measurements).length>0&&(r.X&&s.kg.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),_.measurements=this._measurements),r.X&&s.kg.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),_}}},97678:(e,t,n)=>{n.d(t,{x1:()=>s});var i=n(69835);function s(e){return(e||(0,i.Gd)()).getScope().getTransaction()}},86520:(e,t,n)=>{n.d(t,{G:()=>i});function i(e){return e.transaction}},88900:(e,t,n)=>{n.d(t,{z:()=>s});var i=n(36994);function s(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let t=(0,i.s3)(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}},56105:(e,t,n)=>{n.d(t,{$k:()=>u,Hb:()=>c,Tt:()=>h,XU:()=>p,i0:()=>o,ve:()=>a,wy:()=>l});var i=n(7425),s=n(28759),r=n(33220);let a=0,o=1;function l(e){let{spanId:t,traceId:n}=e.spanContext(),{data:s,op:r,parent_span_id:a,status:o,tags:l,origin:c}=p(e);return(0,i.Jr)({data:s,op:r,parent_span_id:a,span_id:t,status:o,tags:l,trace_id:n,origin:c})}function c(e){let{traceId:t,spanId:n}=e.spanContext(),i=h(e);return(0,s.$p)(t,n,i)}function u(e){return"number"==typeof e?d(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?d(e.getTime()):(0,r.ph)()}function d(e){return e>9999999999?e/1e3:e}function p(e){return"function"==typeof e.getSpanJSON?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function h(e){let{traceFlags:t}=e.spanContext();return!!(t&o)}},17558:(e,t,n)=>{n.d(t,{EN:()=>c,IQ:()=>u,bU:()=>a});var i=n(24389),s=n(30062),r=n(55668);let a="baggage",o="sentry-",l=/^sentry-/;function c(e){if(!(0,s.HD)(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((e,t)=>{let n=d(t);for(let t of Object.keys(n))e[t]=n[t];return e},{});else{if(!e)return;t=d(e)}let n=Object.entries(t).reduce((e,[t,n])=>(t.match(l)&&(e[t.slice(o.length)]=n),e),{});return Object.keys(n).length>0?n:void 0}function u(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce((e,[t,n],s)=>{let a=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,o=0===s?a:`${e},${a}`;return o.length>8192?(i.X&&r.kg.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):o},"")}(Object.entries(e).reduce((e,[t,n])=>(n&&(e[`${o}${t}`]=n),e),{}))}function d(e){return e.split(",").map(e=>e.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((e,[t,n])=>(e[t]=n,e),{})}},24389:(e,t,n)=>{n.d(t,{X:()=>i});let i="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},28738:(e,t,n)=>{n.d(t,{D2:()=>c,Hj:()=>l,rK:()=>u});var i=n(24389),s=n(55668),r=n(85177);let a={},o={};function l(e,t){a[e]=a[e]||[],a[e].push(t)}function c(e,t){o[e]||(t(),o[e]=!0)}function u(e,t){let n=e&&a[e];if(n)for(let a of n)try{a(t)}catch(t){i.X&&s.kg.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${(0,r.$P)(a)}
Error:`,t)}}},30062:(e,t,n)=>{n.d(t,{HD:()=>r,J8:()=>l,Kj:()=>o,PO:()=>a,V9:()=>u,i2:()=>c});let i=Object.prototype.toString;function s(e,t){return i.call(e)===`[object ${t}]`}function r(e){return s(e,"String")}function a(e){return s(e,"Object")}function o(e){return s(e,"RegExp")}function l(e){return!!(e&&e.then&&"function"==typeof e.then)}function c(e){return"number"==typeof e&&e!=e}function u(e,t){try{return e instanceof t}catch(e){return!1}}},55668:(e,t,n)=>{n.d(t,{Cf:()=>o,kg:()=>l});var i=n(24389),s=n(44795);let r=["debug","info","warn","error","log","assert","trace"],a={};function o(e){if(!("console"in s.GLOBAL_OBJ))return e();let t=s.GLOBAL_OBJ.console,n={},i=Object.keys(a);i.forEach(e=>{let i=a[e];n[e]=t[e],t[e]=i});try{return e()}finally{i.forEach(e=>{t[e]=n[e]})}}let l=function(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return i.X?r.forEach(n=>{t[n]=(...t)=>{e&&o(()=>{s.GLOBAL_OBJ.console[n](`Sentry Logger [${n}]:`,...t)})}}):r.forEach(e=>{t[e]=()=>void 0}),t}()},54711:(e,t,n)=>{n.d(t,{DM:()=>s,lE:()=>r});var i=n(44795);function s(){let e=i.GLOBAL_OBJ,t=e.crypto||e.msCrypto,n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{let e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&n())>>e/4).toString(16))}function r(e){return Array.isArray(e)?e:[e]}},63720:(e,t,n)=>{function i(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function s(e,t){return e.require(t)}function r(t){let n;try{n=s(e,t)}catch(e){}try{let{cwd:i}=s(e,"process");n=s(e,`${i()}/node_modules/${t}`)}catch(e){}return n}n.d(t,{l$:()=>s,KV:()=>i,$y:()=>r}),e=n.hmd(e)},7425:(e,t,n)=>{n.d(t,{Jr:()=>l,hl:()=>a,xp:()=>o});var i=n(24389),s=n(30062),r=n(55668);function a(e,t,n){if(!(t in e))return;let i=e[t],s=n(i);"function"==typeof s&&function(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,o(e,"__sentry_original__",t)}catch(e){}}(s,i),e[t]=s}function o(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){i.X&&r.kg.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function l(e){return function e(t,n){if(function(e){if(!(0,s.PO)(e))return!1;try{let t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(t)){let i=n.get(t);if(void 0!==i)return i;let s={};for(let i of(n.set(t,s),Object.keys(t)))void 0!==t[i]&&(s[i]=e(t[i],n));return s}if(Array.isArray(t)){let i=n.get(t);if(void 0!==i)return i;let s=[];return n.set(t,s),t.forEach(t=>{s.push(e(t,n))}),s}return t}(e,new Map)}},85177:(e,t,n)=>{n.d(t,{$P:()=>s});let i="<anonymous>";function s(e){try{if(!e||"function"!=typeof e)return i;return e.name||i}catch(e){return i}}},33220:(e,t,n)=>{n.d(t,{Z1:()=>a,ph:()=>r,yW:()=>s});var i=n(44795);function s(){return Date.now()/1e3}let r=function(){let{performance:e}=i.GLOBAL_OBJ;if(!e||!e.now)return s;let t=Date.now()-e.now(),n=void 0==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),a=(()=>{let{performance:e}=i.GLOBAL_OBJ;if(!e||!e.now)return;let t=e.now(),n=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+t-n):36e5,r=e.timing&&e.timing.navigationStart,a="number"==typeof r?Math.abs(r+t-n):36e5;return s<36e5||a<36e5?s<=a?e.timeOrigin:r:n})()},28759:(e,t,n)=>{n.d(t,{$p:()=>o,pT:()=>a});var i=n(17558),s=n(54711);let r=RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function a(e,t){let n=function(e){let t;if(!e)return;let n=e.match(r);if(n)return"1"===n[3]?t=!0:"0"===n[3]&&(t=!1),{traceId:n[1],parentSampled:t,parentSpanId:n[2]}}(e),a=(0,i.EN)(t),{traceId:o,parentSpanId:l,parentSampled:c}=n||{};return n?{traceId:o||(0,s.DM)(),parentSpanId:l||(0,s.DM)().substring(16),spanId:(0,s.DM)().substring(16),sampled:c,dsc:a||{}}:{traceId:o||(0,s.DM)(),spanId:(0,s.DM)().substring(16)}}function o(e=(0,s.DM)(),t=(0,s.DM)().substring(16),n){let i="";return void 0!==n&&(i=n?"-1":"-0"),`${e}-${t}${i}`}},44795:(e,t,n)=>{function i(e){return e&&e.Math==Math?e:void 0}n.d(t,{GLOBAL_OBJ:()=>s,R:()=>r,Y:()=>a});let s="object"==typeof globalThis&&i(globalThis)||"object"==typeof self&&i(self)||"object"==typeof global&&i(global)||function(){return this}()||{};function r(){return s}function a(e,t,n){let i=n||s,r=i.__SENTRY__=i.__SENTRY__||{};return r[e]||(r[e]=t())}},77202:(e,t,n)=>{n.d(t,{r:()=>a});var i=n(69835),s=n(62948),r=n(63720);function a(){(0,s.T)(),(0,r.KV)()&&function(){let t=(0,i.cu)();if(!t.__SENTRY__)return;let n={mongodb:()=>new((0,r.l$)(e,"./node/integrations/mongo")).Mongo,mongoose:()=>new((0,r.l$)(e,"./node/integrations/mongo")).Mongo,mysql:()=>new((0,r.l$)(e,"./node/integrations/mysql")).Mysql,pg:()=>new((0,r.l$)(e,"./node/integrations/postgres")).Postgres},s=Object.keys(n).filter(e=>!!(0,r.$y)(e)).map(e=>{try{return n[e]()}catch(e){return}}).filter(e=>e);s.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...s])}()}e=n.hmd(e)},35163:(e,t)=>{t.Z=function(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}},16573:(e,t)=>{t.Z=function(e){return{id:"google",name:"Google",type:"oauth",wellKnown:"https://accounts.google.com/.well-known/openid-configuration",authorization:{params:{scope:"openid email profile"}},idToken:!0,checks:["pkce","state"],profile:e=>({id:e.sub,name:e.name,email:e.email,image:e.picture}),style:{logo:"/google.svg",bg:"#fff",text:"#000"},options:e}}},81629:(e,t,n)=>{function i(e){return{createUser:({id:t,...n})=>e.user.create(s(n)),getUser:t=>e.user.findUnique({where:{id:t}}),getUserByEmail:t=>e.user.findUnique({where:{email:t}}),async getUserByAccount(t){let n=await e.account.findUnique({where:{provider_providerAccountId:t},include:{user:!0}});return n?.user??null},updateUser:({id:t,...n})=>e.user.update({where:{id:t},...s(n)}),deleteUser:t=>e.user.delete({where:{id:t}}),linkAccount:t=>e.account.create({data:t}),unlinkAccount:t=>e.account.delete({where:{provider_providerAccountId:t}}),async getSessionAndUser(t){let n=await e.session.findUnique({where:{sessionToken:t},include:{user:!0}});if(!n)return null;let{user:i,...s}=n;return{user:i,session:s}},createSession:t=>e.session.create(s(t)),updateSession:t=>e.session.update({where:{sessionToken:t.sessionToken},...s(t)}),deleteSession:t=>e.session.delete({where:{sessionToken:t}}),async createVerificationToken(t){let n=await e.verificationToken.create(s(t));return"id"in n&&n.id&&delete n.id,n},async useVerificationToken(t){try{let n=await e.verificationToken.delete({where:{identifier_token:t}});return"id"in n&&n.id&&delete n.id,n}catch(e){if(e&&"object"==typeof e&&"code"in e&&"P2025"===e.code)return null;throw e}},getAccount:async(t,n)=>e.account.findFirst({where:{providerAccountId:t,provider:n}}),createAuthenticator:async t=>e.authenticator.create(s(t)),getAuthenticator:async t=>e.authenticator.findUnique({where:{credentialID:t}}),listAuthenticatorsByUserId:async t=>e.authenticator.findMany({where:{userId:t}}),updateAuthenticatorCounter:async(t,n)=>e.authenticator.update({where:{credentialID:t},data:{counter:n}})}}function s(e){let t={};for(let n in e)void 0!==e[n]&&(t[n]=e[n]);return{data:t}}n.d(t,{N:()=>i})}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),i=t.X(0,[1262,722,4955,8486],()=>n(32576));module.exports=i})();