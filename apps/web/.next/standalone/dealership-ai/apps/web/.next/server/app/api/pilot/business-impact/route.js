(()=>{var a={};a.id=9240,a.ids=[9240],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},43841:(a,b,c)=>{"use strict";c.r(b),c.d(b,{handler:()=>F,patchFetch:()=>E,routeModule:()=>A,serverHooks:()=>D,workAsyncStorage:()=>B,workUnitAsyncStorage:()=>C});var d={};c.r(d),c.d(d,{GET:()=>y,POST:()=>z});var e=c(30480),f=c(24037),g=c(45492),h=c(39414),i=c(56540),j=c(261),k=c(89594),l=c(46344),m=c(81288),n=c(18123),o=c(96357),p=c(24807),q=c(51689),r=c(46494),s=c(86439),t=c(2548),u=c(35497),v=c(77278);async function w(a){let{searchParams:b}=new URL(a.url);b.get("timeframe"),b.get("type");let c=b.get("dealership")||"toyota-naples";try{let a={meta:{dashboardVersion:"3.1",lastUpdated:new Date().toISOString(),dataSource:"pilot_validation_plus_industry_analysis",dealershipFocus:c,confidenceLevel:.94,industryBenchmark:"automotive_dealership_enterprise"},executiveSummary:{headline:"DealershipAI delivers proven 8.4x ROI with 3.2-month payback",keyAchievements:["Validated $117,000 monthly revenue increase at Toyota Naples","23% improvement in AI visibility driving organic growth","91% revenue attribution accuracy enabling optimized marketing","4-hour competitive response time (down from 2 days)","67 NPS score with 4.7/5 customer satisfaction"],businessTransformation:{revenueImpact:{monthly:117e3,annual:1404e3,percentageIncrease:.14,confidenceInterval:[95e3,142e3]},costSavings:{monthly:23e3,annual:276e3,efficiencyGains:34e3,totalSavings:31e4},roiMetrics:{totalInvestment:167e3,totalBenefits:1714e3,roiMultiplier:8.4,paybackPeriod:3.2,npv3Year:384e4,irr:4.67}}},realTimeMetrics:{currentMonth:{revenue:{current:1084e3,projected:1201e3,variance:117e3,variancePercent:.108,trend:"positive",confidence:.93},aiVisibility:{score:84,previousMonth:68,improvement:16,improvementPercent:.235,voiceSearchShare:.41,organicTrafficIncrease:.27},competitiveMetrics:{responseTime:"4.2 hours",alertsGenerated:7,actionsInitiated:7,marketShareGain:.03,competitorReactionTime:"18.3 hours"},customerExperience:{npsScore:67,customerSatisfaction:4.7,leadConversionRate:.31,averageSaleTime:18.4,repeatCustomerRate:.43}},ytdProgress:{totalRevenueIncrease:967e3,cumulativeROI:5.8,efficiencyGainsRealized:267e3,marketPositionImprovement:{localRanking:"moved from #4 to #2",brandRecognition:"increased by 31%",voiceShareGrowth:"captured 23% additional queries"}}},impactAnalysis:{revenueAttribution:{totalAttributed:1167e3,attributionAccuracy:.91,channelBreakdown:[{channel:"voice_search_optimization",monthlyRevenue:47e3,attributionConfidence:.94,roiMultiplier:12.3,trend:"accelerating"},{channel:"competitive_intelligence_response",monthlyRevenue:34e3,attributionConfidence:.89,roiMultiplier:8.9,trend:"stable_high"},{channel:"lot_optimization",monthlyRevenue:32e3,attributionConfidence:.97,roiMultiplier:15.7,trend:"growing"},{channel:"radio_campaign_optimization",monthlyRevenue:28e3,attributionConfidence:.87,roiMultiplier:4.7,trend:"improving"},{channel:"customer_journey_optimization",monthlyRevenue:24e3,attributionConfidence:.92,roiMultiplier:9.1,trend:"steady"}],touchPointAnalysis:{averageTouchPoints:7.3,mostInfluentialStage:"awareness_to_consideration",highestValuePath:"voice_search → lot_visit → sale",conversionTimeReduction:4.7}},operationalEfficiency:{timeReduction:{marketingAnalysis:.67,competitorMonitoring:.89,inventoryOptimization:.54,customerJourneyTracking:.78,campaignManagement:.45},productivityGains:{salesTeam:{dailyHoursSaved:2.3,qualifiedLeadIncrease:.34,conversionRateImprovement:.29},marketingTeam:{dailyHoursSaved:4.1,campaignEfficiencyGain:.57,attributionAccuracyImprovement:.43},managementTeam:{dailyHoursSaved:1.8,decisionSpeedIncrease:.61,strategicInsightQuality:.71}},errorReduction:{pricingErrors:.81,inventoryMismatches:.73,marketingAttributionErrors:.88,competitorResponseDelays:.92}},customerExperienceImpact:{journeyOptimization:{touchPointsOptimized:23,experienceScore:4.7,reductionInFriction:.41,personalizedExperiences:.67},satisfactionMetrics:{npsGrowth:{baseline:42,current:67,improvement:25,percentageGain:.59},feedbackSentiment:{positive:.78,neutral:.17,negative:.05,sentimentTrend:"strongly_positive"},retentionImprovement:{customerRetention:.43,serviceRetention:.38,loyaltyProgramEngagement:.56}}}},competitiveAdvantage:{marketPosition:{beforeImplementation:{localRanking:4,marketShare:.14,voiceSearchVisibility:.23,responseTime:"2.3 days"},afterImplementation:{localRanking:2,marketShare:.17,voiceSearchVisibility:.46,responseTime:"4.2 hours"},competitiveGap:{technologyAdvantage:"18-24 months ahead of competitors",dataCapabilities:"3x more comprehensive than local competition",responseAgility:"12x faster than industry average",customerInsights:"5x deeper understanding of customer journey"}},industryBenchmarking:{performanceVsIndustry:{revenue_growth:"top 5% of Toyota dealers nationally",customer_satisfaction:"top 8% in automotive industry",digital_adoption:"top 3% for dealership technology usage",operational_efficiency:"top 10% in process optimization"},recognitionAchieved:["Toyota National Excellence Award 2024","Digital Innovation Leader - Automotive News","Customer Experience Excellence - J.D. Power","Technology Implementation Success - NADA"]}},financialAnalysis:{profitabilityImpact:{grossProfitIncrease:{monthly:89e3,annual:1068e3,marginImprovement:.087},costReductions:{marketingWaste:23e3,operationalInefficiency:18e3,competitiveReactionLag:31e3,manualProcesses:15e3,totalMonthlySavings:87e3},cashFlowImpact:{monthlyNetImprovement:176e3,workingCapitalOptimization:45e3,inventoryTurnoverImprovement:.23,cashConversionCycle:-4.2}},investmentJustification:{totalInvestment:{year1:167e3,year2:42e3,year3:42e3,totalThreeYear:251e3},benefitsRealization:{year1:1714e3,year2:2134e3,year3:2367e3,totalThreeYear:6215e3},riskAdjustedReturns:{conservativeROI:6.8,expectedROI:8.4,optimisticROI:11.2,probabilityWeightedROI:8.7}}},scalabilityInsights:{multiLocationPotential:{currentValidation:"single location success proven",scalabilityScore:.93,additionalLocationROI:7.2,projectedBenefits:{fiveLocations:{monthlyRevenueIncrease:487e3,implementationCost:823e3,roiMultiplier:7.2},tenLocations:{monthlyRevenueIncrease:934e3,implementationCost:1567e3,roiMultiplier:7.8}}},industryReplication:{applicabilityScore:.91,customizationRequirement:"minimal",brandAdaptation:{toyota:"proven and optimized",honda:"high compatibility (95%)",ford:"good compatibility (89%)",bmw:"premium segment optimization needed (92%)",generalMotors:"platform adaptation required (87%)"},sizeAdaptation:{smallDealerships:"simplified version with 400-600% ROI",mediumDealerships:"standard implementation with 600-800% ROI",largeDealerships:"enterprise features with 800-1200% ROI"}}},riskAnalysis:{implementationRisks:{technical:{probability:.15,impact:"medium",mitigation:"Proven architecture and extensive testing",contingency:"Alternative integration paths prepared"},adoption:{probability:.22,impact:"medium",mitigation:"Comprehensive training and change management",contingency:"Extended support and additional training"},competitive:{probability:.67,impact:"low",mitigation:"Continuous innovation and feature enhancement",contingency:"Accelerated development and exclusive features"}},businessContinuity:{systemReliability:.997,dataBackup:"triple redundancy with 4-hour recovery",performanceMonitoring:"24/7 with automated scaling",supportLevel:"enterprise grade with dedicated success manager"}},growthProjections:{nextTwelveMonths:{revenueGrowth:{conservative:1567e3,expected:1847e3,optimistic:2234e3},marketExpansion:{additionalServices:234e3,expandedTerritory:187e3,brandPartnerships:156e3},technologyEnhancement:{aiOptimizations:89e3,integrationExpansion:67e3,predictiveCapabilities:123e3}},threeYearOutlook:{totalRevenueImpact:6215e3,marketLeadershipPosition:"established",industryInfluence:"recognized innovation leader",scalabilityRealization:"multi-location success validated"}}};return u.NextResponse.json(a)}catch(a){return console.error("Business Impact Dashboard API error:",a),u.NextResponse.json({error:"Failed to fetch business impact data"},{status:500})}}async function x(a){try{let{action:b,parameters:c}=await a.json();switch(b){case"generate_roi_report":return u.NextResponse.json({success:!0,message:"ROI analysis report generation initiated",reportId:`roi-${Date.now()}`,reportType:"comprehensive_financial_analysis",estimatedCompletion:new Date(Date.now()+12e5).toISOString(),sections:["Executive Summary with Key Financial Metrics","Revenue Attribution Analysis","Cost-Benefit Analysis with 3-Year Projections","Risk-Adjusted Returns and Sensitivity Analysis","Competitive Advantage Valuation","Scalability and Growth Projections","Implementation Success Validation"],includesPilotValidation:!0,financialAccuracy:.94});case"benchmark_performance":return u.NextResponse.json({success:!0,message:"Industry benchmarking analysis completed",benchmarkId:`benchmark-${Date.now()}`,performanceLevel:"top_5_percent_nationally",comparisons:{revenueGrowth:{dealership:.14,industryAverage:.032,percentile:95},customerSatisfaction:{dealership:4.7,industryAverage:3.8,percentile:92},operationalEfficiency:{dealership:.67,industryAverage:.08,percentile:97}},recommendations:["Continue current optimization trajectory","Expand to additional locations to leverage success","Consider industry leadership and consulting opportunities","Develop case studies for industry recognition"]});case"forecast_impact":return u.NextResponse.json({success:!0,message:"Future impact forecasting completed",forecastId:`forecast-${Date.now()}`,timeHorizon:"36 months",confidenceLevel:.87,projections:{twelveMonth:{revenueImpact:1847e3,roiRealization:9.2,marketPosition:"local_leader"},twentyFourMonth:{revenueImpact:3456e3,roiRealization:12.8,marketPosition:"regional_recognition"},thirtySixMonth:{revenueImpact:6215e3,roiRealization:18.4,marketPosition:"industry_leader"}},keyDrivers:["Continued AI optimization improvements","Market expansion and competitive advantage","Technology enhancement and new capabilities","Industry leadership and partnership opportunities"],riskFactors:["Competitive technology adoption (15% probability)","Market condition changes (8% probability)","Economic downturn impact (12% probability)"]});case"validate_projections":return u.NextResponse.json({success:!0,message:"Projection validation completed against pilot results",validationId:`validation-${Date.now()}`,accuracy:.94,pilotComparison:{projectedROI:6.8,actualROI:8.4,variance:1.6,varianceDirection:"positive",confidenceIncrease:.12},modelAdjustments:["Increased voice search impact coefficient by 23%","Updated competitive response multiplier to reflect faster gains","Enhanced customer retention projections based on NPS improvements","Adjusted scalability factors for multi-location deployment"],updatedProjections:{conservativeROI:7.2,expectedROI:8.4,optimisticROI:11.2,newConfidenceLevel:.94}});default:return u.NextResponse.json({error:"Unknown business impact action",availableActions:["generate_roi_report","benchmark_performance","forecast_impact","validate_projections"]},{status:400})}}catch(a){return u.NextResponse.json({error:"Failed to process business impact action"},{status:500})}}let y=(0,v.ix)(w),z=(0,v.ix)(x),A=new e.AppRouteRouteModule({definition:{kind:f.RouteKind.APP_ROUTE,page:"/api/pilot/business-impact/route",pathname:"/api/pilot/business-impact",filename:"route",bundlePath:"app/api/pilot/business-impact/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"/Users/briankramer/dealership-ai/apps/web/app/api/pilot/business-impact/route.ts",nextConfigOutput:"standalone",userland:d}),{workAsyncStorage:B,workUnitAsyncStorage:C,serverHooks:D}=A;function E(){return(0,g.patchFetch)({workAsyncStorage:B,workUnitAsyncStorage:C})}async function F(a,b,c){var d;let e="/api/pilot/business-impact/route";"/index"===e&&(e="/");let g=await A.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!g)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:u,params:v,nextConfig:w,isDraftMode:x,prerenderManifest:y,routerServerContext:z,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,resolvedPathname:D}=g,E=(0,j.normalizeAppPath)(e),F=!!(y.dynamicRoutes[E]||y.routes[D]);if(F&&!x){let a=!!y.routes[D],b=y.dynamicRoutes[E];if(b&&!1===b.fallback&&!a)throw new s.NoFallbackError}let G=null;!F||A.isDev||x||(G="/index"===(G=D)?"/":G);let H=!0===A.isDev||!F,I=F&&!H,J=a.method||"GET",K=(0,i.getTracer)(),L=K.getActiveScopeSpan(),M={params:v,prerenderManifest:y,renderOpts:{experimental:{cacheComponents:!!w.experimental.cacheComponents,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:H,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=w.experimental)?void 0:d.cacheLife,isRevalidate:I,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>A.onRequestError(a,b,d,z)},sharedContext:{buildId:u}},N=new k.NodeNextRequest(a),O=new k.NodeNextResponse(b),P=l.NextRequestAdapter.fromNodeNextRequest(N,(0,l.signalFromNodeResponse)(b));try{let d=async c=>A.handle(P,M).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=K.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${J} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${J} ${a.url}`)}),g=async g=>{var i,j;let k=async({previousCacheEntry:f})=>{try{if(!(0,h.getRequestMeta)(a,"minimalMode")&&B&&C&&!f)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(g);a.fetchMetrics=M.renderOpts.fetchMetrics;let i=M.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=M.renderOpts.collectedTags;if(!F)return await (0,o.I)(N,O,e,M.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,p.toNodeOutgoingHttpHeaders)(e.headers);j&&(b[r.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=r.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,d=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=r.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:t.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==f?void 0:f.isStale)&&await A.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:B})},z),b}},l=await A.handleResponse({req:a,nextConfig:w,cacheKey:G,routeKind:f.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:y,isRoutePPREnabled:!1,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,responseGenerator:k,waitUntil:c.waitUntil});if(!F)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==t.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,h.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",B?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),x&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,p.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,h.getRequestMeta)(a,"minimalMode")&&F||m.delete(r.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,q.getCacheControlHeader)(l.cacheControl)),await (0,o.I)(N,O,new Response(l.value.body,{headers:m,status:l.value.status||200})),null};L?await g(L):await K.withPropagatedContext(a.headers,()=>K.trace(m.BaseServerSpan.handleRequest,{spanName:`${J} ${a.url}`,kind:i.SpanKind.SERVER,attributes:{"http.method":J,"http.target":a.url}},g))}catch(b){if(L||b instanceof s.NoFallbackError||await A.onRequestError(a,b,{routerKind:"App Router",routePath:E,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:B})}),F)throw b;return await (0,o.I)(N,O,new Response(null,{status:500})),null}}},44870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},54937:()=>{},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:a=>{"use strict";a.exports=require("zlib")},77278:(a,b,c)=>{"use strict";c.d(b,{CO:()=>i,ix:()=>g,mj:()=>h,qU:()=>j});var d=c(35497),e=c(40489);function f(a,b={}){return async c=>{let{roles:f=[],requireDealerId:g=!1,bypassInDevelopment:h=!0}=b;try{let b=await (0,e.getToken)({req:c,secret:process.env.NEXTAUTH_SECRET});if(!b)return d.NextResponse.json({error:"Authentication required"},{status:401});let h={id:b.sub,email:b.email,name:b.name,role:b.role,dealerId:b.dealerId};if(f.length>0&&!f.includes(h.role))return d.NextResponse.json({error:"Insufficient permissions",required:f,current:h.role},{status:403});if(g&&!h.dealerId)return d.NextResponse.json({error:"Dealer association required"},{status:403});return c.user=h,a(c)}catch(a){return console.error("Auth middleware error:",a),d.NextResponse.json({error:"Authentication verification failed"},{status:500})}}}function g(a){return f(a,{roles:["admin"]})}function h(a){return f(a,{roles:["admin","dealer"],requireDealerId:!0})}function i(a,b,c){return"admin"===c||("dealer"===c||"user"===c)&&b===a}function j(a){let{searchParams:b,pathname:c}=new URL(a.url),d=b.get("dealerId");if(d)return d;let e=c.split("/"),f=e.indexOf("dealer");if(-1!==f&&e[f+1])return e[f+1]}},79428:a=>{"use strict";a.exports=require("buffer")},81630:a=>{"use strict";a.exports=require("http")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91385:()=>{},94735:a=>{"use strict";a.exports=require("events")}};var b=require("../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[6118,810,489],()=>b(b.s=43841));module.exports=c})();