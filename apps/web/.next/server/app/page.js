(()=>{var e={};e.id=1931,e.ids=[1931],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},88286:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d});var a=t(21650),r=t(51150),l=t(7516),i=t.n(l),n=t(65037),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9052)),"/Users/briankramer/Documents/GitHub/dealership-ai/apps/web/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,32628)),"/Users/briankramer/Documents/GitHub/dealership-ai/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,138,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/briankramer/Documents/GitHub/dealership-ai/apps/web/app/page.tsx"],x="/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65194:(e,s,t)=>{Promise.resolve().then(t.bind(t,18844))},76281:(e,s,t)=>{Promise.resolve().then(t.bind(t,50980))},7143:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,77255,23)),Promise.resolve().then(t.t.bind(t,984,23)),Promise.resolve().then(t.t.bind(t,17270,23)),Promise.resolve().then(t.t.bind(t,73649,23)),Promise.resolve().then(t.t.bind(t,22985,23)),Promise.resolve().then(t.t.bind(t,93810,23))},50980:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eT});var a=t(76637),r=t(4334),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var n=(e,s)=>{let t=(0,r.forwardRef)(({color:t="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:o,children:d,...c},x)=>(0,r.createElement)("svg",{ref:x,...l,width:a,height:a,stroke:t,strokeWidth:o?24*Number(n)/Number(a):n,className:`lucide lucide-${i(e)}`,...c},[...s.map(([e,s])=>(0,r.createElement)(e,s)),...(Array.isArray(d)?d:[d])||[]]));return t.displayName=`${e}`,t};let o=n("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),d=n("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),c=n("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),x=n("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),m=n("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),h=n("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),u=n("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),p=n("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),g=n("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b={radius:{md:"12px",lg:"16px"}};function y({children:e,className:s=""}){return a.jsx("div",{className:`border ${s}`,style:{borderColor:"#1f2937",background:"#0f172a",borderRadius:b.radius.lg,padding:16},children:e})}function j({title:e,value:s,sub:t,progress:r}){return(0,a.jsxs)(y,{children:[a.jsx("div",{className:"text-gray-400 text-sm",children:e}),a.jsx("div",{className:"text-2xl font-semibold",children:s}),"number"==typeof r&&a.jsx("div",{className:"mt-2 h-2 bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-[#0EA5E9] to-[#38BDF8]",style:{width:`${Math.max(0,Math.min(100,r))}%`}})}),t&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t})]})}function f({children:e,className:s=""}){return a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full bg-gray-800 text-gray-300 border border-gray-700 ${s}`,children:e})}var v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let N=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var w=(e,s)=>{let t=(0,r.forwardRef)(({color:t="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,children:n,...o},d)=>(0,r.createElement)("svg",{ref:d,...v,width:a,height:a,stroke:t,strokeWidth:i?24*Number(l)/Number(a):l,className:`lucide lucide-${N(e)}`,...o},[...s.map(([e,s])=>(0,r.createElement)(e,s)),...(Array.isArray(n)?n:[n])||[]]));return t.displayName=`${e}`,t};let k=w("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),S=w("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),C=w("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),E=w("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),M=w("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),P=w("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),$=w("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),T={1:{name:"Starter",limits:{features:{voiceMinutes:30}}},2:{name:"Professional",limits:{features:{voiceMinutes:120}}},3:{name:"Enterprise",limits:{features:{voiceMinutes:500}}},4:{name:"Enterprise Plus",limits:{features:{voiceMinutes:2e3}}}};function O({dealerId:e="demo-dealer",userTier:s=1,businessInfo:t={},onUpgrade:l}){let[i,n]=(0,r.useState)([{id:1,type:"assistant",content:"\uD83D\uDC4B Hi! I'm your AI Assistant. I can help you with customer inquiries, inventory questions, and dealership operations. What can I help you with today?",timestamp:new Date}]),[o,d]=(0,r.useState)(""),[c,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),[g,b]=(0,r.useState)({remaining:null,resetTime:null}),y=(0,r.useRef)(null),j=(0,r.useRef)(null),v=T[s]||T[1],N=s<4;(0,r.useEffect)(()=>{w()},[s]),(0,r.useEffect)(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[i]);let w=async()=>{try{let t=await fetch(`/api/rate-limit/check?dealerId=${e}&tier=${s}`);if(t.ok){let e=await t.json();b(e.usage),p(e.status)}}catch(e){console.error("Rate limit check failed:",e)}},O=async a=>{let r=a||o.trim();if(!r||c)return;if("exceeded"===u){n(e=>[...e,{id:Date.now(),type:"error",content:"Rate limit exceeded. Please wait before sending another message.",timestamp:new Date}]);return}let l={id:Date.now(),type:"user",content:r,timestamp:new Date};n(e=>[...e,l]),d(""),x(!0);try{let a=await fetch("/api/ai-assistant/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,dealerId:e,userTier:s,businessInfo:t,conversationHistory:i.slice(-10)})});if(a.ok){let e=await a.json(),s={id:Date.now()+1,type:"assistant",content:e.message,timestamp:new Date,tokens:e.tokens,cost:e.cost,functions:e.functions};n(e=>[...e,s]),b(e.usage)}else throw Error("Failed to send message")}catch(e){n(e=>[...e,{id:Date.now()+1,type:"error",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date}])}finally{x(!1)}},A=e=>{if("speechSynthesis"in window){let s=new SpeechSynthesisUtterance(e);s.rate=.9,s.pitch=1,window.speechSynthesis.speak(s)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full max-h-[600px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full grid place-items-center",children:"\uD83E\uDD16"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold text-slate-100 flex items-center gap-2",children:["AI Assistant",a.jsx(f,{children:v.name})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-400",children:[g?.remaining||"?"," messages left"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["exceeded"===u&&a.jsx(k,{className:"w-5 h-5 text-red-400"}),s<4&&N&&l&&(0,a.jsxs)("button",{onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:[a.jsx(S,{className:"w-3 h-3"}),"Upgrade"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map(e=>(0,a.jsxs)("div",{className:`p-3 rounded-lg max-w-[80%] ${"user"===e.type?"bg-blue-600 text-white ml-auto":"error"===e.type?"bg-red-900/50 text-red-200 border border-red-700":"bg-slate-700 text-slate-100"}`,children:[a.jsx("div",{className:"whitespace-pre-wrap",children:e.content}),e.functions&&e.functions.length>0&&a.jsx("div",{className:"mt-2 pt-2 border-t border-slate-600",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(C,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-xs text-slate-400",children:"Functions:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.functions.map((e,s)=>a.jsx(f,{children:e},s))})]})}),"assistant"===e.type&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-400",children:e.timestamp.toLocaleTimeString()}),e.tokens&&(0,a.jsxs)(f,{children:[e.tokens," tokens"]}),e.cost&&(0,a.jsxs)(f,{children:["$",e.cost.toFixed(3)]})]}),a.jsx("button",{onClick:()=>A(e.content),className:"p-1 text-slate-400 hover:text-slate-200 transition-colors",title:"Read aloud",children:a.jsx(E,{className:"w-3 h-3"})})]})]},e.id)),c&&a.jsx("div",{className:"bg-slate-700 text-slate-100 p-3 rounded-lg max-w-[80%]",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full"}),"AI Assistant is thinking..."]})}),a.jsx("div",{ref:y})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-slate-700",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx("input",{type:"text",value:o,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&O(),placeholder:"exceeded"===u?"Rate limit exceeded...":"Ask me anything...",disabled:c||"exceeded"===u,className:"w-full px-3 py-2 pr-10 bg-slate-700 text-slate-100 border border-slate-600 rounded-lg focus:outline-none focus:border-blue-500 disabled:opacity-50"}),m&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})})]}),a.jsx("button",{onClick:m?()=>{j.current&&j.current.stop()}:()=>{if("webkitSpeechRecognition"in window){let e=new window.webkitSpeechRecognition;e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onstart=()=>h(!0),e.onresult=e=>{d(e.results[0][0].transcript),h(!1)},e.onerror=()=>h(!1),e.onend=()=>h(!1),e.start(),j.current=e}},disabled:c||"exceeded"===u,className:"p-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg hover:bg-slate-600 disabled:opacity-50 transition-colors",title:m?"Stop listening":"Start voice input",children:m?a.jsx(M,{className:"w-5 h-5"}):a.jsx(P,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>O(),disabled:!o.trim()||c||"exceeded"===u,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",title:"Send message",children:a.jsx($,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-500 flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["Tier ",s,": ",v.name]}),g.resetTime&&(0,a.jsxs)("span",{children:["Resets: ",g.resetTime.toLocaleTimeString()]})]})]})]})}var A=t(37784),F=t(63170),L=t(49621),R=t(84548),I=t(69315),D=t(28235),q=t(13286),_=t(79090),B=t(22466);let z=n("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),G=n("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),U=n("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),W=n("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),H=n("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function V({dealerId:e}){let[s,t]=(0,r.useState)(null),[l,i]=(0,r.useState)(!0),[n,o]=(0,r.useState)(null),x=async()=>{try{i(!0);let s=await fetch(`/api/dashboard/enhanced?dealerId=${e}&location=Naples, FL`);if(s.ok){let e=await s.json();t(e),o(new Date)}}catch(e){console.error("Failed to fetch enhanced dashboard data:",e)}finally{i(!1)}};if((0,r.useEffect)(()=>{x()},[e]),l&&!s)return a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>a.jsx(y,{children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-8 bg-gray-700 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-2 bg-gray-700 rounded w-full"})]})},e))})});if(!s)return a.jsx("div",{children:"No data available"});let m=[{period:"Month 1",SEO:s.charts.scoreProgression.seo[0],AEO:s.charts.scoreProgression.aeo[0],GEO:s.charts.scoreProgression.geo[0]},{period:"Month 2",SEO:s.charts.scoreProgression.seo[1],AEO:s.charts.scoreProgression.aeo[1],GEO:s.charts.scoreProgression.geo[1]},{period:"Month 3",SEO:s.charts.scoreProgression.seo[2],AEO:s.charts.scoreProgression.aeo[2],GEO:s.charts.scoreProgression.geo[2]},{period:"Current",SEO:s.charts.scoreProgression.seo[3],AEO:s.charts.scoreProgression.aeo[3],GEO:s.charts.scoreProgression.geo[3]}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Enhanced Dashboard"}),a.jsx(f,{className:"bg-purple-800 text-purple-200 border-purple-700",children:s.metadata.algorithm}),n&&(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["Updated: ",n.toLocaleTimeString()]})]}),(0,a.jsxs)("button",{onClick:x,disabled:l,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[a.jsx(W,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Refresh"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[a.jsx(j,{title:"Revenue at Risk",value:s.metrics.revenueAtRisk,sub:`${s.insights.estimatedImpact.annual.toLocaleString()}/year potential`,progress:100-s.scores.aeo.overall}),a.jsx(j,{title:"AI Visibility",value:s.metrics.aiVisibility,sub:"Answer Engine Optimization",progress:s.scores.aeo.overall}),a.jsx(j,{title:"Website Health",value:s.metrics.websiteHealth,sub:"Technical SEO Foundation",progress:s.scores.seo.overall}),a.jsx(j,{title:"Authority Score",value:s.metrics.authorityScore,sub:`Market position: ${s.competitive.marketPosition}`,progress:s.metrics.authorityScore})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(y,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"Risk Assessment"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"HIGH":return a.jsx(z,{className:"w-4 h-4 text-red-400"});case"MEDIUM":return a.jsx(G,{className:"w-4 h-4 text-yellow-400"});case"LOW":return a.jsx(U,{className:"w-4 h-4 text-green-400"});default:return null}})(s.insights.riskLevel),(0,a.jsxs)("span",{className:`text-lg font-medium ${(e=>{switch(e){case"HIGH":return"text-red-400";case"MEDIUM":return"text-yellow-400";case"LOW":return"text-green-400";default:return"text-gray-400"}})(s.insights.riskLevel)}`,children:[s.insights.riskLevel," RISK"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Top Strength:"}),a.jsx("span",{className:"ml-2 text-green-400",children:s.insights.topStrength})]}),(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Primary Weakness:"}),a.jsx("span",{className:"ml-2 text-red-400",children:s.insights.primaryWeakness})]})]})]})}),a.jsx(y,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"Quick Wins"}),a.jsx("div",{className:"space-y-2",children:s.insights.quickWins.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(U,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-gray-300",children:e})]},s))})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx(y,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c,{className:"w-5 h-5 text-blue-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"SEO Score"}),a.jsx("span",{className:"text-2xl font-bold text-blue-400",children:s.scores.seo.overall})]}),a.jsx("div",{className:"space-y-3",children:Object.entries(s.scores.seo.breakdown).map(([e,s])=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-400 capitalize",children:e}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-20 h-2 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-blue-400 transition-all duration-300",style:{width:`${s}%`}})}),a.jsx("span",{className:"text-sm font-medium w-8",children:s})]})]},e))})]})}),a.jsx(y,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d,{className:"w-5 h-5 text-purple-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"AEO Score"}),a.jsx("span",{className:"text-2xl font-bold text-purple-400",children:s.scores.aeo.overall})]}),a.jsx("div",{className:"space-y-3",children:Object.entries(s.scores.aeo.breakdown).map(([e,s])=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-400 capitalize",children:"faqSchema"===e?"FAQ Schema":e}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-20 h-2 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-400 transition-all duration-300",style:{width:`${s}%`}})}),a.jsx("span",{className:"text-sm font-medium w-8",children:s})]})]},e))})]})}),a.jsx(y,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(H,{className:"w-5 h-5 text-green-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"GEO Score"}),a.jsx("span",{className:"text-2xl font-bold text-green-400",children:s.scores.geo.overall})]}),a.jsx("div",{className:"space-y-3",children:Object.entries(s.scores.geo.breakdown).map(([e,s])=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-400 capitalize",children:"schemaMatch"===e?"Schema Match":e}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-20 h-2 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-400 transition-all duration-300",style:{width:`${s}%`}})}),a.jsx("span",{className:"text-sm font-medium w-8",children:s})]})]},e))})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(y,{children:[a.jsx("div",{className:"text-sm text-gray-300 mb-3",children:"Score Progression (SEO/AEO/GEO)"}),a.jsx(A.h,{width:"100%",height:220,children:(0,a.jsxs)(F.w,{data:m,margin:{top:8,right:8,left:0,bottom:0},children:[a.jsx(L.q,{strokeDasharray:"3 3"}),a.jsx(R.K,{dataKey:"period"}),a.jsx(I.B,{}),a.jsx(D.u,{}),a.jsx(q.x,{type:"monotone",dataKey:"SEO",stroke:"#3B82F6",strokeWidth:2,dot:!1}),a.jsx(q.x,{type:"monotone",dataKey:"AEO",stroke:"#A855F7",strokeWidth:2,dot:!1}),a.jsx(q.x,{type:"monotone",dataKey:"GEO",stroke:"#10B981",strokeWidth:2,dot:!1})]})})]}),(0,a.jsxs)(y,{children:[a.jsx("div",{className:"text-sm text-gray-300 mb-3",children:"Weekly Revenue Trend"}),a.jsx(A.h,{width:"100%",height:220,children:(0,a.jsxs)(_.v,{data:s.charts.weeklyRevenue,margin:{top:8,right:8,left:0,bottom:0},children:[a.jsx(L.q,{strokeDasharray:"3 3"}),a.jsx(R.K,{dataKey:"w"}),a.jsx(I.B,{}),a.jsx(D.u,{formatter:e=>[`$${e.toLocaleString()}`,"Revenue"]}),a.jsx(B.$,{dataKey:"rev",fill:"#0EA5E9"})]})})]})]}),(0,a.jsxs)(y,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-100 mb-4",children:"Priority Recommendations"}),a.jsx("div",{className:"space-y-3",children:s.recommendations.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-700/50 rounded-lg",children:[a.jsx("div",{className:`px-2 py-1 text-xs rounded font-medium ${"HIGH"===e.priority?"bg-red-800 text-red-200":"MEDIUM"===e.priority?"bg-yellow-800 text-yellow-200":"bg-green-800 text-green-200"}`,children:e.priority}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-100",children:e.action}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,a.jsxs)("span",{className:"mr-4",children:["Impact: ",e.impact]}),(0,a.jsxs)("span",{children:["Effort: ",e.effort]})]})]})]},s))})]}),a.jsx(y,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{children:["Confidence: ",s.metadata.confidence,"%"]}),(0,a.jsxs)("span",{children:["Sources: ",s.metadata.sources.length," integrated"]})]}),(0,a.jsxs)("span",{children:["Last Analysis: ",new Date(s.metadata.lastUpdated).toLocaleString()]})]})})]})}function J({dealerId:e}){return a.jsx(V,{dealerId:e})}function K({dealerId:e}){return(0,a.jsxs)(y,{children:[(0,a.jsxs)("div",{className:"text-sm font-semibold mb-3",children:["AI Platform Rankings — ",e]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"text-left border-b",children:[a.jsx("th",{className:"py-2 pr-4",children:"Platform"}),a.jsx("th",{className:"py-2 pr-4",children:"Visible"}),a.jsx("th",{className:"py-2 pr-4",children:"Visibility"}),a.jsx("th",{className:"py-2 pr-4",children:"Latency"}),a.jsx("th",{className:"py-2 pr-4",children:"Trend"})]})}),a.jsx("tbody",{children:[{platform:"ChatGPT",visible:!0,visibility:91,latencyMs:620,trend:"+2%"},{platform:"Claude",visible:!0,visibility:88,latencyMs:540,trend:"+1%"},{platform:"Perplexity",visible:!1,visibility:48,latencyMs:700,trend:"–"}].map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0",children:[a.jsx("td",{className:"py-2 pr-4",children:e.platform}),a.jsx("td",{className:"py-2 pr-4",children:e.visible?"yes":"no"}),(0,a.jsxs)("td",{className:"py-2 pr-4",children:[e.visibility,"%"]}),(0,a.jsxs)("td",{className:"py-2 pr-4",children:[e.latencyMs," ms"]}),a.jsx("td",{className:"py-2 pr-4",children:e.trend})]},e.platform))})]})})]})}function Z({dealerId:e}){let s=[{intent:"oil change naples fl",included:!0,lastSeen:new Date().toISOString()},{intent:"toyota service naples",included:!1,lastSeen:new Date().toISOString()}],t=s.filter(e=>e.included).length;return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(y,{children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-6 text-sm",children:[(0,a.jsxs)("div",{children:["Dealer: ",a.jsx("b",{children:e})]}),(0,a.jsxs)("div",{children:["Inclusion Rate: ",(0,a.jsxs)("b",{children:[Math.round(t/s.length*100),"%"]})," (",t,"/",s.length,")"]}),(0,a.jsxs)("div",{children:["Sampled: ",new Date().toLocaleString()]})]})}),(0,a.jsxs)(y,{children:[a.jsx("div",{className:"text-sm font-semibold mb-2",children:"Intents"}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"text-left border-b",children:[a.jsx("th",{className:"py-2 pr-4",children:"Intent"}),a.jsx("th",{className:"py-2 pr-4",children:"Included"}),a.jsx("th",{className:"py-2 pr-4",children:"Last Seen"})]})}),a.jsx("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0",children:[a.jsx("td",{className:"py-2 pr-4",children:e.intent}),a.jsx("td",{className:"py-2 pr-4",children:e.included?"yes":"no"}),a.jsx("td",{className:"py-2 pr-4",children:new Date(e.lastSeen).toLocaleString()})]},e.intent))})]})})]})]})}function Q({dealerId:e}){let s={total:1243,last7d:92},t={pos:68,neu:22,neg:10};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(j,{title:"Total Mentions",value:s.total}),a.jsx(j,{title:"Mentions (7d)",value:s.last7d}),a.jsx(j,{title:"Pos/Neu/Neg",value:`${t.pos}/${t.neu}/${t.neg}`})]}),a.jsx(y,{children:(0,a.jsxs)("div",{className:"text-sm",children:["Live UGC feed stub for ",a.jsx("b",{children:e}),". Wire platforms later."]})})]})}function X({dealerId:e}){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[a.jsx(j,{title:"Schema Coverage",value:"73%",progress:73}),a.jsx(j,{title:"Critical Errors",value:7}),a.jsx(j,{title:"Validation Score",value:"8.2/10",progress:Math.round(82)}),a.jsx(j,{title:"Rich Results",value:"94%",progress:94})]}),a.jsx(y,{children:a.jsx("div",{className:"text-sm",children:"Generate JSON-LD Fix → wire to auto-fix task queue later."})})]})}var Y=t(44590),ee=t(52075),es=t(24851),et=t(67094),ea=t(86112);let er=w("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),el=w("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ei=w("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),en=w("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),eo=w("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ed=w("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ec=w("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),ex=w("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),em=w("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),eh=w("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),eu=w("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ep=w("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),eg=w("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),eb=w("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);function ey(e={}){let[s,t]=(0,r.useState)({prompts:[],stats:null,loading:!1,error:null,validationErrors:[]}),a=(0,r.useCallback)(async(e={})=>{t(e=>({...e,loading:!0,error:null}));try{let s=new URLSearchParams;e.category&&s.append("category",e.category),e.intent&&s.append("intent",e.intent),e.language&&s.append("language",e.language),e.tags&&s.append("tags",e.tags),e.validate&&s.append("validate","true");let a=await fetch(`/api/prompts?${s.toString()}`);if(!a.ok)throw Error(`Failed to fetch prompts: ${a.statusText}`);let r=await a.json();t(e=>({...e,prompts:r.prompts||[],stats:r.stats||null,validationErrors:r.validation_errors||[],loading:!1}))}catch(e){t(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch prompts",loading:!1}))}},[]);(0,r.useEffect)(()=>{a(e)},[a,e.category,e.intent,e.language,e.tags,e.validate]);let l=(0,r.useCallback)(s=>a(s||e),[a,e]);return{...s,refetch:l}}function ej(){let[e,s]=(0,r.useState)([]),t=(0,r.useCallback)(e=>{let t=Math.random().toString(36).substr(2,9),r={...e,id:t,timestamp:Date.now(),duration:e.duration??5e3};return s(e=>[...e,r]),!e.persistent&&r.duration>0&&setTimeout(()=>{a(t)},r.duration),t},[]),a=(0,r.useCallback)(e=>{s(s=>s.filter(s=>s.id!==e))},[]),l=(0,r.useCallback)(()=>{s([])},[]),i=(0,r.useCallback)((e,s,a)=>t({...a,title:e,message:s,type:"success"}),[t]),n=(0,r.useCallback)((e,s,a)=>t({...a,title:e,message:s,type:"error",duration:0,persistent:!0}),[t]),o=(0,r.useCallback)((e,s,a)=>t({...a,title:e,message:s,type:"warning"}),[t]),d=(0,r.useCallback)((e,s,a)=>t({...a,title:e,message:s,type:"info"}),[t]);return{toasts:e,addToast:t,removeToast:a,clearAll:l,success:i,error:n,warning:o,info:d}}function ef({onToggle:e,className:s=""}){let[t,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let s=localStorage.getItem("dealershipai-admin-mode");if(s){let t=JSON.parse(s);l(t),e?.(t)}},[e]);let o=async()=>{n(!0);try{let s=!t;localStorage.setItem("dealershipai-admin-mode",JSON.stringify(s)),l(s),e?.(s)}catch(e){console.error("Failed to toggle admin mode:",e),l(!t)}finally{n(!1)}};return(0,a.jsxs)("div",{className:`flex items-center space-x-3 ${s}`,children:[a.jsx("span",{className:`text-sm font-medium ${t?"text-red-700":"text-gray-700"}`,children:t?"Admin Mode":"User Mode"}),a.jsx("button",{type:"button",onClick:o,disabled:i,className:`${t?"bg-red-600":"bg-gray-200"} ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"} relative inline-flex h-6 w-11 flex-shrink-0 rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2`,role:"switch","aria-checked":t,"aria-label":"Toggle admin mode",children:a.jsx("span",{"aria-hidden":"true",className:`${t?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})}),t&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.jsx("span",{className:"text-xs text-red-600 font-medium",children:"DEBUG"})]})]})}function ev({toast:e,onRemove:s}){return(0,r.useEffect)(()=>{if(!e.persistent&&e.duration>0){let t=setTimeout(()=>s(e.id),e.duration);return()=>clearTimeout(t)}},[e.id,e.duration,e.persistent,s]),a.jsx("div",{className:`p-4 border rounded-lg shadow-sm ${(()=>{switch(e.type){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}})()} transition-all duration-300 ease-in-out`,children:(0,a.jsxs)("div",{className:"flex",children:[(()=>{switch(e.type){case"success":return a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})});case"error":return a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-5 h-5 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})});case"warning":return a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})});case"info":return a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})})}})(),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.title}),e.message&&a.jsx("p",{className:"mt-1 text-sm text-gray-700",children:e.message}),e.action&&a.jsx("div",{className:"mt-2",children:a.jsx("button",{className:"text-sm font-medium text-blue-600 hover:text-blue-500",onClick:e.action.onClick,children:e.action.label})})]}),a.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:a.jsx("button",{className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600",onClick:()=>s(e.id),children:a.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})}function eN(){let{toasts:e,removeToast:s}=ej();return 0===e.length?null:a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 w-96",children:e.map(e=>a.jsx(ev,{toast:e,onRemove:s},e.id))})}function ew({queueName:e="default"}){let[s,t]=(0,r.useState)(!1),{metrics:l,loading:i}=function(e="default",s=5e3){let[t,a]=(0,r.useState)({metrics:null,loading:!0,error:null}),l=(0,r.useCallback)(async()=>{try{let s=await fetch(`/api/queue/metrics?queue=${e}`);if(!s.ok)throw Error(`Failed to fetch metrics: ${s.statusText}`);let t=await s.json();a(e=>({...e,metrics:t.metrics,loading:!1,error:null}))}catch(e){a(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch metrics",loading:!1}))}},[e]);return(0,r.useEffect)(()=>{if(l(),s>0){let e=setInterval(l,s);return()=>clearInterval(e)}},[l,s]),{...t,refetch:l}}(e,5e3),{jobs:n,loading:o,retryJob:d,removeJob:c}=function(e="default",s={}){let[t,a]=(0,r.useState)({jobs:[],totalCount:0,loading:!0,error:null}),l=(0,r.useCallback)(async(s={})=>{a(e=>({...e,loading:!0,error:null}));try{let t=new URLSearchParams({queue:e,...s,limit:s.limit?.toString()||"50",offset:s.offset?.toString()||"0"});s.state&&t.append("state",s.state),s.search&&t.append("search",s.search);let r=await fetch(`/api/queue/jobs?${t.toString()}`);if(!r.ok)throw Error(`Failed to fetch jobs: ${r.statusText}`);let l=await r.json();a(e=>({...e,jobs:l.jobs||[],totalCount:l.total_count||0,loading:!1}))}catch(e){a(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch jobs",loading:!1}))}},[e]);(0,r.useEffect)(()=>{l(s)},[l,JSON.stringify(s)]);let i=(0,r.useCallback)(async e=>{try{let s=await fetch(`/api/queue/job/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"retry"})});if(!s.ok)throw Error(`Failed to retry job: ${s.statusText}`);return await l(),!0}catch(e){return console.error("Failed to retry job:",e),!1}},[l]),n=(0,r.useCallback)(async e=>{try{let s=await fetch(`/api/queue/job/${e}`,{method:"DELETE"});if(!s.ok)throw Error(`Failed to remove job: ${s.statusText}`);return await l(),!0}catch(e){return console.error("Failed to remove job:",e),!1}},[l]);return{...t,refetch:l,retryJob:i,removeJob:n}}(e,{limit:10}),{control:x,pauseQueue:m,resumeQueue:h,drainQueue:u,actionLoading:p}=function(e="default"){let[s,t]=(0,r.useState)({control:null,loading:!0,error:null,actionLoading:!1}),a=(0,r.useCallback)(async()=>{try{let s=await fetch(`/api/queue/control?queue=${e}`);if(!s.ok)throw Error(`Failed to fetch control status: ${s.statusText}`);let a=await s.json();t(e=>({...e,control:a,loading:!1,error:null}))}catch(e){t(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch control status",loading:!1}))}},[e]);(0,r.useEffect)(()=>{a()},[a]);let l=(0,r.useCallback)(async s=>{t(e=>({...e,actionLoading:!0,error:null}));try{let r=await fetch("/api/queue/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queue:e,action:s})});if(!r.ok)throw Error(`Failed to execute ${s}: ${r.statusText}`);return await a(),t(e=>({...e,actionLoading:!1})),!0}catch(e){return t(t=>({...t,error:e instanceof Error?e.message:`Failed to execute ${s}`,actionLoading:!1})),!1}},[e,a]),i=(0,r.useCallback)(async(s,a)=>{t(e=>({...e,actionLoading:!0,error:null}));try{let r=await fetch("/api/queue/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queue:e,action:s,job_ids:a})});if(!r.ok)throw Error(`Failed to execute bulk ${s}: ${r.statusText}`);return t(e=>({...e,actionLoading:!1})),!0}catch(e){return t(t=>({...t,error:e instanceof Error?e.message:`Failed to execute bulk ${s}`,actionLoading:!1})),!1}},[e]);return{...s,refetch:a,pauseQueue:()=>l("pause"),resumeQueue:()=>l("resume"),drainQueue:()=>l("drain"),obliterateQueue:()=>l("obliterate"),bulkRetry:e=>i("retry",e),bulkRemove:e=>i("remove",e)}}(e),g=e=>{switch(e){case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"waiting":default:return"bg-gray-100 text-gray-800";case"delayed":return"bg-yellow-100 text-yellow-800"}};return i?a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})}):(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>t(!s),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400 animate-pulse"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Queue: ",e]}),l&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[l.active," active, ",l.waiting," waiting, ",l.failed," failed"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[x&&a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"draining":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(x.status)}`,children:x.status}),a.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${s?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),s&&(0,a.jsxs)("div",{className:"border-t border-gray-200",children:[a.jsx("div",{className:"p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[x?.can_pause&&"paused"!==x.status&&a.jsx("button",{onClick:e=>{e.stopPropagation(),m()},disabled:p,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Pause"}),x?.can_resume&&"paused"===x.status&&a.jsx("button",{onClick:e=>{e.stopPropagation(),h()},disabled:p,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Resume"}),x?.can_drain&&a.jsx("button",{onClick:e=>{e.stopPropagation(),u()},disabled:p,className:"inline-flex items-center px-2.5 py-1.5 border border-orange-300 shadow-sm text-xs font-medium rounded text-orange-700 bg-orange-50 hover:bg-orange-100 disabled:opacity-50",children:"Drain"})]})}),l&&(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-semibold text-gray-900",children:l.total}),a.jsx("div",{className:"text-xs text-gray-500",children:"Total Jobs"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-semibold text-blue-600",children:l.throughput.per_minute}),a.jsx("div",{className:"text-xs text-gray-500",children:"Per Minute"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-green-600",children:[Math.round(l.performance.success_rate),"%"]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Success Rate"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Recent Jobs"}),o?a.jsx("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((e,s)=>a.jsx("div",{className:"animate-pulse h-8 bg-gray-200 rounded"},s))}):n.length>0?a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:n.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${g(e.state)}`,children:e.state}),a.jsx("span",{className:"truncate",children:e.name})]}),"failed"===e.state&&(0,a.jsxs)("div",{className:"flex space-x-1 ml-2",children:[a.jsx("button",{onClick:()=>d(e.id),className:"text-blue-600 hover:text-blue-800",title:"Retry",children:"↻"}),a.jsx("button",{onClick:()=>c(e.id),className:"text-red-600 hover:text-red-800",title:"Remove",children:"✕"})]})]},e.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No jobs found"})]})]})]})]})}function ek({isOpen:e,onClose:s,promptId:t}){let[l,i]=(0,r.useState)(t||""),[n,o]=(0,r.useState)({}),[d,c]=(0,r.useState)("preview"),{prompts:x,loading:m}=ey(),{preview:h,previewPrompt:u,loading:p}=function(){let[e,s]=(0,r.useState)({loading:!1,error:null,preview:null}),t=(0,r.useCallback)(async(e,t={})=>{s(e=>({...e,loading:!0,error:null}));try{let a=await fetch("/api/prompts/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_id:e,variables:t})});if(!a.ok)throw Error(`Failed to preview prompt: ${a.statusText}`);let r=await a.json();return s(e=>({...e,preview:r,loading:!1})),r}catch(t){let e=t instanceof Error?t.message:"Failed to preview prompt";throw s(s=>({...s,error:e,loading:!1})),t}},[]);return{...e,previewPrompt:t}}(),{expanded:g,expandPrompt:b,loading:y}=function(){let[e,s]=(0,r.useState)({loading:!1,error:null,expanded:null}),t=(0,r.useCallback)(async(e,t={})=>{s(e=>({...e,loading:!0,error:null}));try{let a=await fetch("/api/prompts/expand",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_id:e,variables:t})});if(!a.ok)throw Error(`Failed to expand prompt: ${a.statusText}`);let r=await a.json();return s(e=>({...e,expanded:r,loading:!1})),r}catch(t){let e=t instanceof Error?t.message:"Failed to expand prompt";throw s(s=>({...s,error:e,loading:!1})),t}},[]);return{...e,expandPrompt:t}}(),{result:j,runPrompt:f,loading:v}=function(){let[e,s]=(0,r.useState)({loading:!1,error:null,result:null}),t=(0,r.useCallback)(async(e,t={},a={})=>{s(e=>({...e,loading:!0,error:null}));try{let r=await fetch("/api/prompts/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_id:e,variables:t,...a})});if(!r.ok)throw Error(`Failed to run prompt: ${r.statusText}`);let l=await r.json();return s(e=>({...e,result:l,loading:!1})),l}catch(t){let e=t instanceof Error?t.message:"Failed to run prompt";throw s(s=>({...s,error:e,loading:!1})),t}},[]);return{...e,runPrompt:t}}(),N=x.find(e=>e.id===l);(0,r.useEffect)(()=>{t&&i(t)},[t]),(0,r.useEffect)(()=>{if(N){let e={};N.variables.forEach(s=>{void 0!==s.default&&(e[s.name]=s.default)}),o(e)}},[N]);let w=(e,s)=>{o(t=>({...t,[e]:s}))};return e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-hidden","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:s}),a.jsx("div",{className:"fixed inset-y-0 right-0 pl-10 max-w-full flex",children:a.jsx("div",{className:"w-screen max-w-2xl",children:(0,a.jsxs)("div",{className:"h-full flex flex-col bg-white shadow-xl overflow-y-scroll",children:[a.jsx("div",{className:"px-4 py-6 bg-gray-50 sm:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900",id:"slide-over-title",children:"Prompt Preview"}),a.jsx("div",{className:"ml-3 h-7 flex items-center",children:(0,a.jsxs)("button",{type:"button",className:"bg-gray-50 rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500",onClick:s,children:[a.jsx("span",{className:"sr-only",children:"Close panel"}),a.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 px-4 py-6 sm:px-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{htmlFor:"prompt-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Prompt"}),(0,a.jsxs)("select",{id:"prompt-select",value:l,onChange:e=>i(e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[a.jsx("option",{value:"",children:"Select a prompt..."}),x.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.title," (",e.category,")"]},e.id))]})]}),N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:N.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:N.category}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:N.intent}),N.tags.map(e=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e},e))]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Language: ",N.language," | Variables: ",N.variables.length]})]}),N.variables.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Variables"}),a.jsx("div",{className:"space-y-4",children:N.variables.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.name,e.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:e.description}),"boolean"===e.type?(0,a.jsxs)("select",{value:n[e.name]||"",onChange:s=>w(e.name,"true"===s.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[a.jsx("option",{value:"false",children:"False"}),a.jsx("option",{value:"true",children:"True"})]}):"number"===e.type?a.jsx("input",{type:"number",value:n[e.name]||"",onChange:s=>w(e.name,parseFloat(s.target.value)||0),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"}):a.jsx("textarea",{value:n[e.name]||"",onChange:s=>w(e.name,s.target.value),rows:2,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]},e.name))})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:["preview","expand","run"].map(e=>a.jsx("button",{onClick:()=>c(e),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${d===e?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,a.jsxs)("div",{children:["preview"===d&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Preview"}),a.jsx("button",{onClick:()=>{l&&u(l,n)},disabled:p,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:p?"Loading...":"Preview"})]}),h&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:h.rendered_prompt||"No preview available"})})]}),"expand"===d&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Expand"}),a.jsx("button",{onClick:()=>{l&&b(l,n)},disabled:y,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:y?"Loading...":"Expand"})]}),g&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:g.expanded_prompt||"No expanded content available"}),g.metadata&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"Metadata"}),a.jsx("pre",{className:"text-xs text-gray-600",children:JSON.stringify(g.metadata,null,2)})]})]})]}),"run"===d&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Run"}),a.jsx("button",{onClick:()=>{l&&f(l,n)},disabled:v,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:v?"Running...":"Run Prompt"})]}),j&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Response"}),a.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:j.response||"No response available"})]}),j.metadata&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("h5",{className:"text-sm font-medium text-blue-900 mb-2",children:"Metadata"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Engine:"})," ",j.metadata.engine]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Model:"})," ",j.metadata.model]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Tokens:"})," ",j.metadata.tokens_used]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Cost:"})," $",j.metadata.cost?.toFixed(4)]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Latency:"})," ",j.metadata.latency_ms,"ms"]})]})]})]})]})]})]})]})]})})})]})}):null}let eS=({title:e,value:s,change:t,trend:r="up",icon:l,color:i="blue"})=>a.jsx("div",{className:`rounded-xl border ${{blue:"border-blue-500 bg-blue-500/10",green:"border-green-500 bg-green-500/10",purple:"border-purple-500 bg-purple-500/10",orange:"border-orange-500 bg-orange-500/10",red:"border-red-500 bg-red-500/10"}[i]} p-6 backdrop-blur-sm`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-400",children:e}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s}),void 0!==t&&(0,a.jsxs)("div",{className:`flex items-center mt-2 ${"up"===r?"text-green-400":"text-red-400"}`,children:["up"===r?a.jsx(er,{className:"w-4 h-4"}):a.jsx(el,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[Math.abs(t),"%"]})]})]}),a.jsx(l,{className:`w-8 h-8 ${"blue"===i?"text-blue-400":"green"===i?"text-green-400":"purple"===i?"text-purple-400":"orange"===i?"text-orange-400":"text-red-400"}`})]})}),eC=({children:e,className:s=""})=>a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full bg-gray-800 text-gray-300 border border-gray-700 ${s}`,children:e});function eE(){let[e,s]=(0,r.useState)("overview"),[t,l]=(0,r.useState)({seo:0,aeo:0,geo:0}),[i,n]=(0,r.useState)(!0),[o]=(0,r.useState)("DEMO_DEALER_001"),[d,c]=(0,r.useState)(!1),[x,m]=(0,r.useState)(),{isAdmin:h}=function(){let[e,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=localStorage.getItem("dealershipai-admin-mode");e&&s(JSON.parse(e));let t=e=>{"dealershipai-admin-mode"===e.key&&e.newValue&&s(JSON.parse(e.newValue))};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),{isAdmin:e,toggleAdmin:t=>{let a=void 0!==t?t:!e;localStorage.setItem("dealershipai-admin-mode",JSON.stringify(a)),s(a)}}}(),u=ej(),{prompts:p,loading:g,stats:b}=ey({validate:!0}),{data:y}=function(e){let[s,t]=(0,r.useState)({data:null,loading:!0,error:null}),a=(0,r.useCallback)(async()=>{t(e=>({...e,loading:!0,error:null}));try{let s=new URLSearchParams;e&&s.append("dealer_id",e);let a=await fetch(`/api/visibility?${s.toString()}`);if(!a.ok)throw Error(`Failed to fetch visibility data: ${a.statusText}`);let r=await a.json();t(e=>({...e,data:r,loading:!1}))}catch(e){t(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch visibility data",loading:!1}))}},[e]);return(0,r.useEffect)(()=>{a()},[a]),{...s,refetch:a}}(o),{history:j}=function(e,s=30){let[t,a]=(0,r.useState)({history:[],loading:!0,error:null}),l=(0,r.useCallback)(async()=>{a(e=>({...e,loading:!0,error:null}));try{let t=new URLSearchParams({days:s.toString()});e&&t.append("dealer_id",e);let r=await fetch(`/api/visibility/history?${t.toString()}`);if(!r.ok)throw Error(`Failed to fetch visibility history: ${r.statusText}`);let l=await r.json();a(e=>({...e,history:l.history||[],loading:!1}))}catch(e){a(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch visibility history",loading:!1}))}},[e,s]);return(0,r.useEffect)(()=>{l()},[l]),{...t,refetch:l}}(o,30),{validateURLs:f}=function(){let[e,s]=(0,r.useState)({results:[],summary:null,loading:!1,error:null}),t=(0,r.useCallback)(async(e,t={})=>{s(e=>({...e,loading:!0,error:null}));try{let a=await fetch("/api/schema/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:e,...t})});if(!a.ok)throw Error(`Failed to validate schemas: ${a.statusText}`);let r=await a.json();return s(e=>({...e,results:r.validation_results||[],summary:r.summary||null,loading:!1})),r}catch(t){let e=t instanceof Error?t.message:"Failed to validate schemas";throw s(s=>({...s,error:e,loading:!1})),t}},[]),a=(0,r.useCallback)(()=>{s({results:[],summary:null,loading:!1,error:null})},[]);return{...e,validateURLs:t,clearResults:a}}(),{tests:v,summary:N}=function(){let[e,s]=(0,r.useState)({tests:[],summary:null,loading:!0,error:null}),t=(0,r.useCallback)(async(e={})=>{s(e=>({...e,loading:!0,error:null}));try{let t=new URLSearchParams;e.status&&t.append("status",e.status),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());let a=await fetch(`/api/batch/tests?${t.toString()}`);if(!a.ok)throw Error(`Failed to fetch batch tests: ${a.statusText}`);let r=await a.json();s(e=>({...e,tests:r.tests||[],summary:r.summary||null,loading:!1}))}catch(e){s(s=>({...s,error:e instanceof Error?e.message:"Failed to fetch batch tests",loading:!1}))}},[]),a=(0,r.useCallback)(async e=>{try{let s=await fetch("/api/batch/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error(`Failed to create batch test: ${s.statusText}`);let a=await s.json();return await t(),a}catch(e){throw console.error("Failed to create batch test:",e),e}},[t]),l=(0,r.useCallback)(async e=>{try{let s=await fetch(`/api/batch/run/${e}`,{method:"POST"});if(!s.ok)throw Error(`Failed to run batch test: ${s.statusText}`);let a=await s.json();return await t(),a}catch(e){throw console.error("Failed to run batch test:",e),e}},[t]),i=(0,r.useCallback)(async e=>{try{let s=await fetch(`/api/batch/cancel/${e}`,{method:"POST"});if(!s.ok)throw Error(`Failed to cancel batch test: ${s.statusText}`);return await t(),!0}catch(e){return console.error("Failed to cancel batch test:",e),!1}},[t]),n=(0,r.useCallback)(async e=>{try{let s=await fetch(`/api/batch/tests/${e}`,{method:"DELETE"});if(!s.ok)throw Error(`Failed to delete batch test: ${s.statusText}`);return await t(),!0}catch(e){return console.error("Failed to delete batch test:",e),!1}},[t]);return{...e,refetch:t,createTest:a,runTest:l,cancelTest:i,deleteTest:n}}(),w=(0,r.useMemo)(()=>[{name:"Jan",sales:45e3,leads:320,visits:1240},{name:"Feb",sales:52e3,leads:380,visits:1350},{name:"Mar",sales:48e3,leads:340,visits:1180},{name:"Apr",sales:61e3,leads:420,visits:1580},{name:"May",sales:55e3,leads:390,visits:1420},{name:"Jun",sales:67e3,leads:450,visits:1680}],[]),k=(0,r.useMemo)(()=>[{name:"New",value:45,color:"#3B82F6"},{name:"Used",value:120,color:"#10B981"},{name:"Certified",value:35,color:"#8B5CF6"},{name:"Trade-ins",value:28,color:"#F59E0B"}],[]),S=(0,r.useMemo)(()=>[{name:"Mon",seo:85,aeo:72,geo:68,traffic:145},{name:"Tue",seo:87,aeo:75,geo:71,traffic:152},{name:"Wed",seo:82,aeo:70,geo:65,traffic:138},{name:"Thu",seo:90,aeo:78,geo:74,traffic:168},{name:"Fri",seo:88,aeo:76,geo:72,traffic:155},{name:"Sat",seo:85,aeo:73,geo:69,traffic:142},{name:"Sun",seo:83,aeo:71,geo:67,traffic:135}],[]),E=e=>{m(e),c(!0)},M=async()=>{try{await f(["https://example-dealership.com","https://example-dealership.com/inventory","https://example-dealership.com/services"],{dealer_id:o}),u.success("Schema validation completed","Check the Schema tab for results")}catch(e){u.error("Schema validation failed",e instanceof Error?e.message:"Unknown error")}};(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/advanced-kpis");if(e.ok){let s=await e.json();s.success&&s.data.scores&&l(s.data.scores)}}catch(e){console.error("Failed to fetch KPI data:",e)}finally{n(!1)}};e();let s=setInterval(e,3e4);return()=>clearInterval(s)},[]);let P=[{id:"overview",label:"Overview",icon:ei},{id:"prompts",label:"Prompts",icon:C},{id:"schema",label:"Schema",icon:en},{id:"batch",label:"Batch Tests",icon:eo},{id:"sales",label:"Sales Analytics",icon:ed},{id:"inventory",label:"Inventory",icon:ec},{id:"advanced-kpi",label:"Advanced KPIs",icon:ex},{id:"leads",label:"Lead Management",icon:em},{id:"performance",label:"Performance",icon:eh}];return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:[a.jsx("div",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur-sm sticky top-0 z-10",children:a.jsx("div",{className:"px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(ec,{className:"w-5 h-5 text-white"})}),"Premium Auto Naples",a.jsx(eC,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"Live"})]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Enterprise Dealership Analytics Dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-gray-400",children:"Real-time data"})]}),h&&a.jsx(ew,{}),a.jsx(ef,{}),a.jsx(eC,{children:new Date().toLocaleDateString()})]})]})})}),a.jsx("div",{className:"border-b border-gray-800",children:a.jsx("div",{className:"px-8",children:a.jsx("nav",{className:"flex space-x-8",children:P.map(t=>{let r=t.icon;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:`flex items-center gap-2 px-3 py-4 border-b-2 text-sm font-medium transition-all ${e===t.id?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-600"}`,children:[a.jsx(r,{className:"w-4 h-4"}),t.label]},t.id)})})})}),a.jsx("div",{className:"p-8",children:(()=>{switch(e){case"overview":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(eS,{title:"Monthly Sales",value:"$67,000",change:12.5,trend:"up",icon:ed,color:"green"}),a.jsx(eS,{title:"Active Leads",value:"89",change:8.2,trend:"up",icon:em,color:"blue"}),a.jsx(eS,{title:"Inventory",value:"228",change:-2.1,trend:"down",icon:ec,color:"purple"}),a.jsx(eS,{title:"Conversion Rate",value:"18.4%",change:3.7,trend:"up",icon:eo,color:"orange"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(eu,{className:"w-5 h-5"}),"Sales Trend"]}),a.jsx(A.h,{width:"100%",height:300,children:(0,a.jsxs)(F.w,{data:w,children:[a.jsx(L.q,{strokeDasharray:"3 3",stroke:"#374151"}),a.jsx(R.K,{dataKey:"name",stroke:"#9CA3AF"}),a.jsx(I.B,{stroke:"#9CA3AF"}),a.jsx(D.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),a.jsx(q.x,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:2,r:4}})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(ec,{className:"w-5 h-5"}),"Inventory Distribution"]}),a.jsx(A.h,{width:"100%",height:300,children:(0,a.jsxs)(Y.u,{children:[a.jsx(ee.b,{data:k,cx:"50%",cy:"50%",outerRadius:100,dataKey:"value",label:({name:e,value:s})=>`${e}: ${s}`,children:k.map((e,s)=>a.jsx(es.b,{fill:e.color},`cell-${s}`))}),a.jsx(D.u,{})]})})]})]})]});case"prompts":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Prompt Management"}),a.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Test Prompt"})]}),b&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(eS,{title:"Total Prompts",value:b.total,icon:C,color:"blue"}),a.jsx(eS,{title:"Categories",value:Object.keys(b.by_category).length,icon:eo,color:"green"}),a.jsx(eS,{title:"Intents",value:Object.keys(b.by_intent).length,icon:eh,color:"purple"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800",children:[a.jsx("div",{className:"p-6 border-b border-gray-800",children:a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Available Prompts"})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:g?a.jsx("div",{className:"p-6 text-gray-400",children:"Loading prompts..."}):a.jsx("div",{className:"divide-y divide-gray-800",children:p.map(e=>a.jsx("div",{className:"p-4 hover:bg-gray-800/50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-white",children:e.title}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(eC,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:e.category}),a.jsx(eC,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:e.intent}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[e.variables.length," variables"]})]})]}),a.jsx("button",{onClick:()=>E(e.id),className:"px-3 py-2 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors text-sm",children:"Test"})]})},e.id))})})]})]});case"schema":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Schema Validation"}),a.jsx("button",{onClick:M,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Run Schema Check"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(eS,{title:"Schema Coverage",value:"73%",change:5.2,trend:"up",icon:en,color:"blue"}),a.jsx(eS,{title:"Valid Schemas",value:"12/16",icon:ep,color:"green"}),a.jsx(eS,{title:"Issues Found",value:"4",icon:eg,color:"red"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Schema Status"}),a.jsx("p",{className:"text-gray-400",children:"Schema validation results will appear here after running a check."})]})]});case"batch":return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Batch Testing"}),N&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(eS,{title:"Total Tests",value:N.total_tests,icon:eh,color:"blue"}),a.jsx(eS,{title:"Completed",value:N.completed_tests,icon:ep,color:"green"}),a.jsx(eS,{title:"Running",value:N.running_tests,icon:C,color:"orange"}),a.jsx(eS,{title:"Failed",value:N.failed_tests,icon:eg,color:"red"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Batch Test Management"}),a.jsx("p",{className:"text-gray-400",children:"Batch test results and management interface will be displayed here."})]})]});case"advanced-kpi":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(eS,{title:"SEO Score",value:i?"...":`${Math.round(t.seo)}%`,change:i?void 0:5.2,trend:"up",icon:en,color:"blue"}),a.jsx(eS,{title:"AEO Score",value:i?"...":`${Math.round(t.aeo)}%`,change:i?void 0:3.1,trend:"up",icon:C,color:"purple"}),a.jsx(eS,{title:"GEO Score",value:i?"...":`${Math.round(t.geo)}%`,change:i?void 0:7.8,trend:"up",icon:ex,color:"green"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(eh,{className:"w-5 h-5"}),"SEO/AEO/GEO Performance Trends",a.jsx(eC,{children:"Weekly View"})]}),a.jsx(A.h,{width:"100%",height:400,children:(0,a.jsxs)(et.T,{data:S,children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"seoGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"aeoGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#8B5CF6",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"#8B5CF6",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"geoGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})]}),a.jsx(L.q,{strokeDasharray:"3 3",stroke:"#374151"}),a.jsx(R.K,{dataKey:"name",stroke:"#9CA3AF"}),a.jsx(I.B,{stroke:"#9CA3AF"}),a.jsx(D.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),a.jsx(ea.u,{type:"monotone",dataKey:"seo",stroke:"#3B82F6",strokeWidth:2,fillOpacity:1,fill:"url(#seoGradient)"}),a.jsx(ea.u,{type:"monotone",dataKey:"aeo",stroke:"#8B5CF6",strokeWidth:2,fillOpacity:1,fill:"url(#aeoGradient)"}),a.jsx(ea.u,{type:"monotone",dataKey:"geo",stroke:"#10B981",strokeWidth:2,fillOpacity:1,fill:"url(#geoGradient)"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(en,{className:"w-4 h-4 text-blue-400"}),"SEO Metrics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Core Web Vitals"}),a.jsx(eC,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"85%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Local SERP"}),a.jsx(eC,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"92%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Schema Coverage"}),a.jsx(eC,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:"78%"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(C,{className:"w-4 h-4 text-purple-400"}),"AEO Metrics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Mention Frequency"}),a.jsx(eC,{className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:"15.2%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Position Score"}),a.jsx(eC,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"3.2 avg"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Accuracy Rate"}),a.jsx(eC,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"94.1%"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(ex,{className:"w-4 h-4 text-green-400"}),"GEO Metrics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"AI Visibility"}),a.jsx(eC,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"68.9%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Market Share"}),a.jsx(eC,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"12.4%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Engagement Rate"}),a.jsx(eC,{className:"bg-orange-500/20 text-orange-400 border-orange-500/30",children:"45.7%"})]})]})]})]})]});case"sales":return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(eS,{title:"Total Revenue",value:"$324,500",change:15.3,trend:"up",icon:ed,color:"green"}),a.jsx(eS,{title:"Units Sold",value:"47",change:8.7,trend:"up",icon:ec,color:"blue"}),a.jsx(eS,{title:"Avg Sale Price",value:"$6,906",change:2.1,trend:"up",icon:eu,color:"purple"}),a.jsx(eS,{title:"Profit Margin",value:"22.4%",change:1.8,trend:"up",icon:eo,color:"orange"})]})});default:return a.jsx("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"text-gray-400",children:[a.jsx(eb,{className:"w-16 h-16 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium",children:"Coming Soon"}),a.jsx("p",{className:"text-sm mt-2",children:"This feature is under development."})]})})}})()}),a.jsx(ek,{isOpen:d,onClose:()=>c(!1),promptId:x}),a.jsx(eN,{})]})}function eM({dealerId:e}){return a.jsx("div",{className:"w-full",children:a.jsx(eE,{})})}let eP=[{id:"overview",label:"Overview",icon:o},{id:"ai-health",label:"AI Health",icon:d},{id:"zero-click",label:"Zero-Click",icon:c},{id:"ugc",label:"UGC",icon:x},{id:"schema",label:"Schema",icon:m},{id:"premium",label:"Premium Dashboard",icon:h},{id:"website",label:"Website",icon:u}];function e$(){let[e,s]=(0,r.useState)("toyota-naples"),[t,l]=(0,r.useState)("overview"),[i,n]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("dai.tab");e&&eP.find(s=>s.id===e)&&l(e)},[]),(0,r.useEffect)(()=>void localStorage.setItem("dai.tab",t),[t]);let o=(0,r.useMemo)(()=>(0,a.jsxs)("header",{style:{borderBottom:"1px solid #1f2937",position:"sticky",top:0,backdropFilter:"blur(6px)",background:"rgba(11,11,11,.8)",zIndex:10},children:[(0,a.jsxs)("div",{style:{maxWidth:1120,margin:"0 auto",padding:"12px 16px",display:"flex",gap:12,alignItems:"center"},children:[a.jsx("div",{style:{fontWeight:700},children:"DealershipAI"}),a.jsx("div",{className:"ml-auto"}),(0,a.jsxs)("button",{onClick:()=>n(!i),className:`flex items-center gap-2 px-3 py-2 rounded text-sm transition-colors ${i?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[a.jsx(p,{className:"w-4 h-4"}),"AI Assistant"]}),a.jsx("label",{className:"text-sm",children:"Dealer ID"}),a.jsx("input",{value:e,onChange:e=>s(e.target.value),className:"border rounded px-2 py-1 h-8",placeholder:"toyota-naples"})]}),a.jsx("nav",{style:{maxWidth:1120,margin:"0 auto",padding:"4px 8px",display:"flex",gap:8,overflowX:"auto"},children:eP.map(e=>(0,a.jsxs)("button",{onClick:()=>l(e.id),className:`px-3 py-2 rounded text-sm flex items-center gap-2 ${t===e.id?"bg-white text-black":"bg-black text-white border"}`,children:[a.jsx(e.icon,{className:"w-4 h-4"})," ",e.label]},e.id))})]}),[t,e,i]);return(0,a.jsxs)("div",{children:[o,(0,a.jsxs)("main",{style:{maxWidth:1120,margin:"0 auto",padding:16},children:["overview"===t&&a.jsx(J,{dealerId:e}),"ai-health"===t&&a.jsx(K,{dealerId:e}),"zero-click"===t&&a.jsx(Z,{dealerId:e}),"ugc"===t&&a.jsx(Q,{dealerId:e}),"schema"===t&&a.jsx(X,{dealerId:e}),"premium"===t&&a.jsx(eM,{dealerId:e}),"website"===t&&a.jsx(y,{children:a.jsx("div",{className:"text-sm",children:"Website panel stub. Wire PageSpeed + Lighthouse later."})})]}),i&&(0,a.jsxs)("div",{className:"fixed bottom-4 right-4 w-96 h-[600px] bg-slate-800 border border-slate-700 rounded-lg shadow-2xl z-50 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p,{className:"w-5 h-5 text-blue-400"}),a.jsx("span",{className:"font-medium text-slate-100",children:"AI Assistant"})]}),a.jsx("button",{onClick:()=>n(!1),className:"p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded transition-colors",children:a.jsx(g,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"flex-1 min-h-0",children:a.jsx(O,{dealerId:e,userTier:2,businessInfo:{},onUpgrade:()=>alert("Upgrade to higher tier!")})})]})]})}function eT(){return a.jsx(e$,{})}},18844:(e,s,t)=>{"use strict";t.r(s),t.d(s,{SessionProvider:()=>l});var a=t(76637),r=t(72881);function l({children:e}){return a.jsx(r.SessionProvider,{children:e})}},32628:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>d});var a=t(89445);t(15743);var r=t(32215);let l=(0,r.createProxy)(String.raw`/Users/briankramer/Documents/GitHub/dealership-ai/apps/web/components/providers/SessionProvider.tsx`),{__esModule:i,$$typeof:n}=l;l.default;let o=(0,r.createProxy)(String.raw`/Users/briankramer/Documents/GitHub/dealership-ai/apps/web/components/providers/SessionProvider.tsx#SessionProvider`),d={title:"DealershipAI — Halo",description:"Algorithmic Trust Dashboard"};function c({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{style:{background:"#0b0b0b",color:"#e5e7eb",margin:0,fontFamily:"ui-sans-serif, system-ui"},children:a.jsx(o,{children:e})})})}},9052:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,t(32215).createProxy)(String.raw`/Users/briankramer/Documents/GitHub/dealership-ai/apps/web/app/page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default},15743:()=>{}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1262,2736,2068],()=>t(88286));module.exports=a})();